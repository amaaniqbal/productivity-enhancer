{"ast":null,"code":"/**\r\n * DevExtreme (events/drag.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.drop = exports.leave = exports.enter = exports.end = exports.start = exports.move = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\n\nvar _element_data = require(\"../core/element_data\");\n\nvar _array = require(\"../core/utils/array\");\n\nvar iteratorUtils = _interopRequireWildcard(require(\"../core/utils/iterator\"));\n\nvar _dom = require(\"../core/utils/dom\");\n\nvar _event_registrator = _interopRequireDefault(require(\"./core/event_registrator\"));\n\nvar _index = require(\"./utils/index\");\n\nvar _emitter = _interopRequireDefault(require(\"./gesture/emitter.gesture\"));\n\nvar _emitter_registrator = _interopRequireDefault(require(\"./core/emitter_registrator\"));\n\nfunction _getRequireWildcardCache() {\n  if (\"function\" !== typeof WeakMap) {\n    return null;\n  }\n\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function () {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DRAG_START_EVENT = \"dxdragstart\";\nexports.start = DRAG_START_EVENT;\nvar DRAG_EVENT = \"dxdrag\";\nexports.move = DRAG_EVENT;\nvar DRAG_END_EVENT = \"dxdragend\";\nexports.end = DRAG_END_EVENT;\nvar DRAG_ENTER_EVENT = \"dxdragenter\";\nexports.enter = DRAG_ENTER_EVENT;\nvar DRAG_LEAVE_EVENT = \"dxdragleave\";\nexports.leave = DRAG_LEAVE_EVENT;\nvar DROP_EVENT = \"dxdrop\";\nexports.drop = DROP_EVENT;\nvar DX_DRAG_EVENTS_COUNT_KEY = \"dxDragEventsCount\";\nvar knownDropTargets = [];\nvar knownDropTargetSelectors = [];\nvar knownDropTargetConfigs = [];\nvar dropTargetRegistration = {\n  setup: function (element, data) {\n    var knownDropTarget = (0, _array.inArray)(element, knownDropTargets) !== -1;\n\n    if (!knownDropTarget) {\n      knownDropTargets.push(element);\n      knownDropTargetSelectors.push([]);\n      knownDropTargetConfigs.push(data || {});\n    }\n  },\n  add: function (element, handleObj) {\n    var index = (0, _array.inArray)(element, knownDropTargets);\n    this.updateEventsCounter(element, handleObj.type, 1);\n    var selector = handleObj.selector;\n\n    if ((0, _array.inArray)(selector, knownDropTargetSelectors[index]) === -1) {\n      knownDropTargetSelectors[index].push(selector);\n    }\n  },\n  updateEventsCounter: function (element, event, value) {\n    if ([DRAG_ENTER_EVENT, DRAG_LEAVE_EVENT, DROP_EVENT].indexOf(event) > -1) {\n      var eventsCount = (0, _element_data.data)(element, DX_DRAG_EVENTS_COUNT_KEY) || 0;\n      (0, _element_data.data)(element, DX_DRAG_EVENTS_COUNT_KEY, Math.max(0, eventsCount + value));\n    }\n  },\n  remove: function (element, handleObj) {\n    this.updateEventsCounter(element, handleObj.type, -1);\n  },\n  teardown: function (element) {\n    var handlersCount = (0, _element_data.data)(element, DX_DRAG_EVENTS_COUNT_KEY);\n\n    if (!handlersCount) {\n      var index = (0, _array.inArray)(element, knownDropTargets);\n      knownDropTargets.splice(index, 1);\n      knownDropTargetSelectors.splice(index, 1);\n      knownDropTargetConfigs.splice(index, 1);\n      (0, _element_data.removeData)(element, DX_DRAG_EVENTS_COUNT_KEY);\n    }\n  }\n};\n(0, _event_registrator.default)(DRAG_ENTER_EVENT, dropTargetRegistration);\n(0, _event_registrator.default)(DRAG_LEAVE_EVENT, dropTargetRegistration);\n(0, _event_registrator.default)(DROP_EVENT, dropTargetRegistration);\n\nvar getItemDelegatedTargets = function ($element) {\n  var dropTargetIndex = (0, _array.inArray)($element.get(0), knownDropTargets);\n  var dropTargetSelectors = knownDropTargetSelectors[dropTargetIndex].filter(function (selector) {\n    return selector;\n  });\n  var $delegatedTargets = $element.find(dropTargetSelectors.join(\", \"));\n\n  if ((0, _array.inArray)(void 0, knownDropTargetSelectors[dropTargetIndex]) !== -1) {\n    $delegatedTargets = $delegatedTargets.add($element);\n  }\n\n  return $delegatedTargets;\n};\n\nvar getItemConfig = function ($element) {\n  var dropTargetIndex = (0, _array.inArray)($element.get(0), knownDropTargets);\n  return knownDropTargetConfigs[dropTargetIndex];\n};\n\nvar getItemPosition = function (dropTargetConfig, $element) {\n  if (dropTargetConfig.itemPositionFunc) {\n    return dropTargetConfig.itemPositionFunc($element);\n  } else {\n    return $element.offset();\n  }\n};\n\nvar getItemSize = function (dropTargetConfig, $element) {\n  if (dropTargetConfig.itemSizeFunc) {\n    return dropTargetConfig.itemSizeFunc($element);\n  }\n\n  return {\n    width: $element.get(0).getBoundingClientRect().width,\n    height: $element.get(0).getBoundingClientRect().height\n  };\n};\n\nvar DragEmitter = _emitter.default.inherit({\n  ctor: function (element) {\n    this.callBase(element);\n    this.direction = \"both\";\n  },\n  _init: function (e) {\n    this._initEvent = e;\n  },\n  _start: function (e) {\n    e = this._fireEvent(DRAG_START_EVENT, this._initEvent);\n    this._maxLeftOffset = e.maxLeftOffset;\n    this._maxRightOffset = e.maxRightOffset;\n    this._maxTopOffset = e.maxTopOffset;\n    this._maxBottomOffset = e.maxBottomOffset;\n    var dropTargets = (0, _array.wrapToArray)(e.targetElements || (null === e.targetElements ? [] : knownDropTargets));\n    this._dropTargets = iteratorUtils.map(dropTargets, function (element) {\n      return (0, _renderer.default)(element).get(0);\n    });\n  },\n  _move: function (e) {\n    var eventData = (0, _index.eventData)(e);\n\n    var dragOffset = this._calculateOffset(eventData);\n\n    e = this._fireEvent(DRAG_EVENT, e, {\n      offset: dragOffset\n    });\n\n    this._processDropTargets(e);\n\n    if (!e._cancelPreventDefault) {\n      e.preventDefault();\n    }\n  },\n  _calculateOffset: function (eventData) {\n    return {\n      x: this._calculateXOffset(eventData),\n      y: this._calculateYOffset(eventData)\n    };\n  },\n  _calculateXOffset: function (eventData) {\n    if (\"vertical\" !== this.direction) {\n      var offset = eventData.x - this._startEventData.x;\n      return this._fitOffset(offset, this._maxLeftOffset, this._maxRightOffset);\n    }\n\n    return 0;\n  },\n  _calculateYOffset: function (eventData) {\n    if (\"horizontal\" !== this.direction) {\n      var offset = eventData.y - this._startEventData.y;\n      return this._fitOffset(offset, this._maxTopOffset, this._maxBottomOffset);\n    }\n\n    return 0;\n  },\n  _fitOffset: function (offset, minOffset, maxOffset) {\n    if (null != minOffset) {\n      offset = Math.max(offset, -minOffset);\n    }\n\n    if (null != maxOffset) {\n      offset = Math.min(offset, maxOffset);\n    }\n\n    return offset;\n  },\n  _processDropTargets: function (e) {\n    var target = this._findDropTarget(e);\n\n    var sameTarget = target === this._currentDropTarget;\n\n    if (!sameTarget) {\n      this._fireDropTargetEvent(e, DRAG_LEAVE_EVENT);\n\n      this._currentDropTarget = target;\n\n      this._fireDropTargetEvent(e, DRAG_ENTER_EVENT);\n    }\n  },\n  _fireDropTargetEvent: function (event, eventName) {\n    if (!this._currentDropTarget) {\n      return;\n    }\n\n    var eventData = {\n      type: eventName,\n      originalEvent: event,\n      draggingElement: this._$element.get(0),\n      target: this._currentDropTarget\n    };\n    (0, _index.fireEvent)(eventData);\n  },\n  _findDropTarget: function (e) {\n    var that = this;\n    var result;\n    iteratorUtils.each(knownDropTargets, function (_, target) {\n      if (!that._checkDropTargetActive(target)) {\n        return;\n      }\n\n      var $target = (0, _renderer.default)(target);\n      iteratorUtils.each(getItemDelegatedTargets($target), function (_, delegatedTarget) {\n        var $delegatedTarget = (0, _renderer.default)(delegatedTarget);\n\n        if (that._checkDropTarget(getItemConfig($target), $delegatedTarget, (0, _renderer.default)(result), e)) {\n          result = delegatedTarget;\n        }\n      });\n    });\n    return result;\n  },\n  _checkDropTargetActive: function (target) {\n    var active = false;\n    iteratorUtils.each(this._dropTargets, function (_, activeTarget) {\n      active = active || activeTarget === target || (0, _dom.contains)(activeTarget, target);\n      return !active;\n    });\n    return active;\n  },\n  _checkDropTarget: function (config, $target, $prevTarget, e) {\n    var isDraggingElement = $target.get(0) === (0, _renderer.default)(e.target).get(0);\n\n    if (isDraggingElement) {\n      return false;\n    }\n\n    var targetPosition = getItemPosition(config, $target);\n\n    if (e.pageX < targetPosition.left) {\n      return false;\n    }\n\n    if (e.pageY < targetPosition.top) {\n      return false;\n    }\n\n    var targetSize = getItemSize(config, $target);\n\n    if (e.pageX > targetPosition.left + targetSize.width) {\n      return false;\n    }\n\n    if (e.pageY > targetPosition.top + targetSize.height) {\n      return false;\n    }\n\n    if ($prevTarget.length && $prevTarget.closest($target).length) {\n      return false;\n    }\n\n    if (config.checkDropTarget && !config.checkDropTarget($target, e)) {\n      return false;\n    }\n\n    return $target;\n  },\n  _end: function (e) {\n    var eventData = (0, _index.eventData)(e);\n\n    this._fireEvent(DRAG_END_EVENT, e, {\n      offset: this._calculateOffset(eventData)\n    });\n\n    this._fireDropTargetEvent(e, DROP_EVENT);\n\n    delete this._currentDropTarget;\n  }\n});\n\n(0, _emitter_registrator.default)({\n  emitter: DragEmitter,\n  events: [DRAG_START_EVENT, DRAG_EVENT, DRAG_END_EVENT]\n});","map":{"version":3,"sources":["E:/Monday.com/quickstart-react/node_modules/devextreme/events/drag.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","drop","leave","enter","end","start","move","_renderer","_interopRequireDefault","require","_element_data","_array","iteratorUtils","_interopRequireWildcard","_dom","_event_registrator","_index","_emitter","_emitter_registrator","_getRequireWildcardCache","WeakMap","cache","__esModule","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","default","DRAG_START_EVENT","DRAG_EVENT","DRAG_END_EVENT","DRAG_ENTER_EVENT","DRAG_LEAVE_EVENT","DROP_EVENT","DX_DRAG_EVENTS_COUNT_KEY","knownDropTargets","knownDropTargetSelectors","knownDropTargetConfigs","dropTargetRegistration","setup","element","data","knownDropTarget","inArray","push","add","handleObj","index","updateEventsCounter","type","selector","event","value","indexOf","eventsCount","Math","max","remove","teardown","handlersCount","splice","removeData","getItemDelegatedTargets","$element","dropTargetIndex","dropTargetSelectors","filter","$delegatedTargets","find","join","getItemConfig","getItemPosition","dropTargetConfig","itemPositionFunc","offset","getItemSize","itemSizeFunc","width","getBoundingClientRect","height","DragEmitter","inherit","ctor","callBase","direction","_init","e","_initEvent","_start","_fireEvent","_maxLeftOffset","maxLeftOffset","_maxRightOffset","maxRightOffset","_maxTopOffset","maxTopOffset","_maxBottomOffset","maxBottomOffset","dropTargets","wrapToArray","targetElements","_dropTargets","map","_move","eventData","dragOffset","_calculateOffset","_processDropTargets","_cancelPreventDefault","preventDefault","x","_calculateXOffset","y","_calculateYOffset","_startEventData","_fitOffset","minOffset","maxOffset","min","target","_findDropTarget","sameTarget","_currentDropTarget","_fireDropTargetEvent","eventName","originalEvent","draggingElement","_$element","fireEvent","that","result","each","_","_checkDropTargetActive","$target","delegatedTarget","$delegatedTarget","_checkDropTarget","active","activeTarget","contains","config","$prevTarget","isDraggingElement","targetPosition","pageX","left","pageY","top","targetSize","length","closest","checkDropTarget","_end","emitter","events"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (events/drag.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.drop = exports.leave = exports.enter = exports.end = exports.start = exports.move = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\r\nvar _element_data = require(\"../core/element_data\");\r\nvar _array = require(\"../core/utils/array\");\r\nvar iteratorUtils = _interopRequireWildcard(require(\"../core/utils/iterator\"));\r\nvar _dom = require(\"../core/utils/dom\");\r\nvar _event_registrator = _interopRequireDefault(require(\"./core/event_registrator\"));\r\nvar _index = require(\"./utils/index\");\r\nvar _emitter = _interopRequireDefault(require(\"./gesture/emitter.gesture\"));\r\nvar _emitter_registrator = _interopRequireDefault(require(\"./core/emitter_registrator\"));\r\n\r\nfunction _getRequireWildcardCache() {\r\n    if (\"function\" !== typeof WeakMap) {\r\n        return null\r\n    }\r\n    var cache = new WeakMap;\r\n    _getRequireWildcardCache = function() {\r\n        return cache\r\n    };\r\n    return cache\r\n}\r\n\r\nfunction _interopRequireWildcard(obj) {\r\n    if (obj && obj.__esModule) {\r\n        return obj\r\n    }\r\n    if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\r\n        return {\r\n            \"default\": obj\r\n        }\r\n    }\r\n    var cache = _getRequireWildcardCache();\r\n    if (cache && cache.has(obj)) {\r\n        return cache.get(obj)\r\n    }\r\n    var newObj = {};\r\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\r\n    for (var key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\r\n            if (desc && (desc.get || desc.set)) {\r\n                Object.defineProperty(newObj, key, desc)\r\n            } else {\r\n                newObj[key] = obj[key]\r\n            }\r\n        }\r\n    }\r\n    newObj.default = obj;\r\n    if (cache) {\r\n        cache.set(obj, newObj)\r\n    }\r\n    return newObj\r\n}\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DRAG_START_EVENT = \"dxdragstart\";\r\nexports.start = DRAG_START_EVENT;\r\nvar DRAG_EVENT = \"dxdrag\";\r\nexports.move = DRAG_EVENT;\r\nvar DRAG_END_EVENT = \"dxdragend\";\r\nexports.end = DRAG_END_EVENT;\r\nvar DRAG_ENTER_EVENT = \"dxdragenter\";\r\nexports.enter = DRAG_ENTER_EVENT;\r\nvar DRAG_LEAVE_EVENT = \"dxdragleave\";\r\nexports.leave = DRAG_LEAVE_EVENT;\r\nvar DROP_EVENT = \"dxdrop\";\r\nexports.drop = DROP_EVENT;\r\nvar DX_DRAG_EVENTS_COUNT_KEY = \"dxDragEventsCount\";\r\nvar knownDropTargets = [];\r\nvar knownDropTargetSelectors = [];\r\nvar knownDropTargetConfigs = [];\r\nvar dropTargetRegistration = {\r\n    setup: function(element, data) {\r\n        var knownDropTarget = (0, _array.inArray)(element, knownDropTargets) !== -1;\r\n        if (!knownDropTarget) {\r\n            knownDropTargets.push(element);\r\n            knownDropTargetSelectors.push([]);\r\n            knownDropTargetConfigs.push(data || {})\r\n        }\r\n    },\r\n    add: function(element, handleObj) {\r\n        var index = (0, _array.inArray)(element, knownDropTargets);\r\n        this.updateEventsCounter(element, handleObj.type, 1);\r\n        var selector = handleObj.selector;\r\n        if ((0, _array.inArray)(selector, knownDropTargetSelectors[index]) === -1) {\r\n            knownDropTargetSelectors[index].push(selector)\r\n        }\r\n    },\r\n    updateEventsCounter: function(element, event, value) {\r\n        if ([DRAG_ENTER_EVENT, DRAG_LEAVE_EVENT, DROP_EVENT].indexOf(event) > -1) {\r\n            var eventsCount = (0, _element_data.data)(element, DX_DRAG_EVENTS_COUNT_KEY) || 0;\r\n            (0, _element_data.data)(element, DX_DRAG_EVENTS_COUNT_KEY, Math.max(0, eventsCount + value))\r\n        }\r\n    },\r\n    remove: function(element, handleObj) {\r\n        this.updateEventsCounter(element, handleObj.type, -1)\r\n    },\r\n    teardown: function(element) {\r\n        var handlersCount = (0, _element_data.data)(element, DX_DRAG_EVENTS_COUNT_KEY);\r\n        if (!handlersCount) {\r\n            var index = (0, _array.inArray)(element, knownDropTargets);\r\n            knownDropTargets.splice(index, 1);\r\n            knownDropTargetSelectors.splice(index, 1);\r\n            knownDropTargetConfigs.splice(index, 1);\r\n            (0, _element_data.removeData)(element, DX_DRAG_EVENTS_COUNT_KEY)\r\n        }\r\n    }\r\n};\r\n(0, _event_registrator.default)(DRAG_ENTER_EVENT, dropTargetRegistration);\r\n(0, _event_registrator.default)(DRAG_LEAVE_EVENT, dropTargetRegistration);\r\n(0, _event_registrator.default)(DROP_EVENT, dropTargetRegistration);\r\nvar getItemDelegatedTargets = function($element) {\r\n    var dropTargetIndex = (0, _array.inArray)($element.get(0), knownDropTargets);\r\n    var dropTargetSelectors = knownDropTargetSelectors[dropTargetIndex].filter(function(selector) {\r\n        return selector\r\n    });\r\n    var $delegatedTargets = $element.find(dropTargetSelectors.join(\", \"));\r\n    if ((0, _array.inArray)(void 0, knownDropTargetSelectors[dropTargetIndex]) !== -1) {\r\n        $delegatedTargets = $delegatedTargets.add($element)\r\n    }\r\n    return $delegatedTargets\r\n};\r\nvar getItemConfig = function($element) {\r\n    var dropTargetIndex = (0, _array.inArray)($element.get(0), knownDropTargets);\r\n    return knownDropTargetConfigs[dropTargetIndex]\r\n};\r\nvar getItemPosition = function(dropTargetConfig, $element) {\r\n    if (dropTargetConfig.itemPositionFunc) {\r\n        return dropTargetConfig.itemPositionFunc($element)\r\n    } else {\r\n        return $element.offset()\r\n    }\r\n};\r\nvar getItemSize = function(dropTargetConfig, $element) {\r\n    if (dropTargetConfig.itemSizeFunc) {\r\n        return dropTargetConfig.itemSizeFunc($element)\r\n    }\r\n    return {\r\n        width: $element.get(0).getBoundingClientRect().width,\r\n        height: $element.get(0).getBoundingClientRect().height\r\n    }\r\n};\r\nvar DragEmitter = _emitter.default.inherit({\r\n    ctor: function(element) {\r\n        this.callBase(element);\r\n        this.direction = \"both\"\r\n    },\r\n    _init: function(e) {\r\n        this._initEvent = e\r\n    },\r\n    _start: function(e) {\r\n        e = this._fireEvent(DRAG_START_EVENT, this._initEvent);\r\n        this._maxLeftOffset = e.maxLeftOffset;\r\n        this._maxRightOffset = e.maxRightOffset;\r\n        this._maxTopOffset = e.maxTopOffset;\r\n        this._maxBottomOffset = e.maxBottomOffset;\r\n        var dropTargets = (0, _array.wrapToArray)(e.targetElements || (null === e.targetElements ? [] : knownDropTargets));\r\n        this._dropTargets = iteratorUtils.map(dropTargets, function(element) {\r\n            return (0, _renderer.default)(element).get(0)\r\n        })\r\n    },\r\n    _move: function(e) {\r\n        var eventData = (0, _index.eventData)(e);\r\n        var dragOffset = this._calculateOffset(eventData);\r\n        e = this._fireEvent(DRAG_EVENT, e, {\r\n            offset: dragOffset\r\n        });\r\n        this._processDropTargets(e);\r\n        if (!e._cancelPreventDefault) {\r\n            e.preventDefault()\r\n        }\r\n    },\r\n    _calculateOffset: function(eventData) {\r\n        return {\r\n            x: this._calculateXOffset(eventData),\r\n            y: this._calculateYOffset(eventData)\r\n        }\r\n    },\r\n    _calculateXOffset: function(eventData) {\r\n        if (\"vertical\" !== this.direction) {\r\n            var offset = eventData.x - this._startEventData.x;\r\n            return this._fitOffset(offset, this._maxLeftOffset, this._maxRightOffset)\r\n        }\r\n        return 0\r\n    },\r\n    _calculateYOffset: function(eventData) {\r\n        if (\"horizontal\" !== this.direction) {\r\n            var offset = eventData.y - this._startEventData.y;\r\n            return this._fitOffset(offset, this._maxTopOffset, this._maxBottomOffset)\r\n        }\r\n        return 0\r\n    },\r\n    _fitOffset: function(offset, minOffset, maxOffset) {\r\n        if (null != minOffset) {\r\n            offset = Math.max(offset, -minOffset)\r\n        }\r\n        if (null != maxOffset) {\r\n            offset = Math.min(offset, maxOffset)\r\n        }\r\n        return offset\r\n    },\r\n    _processDropTargets: function(e) {\r\n        var target = this._findDropTarget(e);\r\n        var sameTarget = target === this._currentDropTarget;\r\n        if (!sameTarget) {\r\n            this._fireDropTargetEvent(e, DRAG_LEAVE_EVENT);\r\n            this._currentDropTarget = target;\r\n            this._fireDropTargetEvent(e, DRAG_ENTER_EVENT)\r\n        }\r\n    },\r\n    _fireDropTargetEvent: function(event, eventName) {\r\n        if (!this._currentDropTarget) {\r\n            return\r\n        }\r\n        var eventData = {\r\n            type: eventName,\r\n            originalEvent: event,\r\n            draggingElement: this._$element.get(0),\r\n            target: this._currentDropTarget\r\n        };\r\n        (0, _index.fireEvent)(eventData)\r\n    },\r\n    _findDropTarget: function(e) {\r\n        var that = this;\r\n        var result;\r\n        iteratorUtils.each(knownDropTargets, function(_, target) {\r\n            if (!that._checkDropTargetActive(target)) {\r\n                return\r\n            }\r\n            var $target = (0, _renderer.default)(target);\r\n            iteratorUtils.each(getItemDelegatedTargets($target), function(_, delegatedTarget) {\r\n                var $delegatedTarget = (0, _renderer.default)(delegatedTarget);\r\n                if (that._checkDropTarget(getItemConfig($target), $delegatedTarget, (0, _renderer.default)(result), e)) {\r\n                    result = delegatedTarget\r\n                }\r\n            })\r\n        });\r\n        return result\r\n    },\r\n    _checkDropTargetActive: function(target) {\r\n        var active = false;\r\n        iteratorUtils.each(this._dropTargets, function(_, activeTarget) {\r\n            active = active || activeTarget === target || (0, _dom.contains)(activeTarget, target);\r\n            return !active\r\n        });\r\n        return active\r\n    },\r\n    _checkDropTarget: function(config, $target, $prevTarget, e) {\r\n        var isDraggingElement = $target.get(0) === (0, _renderer.default)(e.target).get(0);\r\n        if (isDraggingElement) {\r\n            return false\r\n        }\r\n        var targetPosition = getItemPosition(config, $target);\r\n        if (e.pageX < targetPosition.left) {\r\n            return false\r\n        }\r\n        if (e.pageY < targetPosition.top) {\r\n            return false\r\n        }\r\n        var targetSize = getItemSize(config, $target);\r\n        if (e.pageX > targetPosition.left + targetSize.width) {\r\n            return false\r\n        }\r\n        if (e.pageY > targetPosition.top + targetSize.height) {\r\n            return false\r\n        }\r\n        if ($prevTarget.length && $prevTarget.closest($target).length) {\r\n            return false\r\n        }\r\n        if (config.checkDropTarget && !config.checkDropTarget($target, e)) {\r\n            return false\r\n        }\r\n        return $target\r\n    },\r\n    _end: function(e) {\r\n        var eventData = (0, _index.eventData)(e);\r\n        this._fireEvent(DRAG_END_EVENT, e, {\r\n            offset: this._calculateOffset(eventData)\r\n        });\r\n        this._fireDropTargetEvent(e, DROP_EVENT);\r\n        delete this._currentDropTarget\r\n    }\r\n});\r\n(0, _emitter_registrator.default)({\r\n    emitter: DragEmitter,\r\n    events: [DRAG_START_EVENT, DRAG_EVENT, DRAG_END_EVENT]\r\n});\r\n"]},"metadata":{},"sourceType":"script"}