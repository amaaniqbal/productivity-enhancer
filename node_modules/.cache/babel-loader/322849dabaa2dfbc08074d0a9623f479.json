{"ast":null,"code":"/**\r\n * DevExtreme (viz/core/annotations.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.plugins = exports.createAnnotations = void 0;\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _tooltip = require(\"../core/tooltip\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _utils = require(\"./utils\");\n\nvar _plaque = require(\"./plaque\");\n\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\n\nvar _drag = require(\"../../events/drag\");\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar getDocument = _dom_adapter.default.getDocument;\nvar EVENT_NS = \"annotations\";\nvar DOT_EVENT_NS = \".\" + EVENT_NS;\nvar POINTER_ACTION = (0, _index.addNamespace)([_pointer.default.down, _pointer.default.move], EVENT_NS);\nvar POINTER_UP_EVENT_NAME = (0, _index.addNamespace)(_pointer.default.up, EVENT_NS);\nvar DRAG_START_EVENT_NAME = _drag.start + DOT_EVENT_NS;\nvar DRAG_EVENT_NAME = _drag.move + DOT_EVENT_NS;\nvar DRAG_END_EVENT_NAME = _drag.end + DOT_EVENT_NS;\n\nfunction coreAnnotation(options, contentTemplate) {\n  return {\n    draw: function draw(widget, group) {\n      var _this = this;\n\n      var annotationGroup = widget._renderer.g().append(group).css((0, _utils.patchFontOptions)(options.font));\n\n      if (this.plaque) {\n        this.plaque.clear();\n      }\n\n      this.plaque = new _plaque.Plaque((0, _extend.extend)(true, {}, options, {\n        cornerRadius: (options.border || {}).cornerRadius\n      }), widget, annotationGroup, contentTemplate, widget._isAnnotationBounded(options));\n      this.plaque.draw(widget._getAnnotationCoords(this));\n\n      if (options.allowDragging) {\n        annotationGroup.on(DRAG_START_EVENT_NAME, {\n          immediate: true\n        }, function (e) {\n          _this._dragOffsetX = _this.plaque.x - e.pageX;\n          _this._dragOffsetY = _this.plaque.y - e.pageY;\n        }).on(DRAG_EVENT_NAME, function (e) {\n          _this.plaque.move(e.pageX + _this._dragOffsetX, e.pageY + _this._dragOffsetY);\n        }).on(DRAG_END_EVENT_NAME, function (e) {\n          _this.offsetX = (_this.offsetX || 0) + e.offset.x;\n          _this.offsetY = (_this.offsetY || 0) + e.offset.y;\n        });\n      }\n    },\n    hitTest: function hitTest(x, y) {\n      return this.plaque.hitTest(x, y);\n    },\n    showTooltip: function showTooltip(tooltip, _ref) {\n      var x = _ref.x,\n          y = _ref.y;\n\n      if (tooltip.annotation !== this) {\n        tooltip.setTemplate(this.options.tooltipTemplate);\n\n        if (tooltip.show(this.options, {\n          x: x,\n          y: y\n        }, {\n          target: this.options\n        }, this.options.customizeTooltip)) {\n          tooltip.annotation = this;\n        }\n      } else {\n        tooltip.move(x, y);\n      }\n    }\n  };\n}\n\nfunction getTemplateFunction(options, widget) {\n  var template;\n\n  if (\"text\" === options.type) {\n    template = function template(item, groupElement) {\n      var text = widget._renderer.text(item.text).attr({\n        \"class\": item.cssClass\n      }).append({\n        element: groupElement\n      });\n\n      if (item.width > 0 || item.height > 0) {\n        text.setMaxSize(item.width, item.height, {\n          wordWrap: item.wordWrap,\n          textOverflow: item.textOverflow\n        });\n      }\n    };\n  } else {\n    if (\"image\" === options.type) {\n      template = function template(item, groupElement) {\n        var _ref2 = item.image || {},\n            width = _ref2.width,\n            height = _ref2.height,\n            url = _ref2.url,\n            location = _ref2.location;\n\n        var outerWidth = item.width,\n            outerHeight = item.height;\n        var imageWidth = outerWidth > 0 ? Math.min(width, outerWidth) : width;\n        var imageHeight = outerHeight > 0 ? Math.min(height, outerHeight) : height;\n\n        widget._renderer.image(0, 0, imageWidth, imageHeight, url, location || \"center\").append({\n          element: groupElement\n        });\n      };\n    } else {\n      if (\"custom\" === options.type) {\n        template = options.template;\n      }\n    }\n  }\n\n  return template;\n}\n\nfunction getImageObject(image) {\n  return \"string\" === typeof image ? {\n    url: image\n  } : image;\n}\n\nvar createAnnotations = function createAnnotations(widget, items) {\n  var commonAnnotationSettings = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n  var customizeAnnotation = arguments.length > 3 ? arguments[3] : void 0;\n  var pullOptions = arguments.length > 4 ? arguments[4] : void 0;\n  var commonImageOptions = getImageObject(commonAnnotationSettings.image);\n  return items.reduce(function (arr, item) {\n    var currentImageOptions = getImageObject(item.image);\n    var customizedItem = (0, _type.isFunction)(customizeAnnotation) ? customizeAnnotation(item) : {};\n\n    if (customizedItem) {\n      customizedItem.image = getImageObject(customizedItem.image);\n    }\n\n    var options = (0, _extend.extend)(true, {}, commonAnnotationSettings, item, {\n      image: commonImageOptions\n    }, {\n      image: currentImageOptions\n    }, customizedItem);\n    var templateFunction = getTemplateFunction(options, widget);\n    var annotation = templateFunction && (0, _extend.extend)(true, pullOptions(options), coreAnnotation(options, widget._getTemplate(templateFunction)));\n    annotation && arr.push(annotation);\n    return arr;\n  }, []);\n};\n\nexports.createAnnotations = createAnnotations;\nvar chartPlugin = {\n  name: \"annotations_chart\",\n  init: function init() {},\n  dispose: function dispose() {},\n  members: {\n    _getAnnotationCoords: function _getAnnotationCoords(annotation) {\n      var _axis, _axis2;\n\n      var coords = {\n        offsetX: annotation.offsetX,\n        offsetY: annotation.offsetY\n      };\n      var argCoordName = this._options.silent(\"rotated\") ? \"y\" : \"x\";\n      var valCoordName = this._options.silent(\"rotated\") ? \"x\" : \"y\";\n      var argAxis = this.getArgumentAxis();\n      var argument = argAxis.validateUnit(annotation.argument);\n      var axis = this.getValueAxis(annotation.axis);\n      var series;\n      var pane = null === (_axis = axis) || void 0 === _axis ? void 0 : _axis.pane;\n\n      if (annotation.series) {\n        var _series;\n\n        series = this.series.filter(function (s) {\n          return s.name === annotation.series;\n        })[0];\n        axis = null === (_series = series) || void 0 === _series ? void 0 : _series.getValueAxis();\n        (0, _type.isDefined)(axis) && (pane = axis.pane);\n      }\n\n      if ((0, _type.isDefined)(argument)) {\n        if (series) {\n          var center = series.getPointCenterByArg(argument);\n          center && (coords[argCoordName] = center[argCoordName]);\n        } else {\n          coords[argCoordName] = argAxis.getTranslator().translate(argument);\n        }\n\n        !(0, _type.isDefined)(pane) && (pane = argAxis.pane);\n      }\n\n      var value = null === (_axis2 = axis) || void 0 === _axis2 ? void 0 : _axis2.validateUnit(annotation.value);\n\n      if ((0, _type.isDefined)(value)) {\n        var _axis3;\n\n        coords[valCoordName] = null === (_axis3 = axis) || void 0 === _axis3 ? void 0 : _axis3.getTranslator().translate(value);\n        !(0, _type.isDefined)(pane) && (0, _type.isDefined)(axis) && (pane = axis.pane);\n      }\n\n      coords.canvas = this._getCanvasForPane(pane);\n\n      if ((0, _type.isDefined)(coords[argCoordName]) && !(0, _type.isDefined)(value)) {\n        var _series2;\n\n        if (!(0, _type.isDefined)(axis) && !(0, _type.isDefined)(series)) {\n          coords[valCoordName] = argAxis.getAxisPosition();\n        } else {\n          if ((0, _type.isDefined)(axis) && !(0, _type.isDefined)(series)) {\n            coords[valCoordName] = this._argumentAxes.filter(function (a) {\n              return a.pane === axis.pane;\n            })[0].getAxisPosition();\n          } else {\n            if (null === (_series2 = series) || void 0 === _series2 ? void 0 : _series2.checkSeriesViewportCoord(argAxis, coords[argCoordName])) {\n              coords[valCoordName] = series.getSeriesPairCoord(coords[argCoordName], true);\n            }\n          }\n        }\n      }\n\n      if (!(0, _type.isDefined)(argument) && (0, _type.isDefined)(coords[valCoordName])) {\n        if ((0, _type.isDefined)(axis) && !(0, _type.isDefined)(series)) {\n          coords[argCoordName] = axis.getAxisPosition();\n        } else {\n          if ((0, _type.isDefined)(series)) {\n            if (series.checkSeriesViewportCoord(axis, coords[valCoordName])) {\n              coords[argCoordName] = series.getSeriesPairCoord(coords[valCoordName], false);\n            }\n          }\n        }\n      }\n\n      return coords;\n    },\n    _annotationsPointerEventHandler: function _annotationsPointerEventHandler(event) {\n      var originalEvent = event.originalEvent || {};\n      var touch = originalEvent.touches && originalEvent.touches[0] || {};\n\n      var rootOffset = this._renderer.getRootOffset();\n\n      var coords = {\n        x: touch.pageX || originalEvent.pageX || event.pageX,\n        y: touch.pageY || originalEvent.pageY || event.pageY\n      };\n\n      var annotation = this._annotations.items.filter(function (a) {\n        return a.hitTest(coords.x - rootOffset.left, coords.y - rootOffset.top);\n      })[0];\n\n      if (!annotation || !annotation.options.tooltipEnabled) {\n        this._annotations.hideTooltip();\n\n        return;\n      }\n\n      this._clear();\n\n      if (annotation.options.allowDragging && event.type === _pointer.default.down) {\n        this._annotations._hideToolTipForDrag = true;\n      }\n\n      if (!this._annotations._hideToolTipForDrag) {\n        annotation.showTooltip(this._annotations.tooltip, coords);\n        event.stopPropagation();\n      }\n    },\n    _isAnnotationBounded: function _isAnnotationBounded(options) {\n      return (0, _type.isDefined)(options.value) || (0, _type.isDefined)(options.argument);\n    },\n    _pullOptions: function _pullOptions(options) {\n      return {\n        type: options.type,\n        name: options.name,\n        x: options.x,\n        y: options.y,\n        value: options.value,\n        argument: options.argument,\n        axis: options.axis,\n        series: options.series,\n        options: options,\n        offsetX: options.offsetX,\n        offsetY: options.offsetY\n      };\n    },\n    _forceAnnotationRender: function _forceAnnotationRender() {\n      this._change([\"FORCE_RENDER\"]);\n    },\n    _clear: function _clear() {\n      this.hideTooltip();\n      this.clearHover();\n    }\n  }\n};\nvar polarChartPlugin = {\n  name: \"annotations_polar_chart\",\n  init: function init() {},\n  dispose: function dispose() {},\n  members: {\n    _getAnnotationCoords: function _getAnnotationCoords(annotation) {\n      var coords = {\n        offsetX: annotation.offsetX,\n        offsetY: annotation.offsetY,\n        canvas: this._calcCanvas()\n      };\n      var argAxis = this.getArgumentAxis();\n      var argument = argAxis.validateUnit(annotation.argument);\n      var value = this.getValueAxis().validateUnit(annotation.value);\n      var radius = annotation.radius;\n      var angle = annotation.angle;\n      var pointCoords;\n      var series;\n\n      if (annotation.series) {\n        series = this.series.filter(function (s) {\n          return s.name === annotation.series;\n        })[0];\n      }\n\n      (0, _extend.extend)(true, coords, this.getXYFromPolar(angle, radius, argument, value));\n\n      if ((0, _type.isDefined)(series)) {\n        if ((0, _type.isDefined)(coords.angle) && !(0, _type.isDefined)(value) && !(0, _type.isDefined)(radius)) {\n          if (!(0, _type.isDefined)(argument)) {\n            argument = argAxis.getTranslator().from(isFinite(angle) ? this.getActualAngle(angle) : coords.angle);\n          }\n\n          pointCoords = series.getSeriesPairCoord({\n            argument: argument,\n            angle: -coords.angle\n          }, true);\n        } else {\n          if ((0, _type.isDefined)(coords.radius) && !(0, _type.isDefined)(argument) && !(0, _type.isDefined)(angle)) {\n            pointCoords = series.getSeriesPairCoord({\n              radius: coords.radius\n            }, false);\n          }\n        }\n\n        if ((0, _type.isDefined)(pointCoords)) {\n          coords.x = pointCoords.x;\n          coords.y = pointCoords.y;\n        }\n      }\n\n      if (annotation.series && !(0, _type.isDefined)(pointCoords)) {\n        coords.x = coords.y = void 0;\n      }\n\n      return coords;\n    },\n    _annotationsPointerEventHandler: chartPlugin.members._annotationsPointerEventHandler,\n    _isAnnotationBounded: chartPlugin.members._isAnnotationBounded,\n    _pullOptions: function _pullOptions(options) {\n      var polarOptions = (0, _extend.extend)({}, {\n        radius: options.radius,\n        angle: options.angle\n      }, chartPlugin.members._pullOptions(options));\n      delete polarOptions.axis;\n      return polarOptions;\n    },\n    _forceAnnotationRender: chartPlugin.members._forceAnnotationRender,\n    _clear: chartPlugin.members._clear\n  }\n};\nvar vectorMapPlugin = {\n  name: \"annotations_vector_map\",\n  init: function init() {},\n  dispose: function dispose() {\n    this._annotations._offTracker();\n\n    this._annotations._offTracker = null;\n  },\n  members: {\n    _getAnnotationCoords: function _getAnnotationCoords(annotation) {\n      var coords = {\n        offsetX: annotation.offsetX,\n        offsetY: annotation.offsetY\n      };\n      coords.canvas = this._projection.getCanvas();\n\n      if (annotation.coordinates) {\n        var data = this._projection.toScreenPoint(annotation.coordinates);\n\n        coords.x = data[0];\n        coords.y = data[1];\n      }\n\n      return coords;\n    },\n    _annotationsPointerEventHandler: chartPlugin.members._annotationsPointerEventHandler,\n    _isAnnotationBounded: function _isAnnotationBounded(options) {\n      return (0, _type.isDefined)(options.coordinates);\n    },\n    _pullOptions: function _pullOptions(options) {\n      var vectorMapOptions = (0, _extend.extend)({}, {\n        coordinates: options.coordinates\n      }, chartPlugin.members._pullOptions(options));\n      delete vectorMapOptions.axis;\n      delete vectorMapOptions.series;\n      delete vectorMapOptions.argument;\n      delete vectorMapOptions.value;\n      return vectorMapOptions;\n    },\n    _forceAnnotationRender: function _forceAnnotationRender() {\n      this._change([\"EXTRA_ELEMENTS\"]);\n    },\n    _getAnnotationStyles: function _getAnnotationStyles() {\n      return {\n        \"text-anchor\": \"start\"\n      };\n    },\n    _clear: function _clear() {}\n  },\n  extenders: {\n    _prepareExtraElements: function _prepareExtraElements() {\n      var that = this;\n\n      var renderElements = function renderElements() {\n        that._renderExtraElements();\n      };\n\n      that._annotations._offTracker = that._tracker.on({\n        move: renderElements,\n        zoom: renderElements,\n        end: renderElements\n      });\n    }\n  }\n};\nvar pieChartPlugin = {\n  name: \"annotations_pie_chart\",\n  init: function init() {},\n  dispose: function dispose() {},\n  members: {\n    _getAnnotationCoords: function _getAnnotationCoords(annotation) {\n      var series;\n      var coords = {\n        offsetX: annotation.offsetX,\n        offsetY: annotation.offsetY,\n        canvas: this._canvas\n      };\n\n      if (annotation.argument) {\n        if (annotation.series) {\n          series = this.getSeriesByName(annotation.series);\n        } else {\n          series = this.series[0];\n        }\n\n        var argument = series.getPointsByArg(annotation.argument)[0];\n\n        var _argument$getAnnotati = argument.getAnnotationCoords(annotation.location),\n            x = _argument$getAnnotati.x,\n            y = _argument$getAnnotati.y;\n\n        coords.x = x;\n        coords.y = y;\n      }\n\n      return coords;\n    },\n    _isAnnotationBounded: function _isAnnotationBounded(options) {\n      return options.argument;\n    },\n    _annotationsPointerEventHandler: chartPlugin.members._annotationsPointerEventHandler,\n    _pullOptions: function _pullOptions(options) {\n      var pieChartOptions = (0, _extend.extend)({}, {\n        location: options.location\n      }, chartPlugin.members._pullOptions(options));\n      delete pieChartOptions.axis;\n      return pieChartOptions;\n    },\n    _clear: chartPlugin.members._clear,\n    _forceAnnotationRender: chartPlugin.members._forceAnnotationRender\n  }\n};\nvar corePlugin = {\n  name: \"annotations_core\",\n  init: function init() {\n    this._annotations = {\n      items: [],\n      _hideToolTipForDrag: false,\n      tooltip: new _tooltip.Tooltip({\n        cssClass: \"\".concat(this._rootClassPrefix, \"-annotation-tooltip\"),\n        eventTrigger: this._eventTrigger,\n        widgetRoot: this.element(),\n        widget: this\n      }),\n      hideTooltip: function hideTooltip() {\n        this.tooltip.annotation = null;\n        this.tooltip.hide();\n      },\n      clearItems: function clearItems() {\n        this.items.forEach(function (i) {\n          return i.plaque.clear();\n        });\n        this.items = [];\n      }\n    };\n\n    this._annotations.tooltip.setRendererOptions(this._getRendererOptions());\n  },\n  dispose: function dispose() {\n    this._annotationsGroup.linkRemove().linkOff();\n\n    _events_engine.default.off(getDocument(), DOT_EVENT_NS);\n\n    this._annotationsGroup.off(DOT_EVENT_NS);\n\n    this._annotations.tooltip && this._annotations.tooltip.dispose();\n  },\n  extenders: {\n    _createHtmlStructure: function _createHtmlStructure() {\n      var _this2 = this;\n\n      this._annotationsGroup = this._renderer.g().attr({\n        \"class\": \"\".concat(this._rootClassPrefix, \"-annotations\")\n      }).css(this._getAnnotationStyles()).linkOn(this._renderer.root, \"annotations\").linkAppend();\n\n      _events_engine.default.on(getDocument(), POINTER_ACTION, function () {\n        return _this2._annotations.hideTooltip();\n      });\n\n      _events_engine.default.on(getDocument(), POINTER_UP_EVENT_NAME, function (event) {\n        _this2._annotations._hideToolTipForDrag = false;\n\n        _this2._annotationsPointerEventHandler(event);\n      });\n\n      this._annotationsGroup.on(POINTER_ACTION, this._annotationsPointerEventHandler.bind(this));\n    },\n    _renderExtraElements: function _renderExtraElements() {\n      var _this3 = this;\n\n      this._annotationsGroup.clear();\n\n      this._annotations.items.forEach(function (item) {\n        return item.draw(_this3, _this3._annotationsGroup);\n      });\n    },\n    _stopCurrentHandling: function _stopCurrentHandling() {\n      this._annotations.hideTooltip();\n    }\n  },\n  members: {\n    _buildAnnotations: function _buildAnnotations() {\n      this._annotations.clearItems();\n\n      var items = this._getOption(\"annotations\", true);\n\n      if (!(null === items || void 0 === items ? void 0 : items.length)) {\n        return;\n      }\n\n      this._annotations.items = createAnnotations(this, items, this._getOption(\"commonAnnotationSettings\"), this._getOption(\"customizeAnnotation\", true), this._pullOptions);\n    },\n    _setAnnotationTooltipOptions: function _setAnnotationTooltipOptions() {\n      var tooltipOptions = (0, _extend.extend)({}, this._getOption(\"tooltip\"));\n      tooltipOptions.contentTemplate = tooltipOptions.customizeTooltip = void 0;\n\n      this._annotations.tooltip.update(tooltipOptions);\n    },\n    _getAnnotationCoords: function _getAnnotationCoords() {\n      return {};\n    },\n    _pullOptions: function _pullOptions() {\n      return {};\n    },\n    _getAnnotationStyles: function _getAnnotationStyles() {\n      return {};\n    }\n  },\n  customize: function customize(constructor) {\n    constructor.addChange({\n      code: \"ANNOTATIONITEMS\",\n      handler: function handler() {\n        this._requestChange([\"ANNOTATIONS\"]);\n      },\n      isOptionChange: true,\n      option: \"annotations\"\n    });\n    constructor.addChange({\n      code: \"ANNOTATIONSSETTINGS\",\n      handler: function handler() {\n        this._requestChange([\"ANNOTATIONS\"]);\n      },\n      isOptionChange: true,\n      option: \"commonAnnotationSettings\"\n    });\n    constructor.addChange({\n      code: \"ANNOTATIONS\",\n      handler: function handler() {\n        this._buildAnnotations();\n\n        this._setAnnotationTooltipOptions();\n\n        this._forceAnnotationRender();\n      },\n      isThemeDependent: true,\n      isOptionChange: true\n    });\n  },\n  fontFields: [\"commonAnnotationSettings.font\"]\n};\nvar plugins = {\n  core: corePlugin,\n  chart: chartPlugin,\n  polarChart: polarChartPlugin,\n  vectorMap: vectorMapPlugin,\n  pieChart: pieChartPlugin\n};\nexports.plugins = plugins;","map":{"version":3,"sources":["E:/Monday.com/quickstart-react/node_modules/devextreme/viz/core/annotations.js"],"names":["exports","plugins","createAnnotations","_dom_adapter","_interopRequireDefault","require","_type","_tooltip","_extend","_utils","_plaque","_pointer","_drag","_index","_events_engine","obj","__esModule","getDocument","default","EVENT_NS","DOT_EVENT_NS","POINTER_ACTION","addNamespace","down","move","POINTER_UP_EVENT_NAME","up","DRAG_START_EVENT_NAME","start","DRAG_EVENT_NAME","DRAG_END_EVENT_NAME","end","coreAnnotation","options","contentTemplate","draw","widget","group","_this","annotationGroup","_renderer","g","append","css","patchFontOptions","font","plaque","clear","Plaque","extend","cornerRadius","border","_isAnnotationBounded","_getAnnotationCoords","allowDragging","on","immediate","e","_dragOffsetX","x","pageX","_dragOffsetY","y","pageY","offsetX","offset","offsetY","hitTest","showTooltip","tooltip","_ref","annotation","setTemplate","tooltipTemplate","show","target","customizeTooltip","getTemplateFunction","template","type","item","groupElement","text","attr","cssClass","element","width","height","setMaxSize","wordWrap","textOverflow","_ref2","image","url","location","outerWidth","outerHeight","imageWidth","Math","min","imageHeight","getImageObject","items","commonAnnotationSettings","arguments","length","customizeAnnotation","pullOptions","commonImageOptions","reduce","arr","currentImageOptions","customizedItem","isFunction","templateFunction","_getTemplate","push","chartPlugin","name","init","dispose","members","_axis","_axis2","coords","argCoordName","_options","silent","valCoordName","argAxis","getArgumentAxis","argument","validateUnit","axis","getValueAxis","series","pane","_series","filter","s","isDefined","center","getPointCenterByArg","getTranslator","translate","value","_axis3","canvas","_getCanvasForPane","_series2","getAxisPosition","_argumentAxes","a","checkSeriesViewportCoord","getSeriesPairCoord","_annotationsPointerEventHandler","event","originalEvent","touch","touches","rootOffset","getRootOffset","_annotations","left","top","tooltipEnabled","hideTooltip","_clear","_hideToolTipForDrag","stopPropagation","_pullOptions","_forceAnnotationRender","_change","clearHover","polarChartPlugin","_calcCanvas","radius","angle","pointCoords","getXYFromPolar","from","isFinite","getActualAngle","polarOptions","vectorMapPlugin","_offTracker","_projection","getCanvas","coordinates","data","toScreenPoint","vectorMapOptions","_getAnnotationStyles","extenders","_prepareExtraElements","that","renderElements","_renderExtraElements","_tracker","zoom","pieChartPlugin","_canvas","getSeriesByName","getPointsByArg","_argument$getAnnotati","getAnnotationCoords","pieChartOptions","corePlugin","Tooltip","concat","_rootClassPrefix","eventTrigger","_eventTrigger","widgetRoot","hide","clearItems","forEach","i","setRendererOptions","_getRendererOptions","_annotationsGroup","linkRemove","linkOff","off","_createHtmlStructure","_this2","linkOn","root","linkAppend","bind","_this3","_stopCurrentHandling","_buildAnnotations","_getOption","_setAnnotationTooltipOptions","tooltipOptions","update","customize","constructor","addChange","code","handler","_requestChange","isOptionChange","option","isThemeDependent","fontFields","core","chart","polarChart","vectorMap","pieChart"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/core/annotations.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.plugins = exports.createAnnotations = void 0;\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _tooltip = require(\"../core/tooltip\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _utils = require(\"./utils\");\r\nvar _plaque = require(\"./plaque\");\r\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\r\nvar _drag = require(\"../../events/drag\");\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar getDocument = _dom_adapter.default.getDocument;\r\nvar EVENT_NS = \"annotations\";\r\nvar DOT_EVENT_NS = \".\" + EVENT_NS;\r\nvar POINTER_ACTION = (0, _index.addNamespace)([_pointer.default.down, _pointer.default.move], EVENT_NS);\r\nvar POINTER_UP_EVENT_NAME = (0, _index.addNamespace)(_pointer.default.up, EVENT_NS);\r\nvar DRAG_START_EVENT_NAME = _drag.start + DOT_EVENT_NS;\r\nvar DRAG_EVENT_NAME = _drag.move + DOT_EVENT_NS;\r\nvar DRAG_END_EVENT_NAME = _drag.end + DOT_EVENT_NS;\r\n\r\nfunction coreAnnotation(options, contentTemplate) {\r\n    return {\r\n        draw: function(widget, group) {\r\n            var _this = this;\r\n            var annotationGroup = widget._renderer.g().append(group).css((0, _utils.patchFontOptions)(options.font));\r\n            if (this.plaque) {\r\n                this.plaque.clear()\r\n            }\r\n            this.plaque = new _plaque.Plaque((0, _extend.extend)(true, {}, options, {\r\n                cornerRadius: (options.border || {}).cornerRadius\r\n            }), widget, annotationGroup, contentTemplate, widget._isAnnotationBounded(options));\r\n            this.plaque.draw(widget._getAnnotationCoords(this));\r\n            if (options.allowDragging) {\r\n                annotationGroup.on(DRAG_START_EVENT_NAME, {\r\n                    immediate: true\r\n                }, function(e) {\r\n                    _this._dragOffsetX = _this.plaque.x - e.pageX;\r\n                    _this._dragOffsetY = _this.plaque.y - e.pageY\r\n                }).on(DRAG_EVENT_NAME, function(e) {\r\n                    _this.plaque.move(e.pageX + _this._dragOffsetX, e.pageY + _this._dragOffsetY)\r\n                }).on(DRAG_END_EVENT_NAME, function(e) {\r\n                    _this.offsetX = (_this.offsetX || 0) + e.offset.x;\r\n                    _this.offsetY = (_this.offsetY || 0) + e.offset.y\r\n                })\r\n            }\r\n        },\r\n        hitTest: function(x, y) {\r\n            return this.plaque.hitTest(x, y)\r\n        },\r\n        showTooltip: function(tooltip, _ref) {\r\n            var x = _ref.x,\r\n                y = _ref.y;\r\n            if (tooltip.annotation !== this) {\r\n                tooltip.setTemplate(this.options.tooltipTemplate);\r\n                if (tooltip.show(this.options, {\r\n                        x: x,\r\n                        y: y\r\n                    }, {\r\n                        target: this.options\r\n                    }, this.options.customizeTooltip)) {\r\n                    tooltip.annotation = this\r\n                }\r\n            } else {\r\n                tooltip.move(x, y)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction getTemplateFunction(options, widget) {\r\n    var template;\r\n    if (\"text\" === options.type) {\r\n        template = function(item, groupElement) {\r\n            var text = widget._renderer.text(item.text).attr({\r\n                \"class\": item.cssClass\r\n            }).append({\r\n                element: groupElement\r\n            });\r\n            if (item.width > 0 || item.height > 0) {\r\n                text.setMaxSize(item.width, item.height, {\r\n                    wordWrap: item.wordWrap,\r\n                    textOverflow: item.textOverflow\r\n                })\r\n            }\r\n        }\r\n    } else {\r\n        if (\"image\" === options.type) {\r\n            template = function(item, groupElement) {\r\n                var _ref2 = item.image || {},\r\n                    width = _ref2.width,\r\n                    height = _ref2.height,\r\n                    url = _ref2.url,\r\n                    location = _ref2.location;\r\n                var outerWidth = item.width,\r\n                    outerHeight = item.height;\r\n                var imageWidth = outerWidth > 0 ? Math.min(width, outerWidth) : width;\r\n                var imageHeight = outerHeight > 0 ? Math.min(height, outerHeight) : height;\r\n                widget._renderer.image(0, 0, imageWidth, imageHeight, url, location || \"center\").append({\r\n                    element: groupElement\r\n                })\r\n            }\r\n        } else {\r\n            if (\"custom\" === options.type) {\r\n                template = options.template\r\n            }\r\n        }\r\n    }\r\n    return template\r\n}\r\n\r\nfunction getImageObject(image) {\r\n    return \"string\" === typeof image ? {\r\n        url: image\r\n    } : image\r\n}\r\nvar createAnnotations = function(widget, items) {\r\n    var commonAnnotationSettings = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\r\n    var customizeAnnotation = arguments.length > 3 ? arguments[3] : void 0;\r\n    var pullOptions = arguments.length > 4 ? arguments[4] : void 0;\r\n    var commonImageOptions = getImageObject(commonAnnotationSettings.image);\r\n    return items.reduce(function(arr, item) {\r\n        var currentImageOptions = getImageObject(item.image);\r\n        var customizedItem = (0, _type.isFunction)(customizeAnnotation) ? customizeAnnotation(item) : {};\r\n        if (customizedItem) {\r\n            customizedItem.image = getImageObject(customizedItem.image)\r\n        }\r\n        var options = (0, _extend.extend)(true, {}, commonAnnotationSettings, item, {\r\n            image: commonImageOptions\r\n        }, {\r\n            image: currentImageOptions\r\n        }, customizedItem);\r\n        var templateFunction = getTemplateFunction(options, widget);\r\n        var annotation = templateFunction && (0, _extend.extend)(true, pullOptions(options), coreAnnotation(options, widget._getTemplate(templateFunction)));\r\n        annotation && arr.push(annotation);\r\n        return arr\r\n    }, [])\r\n};\r\nexports.createAnnotations = createAnnotations;\r\nvar chartPlugin = {\r\n    name: \"annotations_chart\",\r\n    init: function() {},\r\n    dispose: function() {},\r\n    members: {\r\n        _getAnnotationCoords: function(annotation) {\r\n            var _axis, _axis2;\r\n            var coords = {\r\n                offsetX: annotation.offsetX,\r\n                offsetY: annotation.offsetY\r\n            };\r\n            var argCoordName = this._options.silent(\"rotated\") ? \"y\" : \"x\";\r\n            var valCoordName = this._options.silent(\"rotated\") ? \"x\" : \"y\";\r\n            var argAxis = this.getArgumentAxis();\r\n            var argument = argAxis.validateUnit(annotation.argument);\r\n            var axis = this.getValueAxis(annotation.axis);\r\n            var series;\r\n            var pane = null === (_axis = axis) || void 0 === _axis ? void 0 : _axis.pane;\r\n            if (annotation.series) {\r\n                var _series;\r\n                series = this.series.filter(function(s) {\r\n                    return s.name === annotation.series\r\n                })[0];\r\n                axis = null === (_series = series) || void 0 === _series ? void 0 : _series.getValueAxis();\r\n                (0, _type.isDefined)(axis) && (pane = axis.pane)\r\n            }\r\n            if ((0, _type.isDefined)(argument)) {\r\n                if (series) {\r\n                    var center = series.getPointCenterByArg(argument);\r\n                    center && (coords[argCoordName] = center[argCoordName])\r\n                } else {\r\n                    coords[argCoordName] = argAxis.getTranslator().translate(argument)\r\n                }!(0, _type.isDefined)(pane) && (pane = argAxis.pane)\r\n            }\r\n            var value = null === (_axis2 = axis) || void 0 === _axis2 ? void 0 : _axis2.validateUnit(annotation.value);\r\n            if ((0, _type.isDefined)(value)) {\r\n                var _axis3;\r\n                coords[valCoordName] = null === (_axis3 = axis) || void 0 === _axis3 ? void 0 : _axis3.getTranslator().translate(value);\r\n                !(0, _type.isDefined)(pane) && (0, _type.isDefined)(axis) && (pane = axis.pane)\r\n            }\r\n            coords.canvas = this._getCanvasForPane(pane);\r\n            if ((0, _type.isDefined)(coords[argCoordName]) && !(0, _type.isDefined)(value)) {\r\n                var _series2;\r\n                if (!(0, _type.isDefined)(axis) && !(0, _type.isDefined)(series)) {\r\n                    coords[valCoordName] = argAxis.getAxisPosition()\r\n                } else {\r\n                    if ((0, _type.isDefined)(axis) && !(0, _type.isDefined)(series)) {\r\n                        coords[valCoordName] = this._argumentAxes.filter(function(a) {\r\n                            return a.pane === axis.pane\r\n                        })[0].getAxisPosition()\r\n                    } else {\r\n                        if (null === (_series2 = series) || void 0 === _series2 ? void 0 : _series2.checkSeriesViewportCoord(argAxis, coords[argCoordName])) {\r\n                            coords[valCoordName] = series.getSeriesPairCoord(coords[argCoordName], true)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (!(0, _type.isDefined)(argument) && (0, _type.isDefined)(coords[valCoordName])) {\r\n                if ((0, _type.isDefined)(axis) && !(0, _type.isDefined)(series)) {\r\n                    coords[argCoordName] = axis.getAxisPosition()\r\n                } else {\r\n                    if ((0, _type.isDefined)(series)) {\r\n                        if (series.checkSeriesViewportCoord(axis, coords[valCoordName])) {\r\n                            coords[argCoordName] = series.getSeriesPairCoord(coords[valCoordName], false)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return coords\r\n        },\r\n        _annotationsPointerEventHandler: function(event) {\r\n            var originalEvent = event.originalEvent || {};\r\n            var touch = originalEvent.touches && originalEvent.touches[0] || {};\r\n            var rootOffset = this._renderer.getRootOffset();\r\n            var coords = {\r\n                x: touch.pageX || originalEvent.pageX || event.pageX,\r\n                y: touch.pageY || originalEvent.pageY || event.pageY\r\n            };\r\n            var annotation = this._annotations.items.filter(function(a) {\r\n                return a.hitTest(coords.x - rootOffset.left, coords.y - rootOffset.top)\r\n            })[0];\r\n            if (!annotation || !annotation.options.tooltipEnabled) {\r\n                this._annotations.hideTooltip();\r\n                return\r\n            }\r\n            this._clear();\r\n            if (annotation.options.allowDragging && event.type === _pointer.default.down) {\r\n                this._annotations._hideToolTipForDrag = true\r\n            }\r\n            if (!this._annotations._hideToolTipForDrag) {\r\n                annotation.showTooltip(this._annotations.tooltip, coords);\r\n                event.stopPropagation()\r\n            }\r\n        },\r\n        _isAnnotationBounded: function(options) {\r\n            return (0, _type.isDefined)(options.value) || (0, _type.isDefined)(options.argument)\r\n        },\r\n        _pullOptions: function(options) {\r\n            return {\r\n                type: options.type,\r\n                name: options.name,\r\n                x: options.x,\r\n                y: options.y,\r\n                value: options.value,\r\n                argument: options.argument,\r\n                axis: options.axis,\r\n                series: options.series,\r\n                options: options,\r\n                offsetX: options.offsetX,\r\n                offsetY: options.offsetY\r\n            }\r\n        },\r\n        _forceAnnotationRender: function() {\r\n            this._change([\"FORCE_RENDER\"])\r\n        },\r\n        _clear: function() {\r\n            this.hideTooltip();\r\n            this.clearHover()\r\n        }\r\n    }\r\n};\r\nvar polarChartPlugin = {\r\n    name: \"annotations_polar_chart\",\r\n    init: function() {},\r\n    dispose: function() {},\r\n    members: {\r\n        _getAnnotationCoords: function(annotation) {\r\n            var coords = {\r\n                offsetX: annotation.offsetX,\r\n                offsetY: annotation.offsetY,\r\n                canvas: this._calcCanvas()\r\n            };\r\n            var argAxis = this.getArgumentAxis();\r\n            var argument = argAxis.validateUnit(annotation.argument);\r\n            var value = this.getValueAxis().validateUnit(annotation.value);\r\n            var radius = annotation.radius;\r\n            var angle = annotation.angle;\r\n            var pointCoords;\r\n            var series;\r\n            if (annotation.series) {\r\n                series = this.series.filter(function(s) {\r\n                    return s.name === annotation.series\r\n                })[0]\r\n            }(0, _extend.extend)(true, coords, this.getXYFromPolar(angle, radius, argument, value));\r\n            if ((0, _type.isDefined)(series)) {\r\n                if ((0, _type.isDefined)(coords.angle) && !(0, _type.isDefined)(value) && !(0, _type.isDefined)(radius)) {\r\n                    if (!(0, _type.isDefined)(argument)) {\r\n                        argument = argAxis.getTranslator().from(isFinite(angle) ? this.getActualAngle(angle) : coords.angle)\r\n                    }\r\n                    pointCoords = series.getSeriesPairCoord({\r\n                        argument: argument,\r\n                        angle: -coords.angle\r\n                    }, true)\r\n                } else {\r\n                    if ((0, _type.isDefined)(coords.radius) && !(0, _type.isDefined)(argument) && !(0, _type.isDefined)(angle)) {\r\n                        pointCoords = series.getSeriesPairCoord({\r\n                            radius: coords.radius\r\n                        }, false)\r\n                    }\r\n                }\r\n                if ((0, _type.isDefined)(pointCoords)) {\r\n                    coords.x = pointCoords.x;\r\n                    coords.y = pointCoords.y\r\n                }\r\n            }\r\n            if (annotation.series && !(0, _type.isDefined)(pointCoords)) {\r\n                coords.x = coords.y = void 0\r\n            }\r\n            return coords\r\n        },\r\n        _annotationsPointerEventHandler: chartPlugin.members._annotationsPointerEventHandler,\r\n        _isAnnotationBounded: chartPlugin.members._isAnnotationBounded,\r\n        _pullOptions: function(options) {\r\n            var polarOptions = (0, _extend.extend)({}, {\r\n                radius: options.radius,\r\n                angle: options.angle\r\n            }, chartPlugin.members._pullOptions(options));\r\n            delete polarOptions.axis;\r\n            return polarOptions\r\n        },\r\n        _forceAnnotationRender: chartPlugin.members._forceAnnotationRender,\r\n        _clear: chartPlugin.members._clear\r\n    }\r\n};\r\nvar vectorMapPlugin = {\r\n    name: \"annotations_vector_map\",\r\n    init: function() {},\r\n    dispose: function() {\r\n        this._annotations._offTracker();\r\n        this._annotations._offTracker = null\r\n    },\r\n    members: {\r\n        _getAnnotationCoords: function(annotation) {\r\n            var coords = {\r\n                offsetX: annotation.offsetX,\r\n                offsetY: annotation.offsetY\r\n            };\r\n            coords.canvas = this._projection.getCanvas();\r\n            if (annotation.coordinates) {\r\n                var data = this._projection.toScreenPoint(annotation.coordinates);\r\n                coords.x = data[0];\r\n                coords.y = data[1]\r\n            }\r\n            return coords\r\n        },\r\n        _annotationsPointerEventHandler: chartPlugin.members._annotationsPointerEventHandler,\r\n        _isAnnotationBounded: function(options) {\r\n            return (0, _type.isDefined)(options.coordinates)\r\n        },\r\n        _pullOptions: function(options) {\r\n            var vectorMapOptions = (0, _extend.extend)({}, {\r\n                coordinates: options.coordinates\r\n            }, chartPlugin.members._pullOptions(options));\r\n            delete vectorMapOptions.axis;\r\n            delete vectorMapOptions.series;\r\n            delete vectorMapOptions.argument;\r\n            delete vectorMapOptions.value;\r\n            return vectorMapOptions\r\n        },\r\n        _forceAnnotationRender: function() {\r\n            this._change([\"EXTRA_ELEMENTS\"])\r\n        },\r\n        _getAnnotationStyles: function() {\r\n            return {\r\n                \"text-anchor\": \"start\"\r\n            }\r\n        },\r\n        _clear: function() {}\r\n    },\r\n    extenders: {\r\n        _prepareExtraElements: function() {\r\n            var that = this;\r\n            var renderElements = function() {\r\n                that._renderExtraElements()\r\n            };\r\n            that._annotations._offTracker = that._tracker.on({\r\n                move: renderElements,\r\n                zoom: renderElements,\r\n                end: renderElements\r\n            })\r\n        }\r\n    }\r\n};\r\nvar pieChartPlugin = {\r\n    name: \"annotations_pie_chart\",\r\n    init: function() {},\r\n    dispose: function() {},\r\n    members: {\r\n        _getAnnotationCoords: function(annotation) {\r\n            var series;\r\n            var coords = {\r\n                offsetX: annotation.offsetX,\r\n                offsetY: annotation.offsetY,\r\n                canvas: this._canvas\r\n            };\r\n            if (annotation.argument) {\r\n                if (annotation.series) {\r\n                    series = this.getSeriesByName(annotation.series)\r\n                } else {\r\n                    series = this.series[0]\r\n                }\r\n                var argument = series.getPointsByArg(annotation.argument)[0];\r\n                var _argument$getAnnotati = argument.getAnnotationCoords(annotation.location),\r\n                    x = _argument$getAnnotati.x,\r\n                    y = _argument$getAnnotati.y;\r\n                coords.x = x;\r\n                coords.y = y\r\n            }\r\n            return coords\r\n        },\r\n        _isAnnotationBounded: function(options) {\r\n            return options.argument\r\n        },\r\n        _annotationsPointerEventHandler: chartPlugin.members._annotationsPointerEventHandler,\r\n        _pullOptions: function(options) {\r\n            var pieChartOptions = (0, _extend.extend)({}, {\r\n                location: options.location\r\n            }, chartPlugin.members._pullOptions(options));\r\n            delete pieChartOptions.axis;\r\n            return pieChartOptions\r\n        },\r\n        _clear: chartPlugin.members._clear,\r\n        _forceAnnotationRender: chartPlugin.members._forceAnnotationRender\r\n    }\r\n};\r\nvar corePlugin = {\r\n    name: \"annotations_core\",\r\n    init: function() {\r\n        this._annotations = {\r\n            items: [],\r\n            _hideToolTipForDrag: false,\r\n            tooltip: new _tooltip.Tooltip({\r\n                cssClass: \"\".concat(this._rootClassPrefix, \"-annotation-tooltip\"),\r\n                eventTrigger: this._eventTrigger,\r\n                widgetRoot: this.element(),\r\n                widget: this\r\n            }),\r\n            hideTooltip: function() {\r\n                this.tooltip.annotation = null;\r\n                this.tooltip.hide()\r\n            },\r\n            clearItems: function() {\r\n                this.items.forEach(function(i) {\r\n                    return i.plaque.clear()\r\n                });\r\n                this.items = []\r\n            }\r\n        };\r\n        this._annotations.tooltip.setRendererOptions(this._getRendererOptions())\r\n    },\r\n    dispose: function() {\r\n        this._annotationsGroup.linkRemove().linkOff();\r\n        _events_engine.default.off(getDocument(), DOT_EVENT_NS);\r\n        this._annotationsGroup.off(DOT_EVENT_NS);\r\n        this._annotations.tooltip && this._annotations.tooltip.dispose()\r\n    },\r\n    extenders: {\r\n        _createHtmlStructure: function() {\r\n            var _this2 = this;\r\n            this._annotationsGroup = this._renderer.g().attr({\r\n                \"class\": \"\".concat(this._rootClassPrefix, \"-annotations\")\r\n            }).css(this._getAnnotationStyles()).linkOn(this._renderer.root, \"annotations\").linkAppend();\r\n            _events_engine.default.on(getDocument(), POINTER_ACTION, function() {\r\n                return _this2._annotations.hideTooltip()\r\n            });\r\n            _events_engine.default.on(getDocument(), POINTER_UP_EVENT_NAME, function(event) {\r\n                _this2._annotations._hideToolTipForDrag = false;\r\n                _this2._annotationsPointerEventHandler(event)\r\n            });\r\n            this._annotationsGroup.on(POINTER_ACTION, this._annotationsPointerEventHandler.bind(this))\r\n        },\r\n        _renderExtraElements: function() {\r\n            var _this3 = this;\r\n            this._annotationsGroup.clear();\r\n            this._annotations.items.forEach(function(item) {\r\n                return item.draw(_this3, _this3._annotationsGroup)\r\n            })\r\n        },\r\n        _stopCurrentHandling: function() {\r\n            this._annotations.hideTooltip()\r\n        }\r\n    },\r\n    members: {\r\n        _buildAnnotations: function() {\r\n            this._annotations.clearItems();\r\n            var items = this._getOption(\"annotations\", true);\r\n            if (!(null === items || void 0 === items ? void 0 : items.length)) {\r\n                return\r\n            }\r\n            this._annotations.items = createAnnotations(this, items, this._getOption(\"commonAnnotationSettings\"), this._getOption(\"customizeAnnotation\", true), this._pullOptions)\r\n        },\r\n        _setAnnotationTooltipOptions: function() {\r\n            var tooltipOptions = (0, _extend.extend)({}, this._getOption(\"tooltip\"));\r\n            tooltipOptions.contentTemplate = tooltipOptions.customizeTooltip = void 0;\r\n            this._annotations.tooltip.update(tooltipOptions)\r\n        },\r\n        _getAnnotationCoords: function() {\r\n            return {}\r\n        },\r\n        _pullOptions: function() {\r\n            return {}\r\n        },\r\n        _getAnnotationStyles: function() {\r\n            return {}\r\n        }\r\n    },\r\n    customize: function(constructor) {\r\n        constructor.addChange({\r\n            code: \"ANNOTATIONITEMS\",\r\n            handler: function() {\r\n                this._requestChange([\"ANNOTATIONS\"])\r\n            },\r\n            isOptionChange: true,\r\n            option: \"annotations\"\r\n        });\r\n        constructor.addChange({\r\n            code: \"ANNOTATIONSSETTINGS\",\r\n            handler: function() {\r\n                this._requestChange([\"ANNOTATIONS\"])\r\n            },\r\n            isOptionChange: true,\r\n            option: \"commonAnnotationSettings\"\r\n        });\r\n        constructor.addChange({\r\n            code: \"ANNOTATIONS\",\r\n            handler: function() {\r\n                this._buildAnnotations();\r\n                this._setAnnotationTooltipOptions();\r\n                this._forceAnnotationRender()\r\n            },\r\n            isThemeDependent: true,\r\n            isOptionChange: true\r\n        })\r\n    },\r\n    fontFields: [\"commonAnnotationSettings.font\"]\r\n};\r\nvar plugins = {\r\n    core: corePlugin,\r\n    chart: chartPlugin,\r\n    polarChart: polarChartPlugin,\r\n    vectorMap: vectorMapPlugin,\r\n    pieChart: pieChartPlugin\r\n};\r\nexports.plugins = plugins;\r\n"]},"metadata":{},"sourceType":"script"}