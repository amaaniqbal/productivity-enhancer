{"ast":null,"code":"/**\r\n * DevExtreme (events/click.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.name = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\n\nvar _devices = _interopRequireDefault(require(\"../core/devices\"));\n\nvar _dom_adapter = _interopRequireDefault(require(\"../core/dom_adapter\"));\n\nvar _dom = require(\"../core/utils/dom\");\n\nvar _frame = require(\"../animation/frame\");\n\nvar _index = require(\"./utils/index\");\n\nvar _pointer = _interopRequireDefault(require(\"./pointer\"));\n\nvar _emitter = _interopRequireDefault(require(\"./core/emitter\"));\n\nvar _emitter_registrator = _interopRequireDefault(require(\"./core/emitter_registrator\"));\n\nvar _version = require(\"../core/utils/version\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar CLICK_EVENT_NAME = \"dxclick\";\nexports.name = CLICK_EVENT_NAME;\nvar TOUCH_BOUNDARY = 10;\nvar abs = Math.abs;\n\nvar isInput = function isInput(element) {\n  return (0, _renderer.default)(element).is(\"input, textarea, select, button ,:focus, :focus *\");\n};\n\nvar misc = {\n  requestAnimationFrame: _frame.requestAnimationFrame,\n  cancelAnimationFrame: _frame.cancelAnimationFrame\n};\n\nvar ClickEmitter = _emitter.default.inherit({\n  ctor: function ctor(element) {\n    this.callBase(element);\n\n    this._makeElementClickable((0, _renderer.default)(element));\n  },\n  _makeElementClickable: function _makeElementClickable($element) {\n    if (!$element.attr(\"onclick\")) {\n      $element.attr(\"onclick\", \"void(0)\");\n    }\n  },\n  start: function start(e) {\n    this._blurPrevented = e.isDefaultPrevented();\n    this._startTarget = e.target;\n    this._startEventData = (0, _index.eventData)(e);\n  },\n  end: function end(e) {\n    if (this._eventOutOfElement(e, this.getElement().get(0)) || e.type === _pointer.default.cancel) {\n      this._cancel(e);\n\n      return;\n    }\n\n    if (!isInput(e.target) && !this._blurPrevented) {\n      (0, _dom.resetActiveElement)();\n    }\n\n    this._accept(e);\n\n    this._clickAnimationFrame = misc.requestAnimationFrame(function () {\n      this._fireClickEvent(e);\n    }.bind(this));\n  },\n  _eventOutOfElement: function _eventOutOfElement(e, element) {\n    var target = e.target;\n    var targetChanged = !(0, _dom.contains)(element, target) && element !== target;\n    var gestureDelta = (0, _index.eventDelta)((0, _index.eventData)(e), this._startEventData);\n    var boundsExceeded = abs(gestureDelta.x) > TOUCH_BOUNDARY || abs(gestureDelta.y) > TOUCH_BOUNDARY;\n    return targetChanged || boundsExceeded;\n  },\n  _fireClickEvent: function _fireClickEvent(e) {\n    this._fireEvent(CLICK_EVENT_NAME, e, {\n      target: (0, _dom.closestCommonParent)(this._startTarget, e.target)\n    });\n  },\n  dispose: function dispose() {\n    misc.cancelAnimationFrame(this._clickAnimationFrame);\n  }\n});\n\nvar realDevice = _devices.default.real();\n\nvar useNativeClick = realDevice.generic || realDevice.ios && (0, _version.compare)(realDevice.version, [9, 3]) >= 0 || realDevice.android && (0, _version.compare)(realDevice.version, [5]) >= 0;\n!function () {\n  var NATIVE_CLICK_CLASS = \"dx-native-click\";\n\n  var isNativeClickEvent = function isNativeClickEvent(target) {\n    return useNativeClick || (0, _renderer.default)(target).closest(\".\" + NATIVE_CLICK_CLASS).length;\n  };\n\n  var prevented = null;\n  var lastFiredEvent = null;\n\n  var clickHandler = function clickHandler(e) {\n    var originalEvent = e.originalEvent;\n    var eventAlreadyFired = lastFiredEvent === originalEvent || originalEvent && originalEvent.DXCLICK_FIRED;\n    var leftButton = !e.which || 1 === e.which;\n\n    if (leftButton && !prevented && isNativeClickEvent(e.target) && !eventAlreadyFired) {\n      if (originalEvent) {\n        originalEvent.DXCLICK_FIRED = true;\n      }\n\n      lastFiredEvent = originalEvent;\n      (0, _index.fireEvent)({\n        type: CLICK_EVENT_NAME,\n        originalEvent: e\n      });\n    }\n  };\n\n  ClickEmitter = ClickEmitter.inherit({\n    _makeElementClickable: function _makeElementClickable($element) {\n      if (!isNativeClickEvent($element)) {\n        this.callBase($element);\n      }\n\n      _events_engine.default.on($element, \"click\", clickHandler);\n    },\n    configure: function configure(data) {\n      this.callBase(data);\n\n      if (data.useNative) {\n        this.getElement().addClass(NATIVE_CLICK_CLASS);\n      }\n    },\n    start: function start(e) {\n      prevented = null;\n\n      if (!isNativeClickEvent(e.target)) {\n        this.callBase(e);\n      }\n    },\n    end: function end(e) {\n      if (!isNativeClickEvent(e.target)) {\n        this.callBase(e);\n      }\n    },\n    cancel: function cancel() {\n      prevented = true;\n    },\n    dispose: function dispose() {\n      this.callBase();\n\n      _events_engine.default.off(this.getElement(), \"click\", clickHandler);\n    }\n  });\n}();\n!function () {\n  var desktopDevice = _devices.default.real().generic;\n\n  if (!desktopDevice) {\n    var startTarget = null;\n    var blurPrevented = false;\n\n    var pointerDownHandler = function pointerDownHandler(e) {\n      startTarget = e.target;\n      blurPrevented = e.isDefaultPrevented();\n    };\n\n    var clickHandler = function clickHandler(e) {\n      var $target = (0, _renderer.default)(e.target);\n\n      if (!blurPrevented && startTarget && !$target.is(startTarget) && !(0, _renderer.default)(startTarget).is(\"label\") && isInput($target)) {\n        (0, _dom.resetActiveElement)();\n      }\n\n      startTarget = null;\n      blurPrevented = false;\n    };\n\n    var NATIVE_CLICK_FIXER_NAMESPACE = \"NATIVE_CLICK_FIXER\";\n\n    var document = _dom_adapter.default.getDocument();\n\n    _events_engine.default.subscribeGlobal(document, (0, _index.addNamespace)(_pointer.default.down, NATIVE_CLICK_FIXER_NAMESPACE), pointerDownHandler);\n\n    _events_engine.default.subscribeGlobal(document, (0, _index.addNamespace)(\"click\", NATIVE_CLICK_FIXER_NAMESPACE), clickHandler);\n  }\n}();\n(0, _emitter_registrator.default)({\n  emitter: ClickEmitter,\n  bubble: true,\n  events: [CLICK_EVENT_NAME]\n});","map":{"version":3,"sources":["E:/Monday.com/quickstart-react/node_modules/devextreme/events/click.js"],"names":["exports","name","_renderer","_interopRequireDefault","require","_events_engine","_devices","_dom_adapter","_dom","_frame","_index","_pointer","_emitter","_emitter_registrator","_version","obj","__esModule","CLICK_EVENT_NAME","TOUCH_BOUNDARY","abs","Math","isInput","element","default","is","misc","requestAnimationFrame","cancelAnimationFrame","ClickEmitter","inherit","ctor","callBase","_makeElementClickable","$element","attr","start","e","_blurPrevented","isDefaultPrevented","_startTarget","target","_startEventData","eventData","end","_eventOutOfElement","getElement","get","type","cancel","_cancel","resetActiveElement","_accept","_clickAnimationFrame","_fireClickEvent","bind","targetChanged","contains","gestureDelta","eventDelta","boundsExceeded","x","y","_fireEvent","closestCommonParent","dispose","realDevice","real","useNativeClick","generic","ios","compare","version","android","NATIVE_CLICK_CLASS","isNativeClickEvent","closest","length","prevented","lastFiredEvent","clickHandler","originalEvent","eventAlreadyFired","DXCLICK_FIRED","leftButton","which","fireEvent","on","configure","data","useNative","addClass","off","desktopDevice","startTarget","blurPrevented","pointerDownHandler","$target","NATIVE_CLICK_FIXER_NAMESPACE","document","getDocument","subscribeGlobal","addNamespace","down","emitter","bubble","events"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (events/click.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.name = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\r\nvar _devices = _interopRequireDefault(require(\"../core/devices\"));\r\nvar _dom_adapter = _interopRequireDefault(require(\"../core/dom_adapter\"));\r\nvar _dom = require(\"../core/utils/dom\");\r\nvar _frame = require(\"../animation/frame\");\r\nvar _index = require(\"./utils/index\");\r\nvar _pointer = _interopRequireDefault(require(\"./pointer\"));\r\nvar _emitter = _interopRequireDefault(require(\"./core/emitter\"));\r\nvar _emitter_registrator = _interopRequireDefault(require(\"./core/emitter_registrator\"));\r\nvar _version = require(\"../core/utils/version\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar CLICK_EVENT_NAME = \"dxclick\";\r\nexports.name = CLICK_EVENT_NAME;\r\nvar TOUCH_BOUNDARY = 10;\r\nvar abs = Math.abs;\r\nvar isInput = function(element) {\r\n    return (0, _renderer.default)(element).is(\"input, textarea, select, button ,:focus, :focus *\")\r\n};\r\nvar misc = {\r\n    requestAnimationFrame: _frame.requestAnimationFrame,\r\n    cancelAnimationFrame: _frame.cancelAnimationFrame\r\n};\r\nvar ClickEmitter = _emitter.default.inherit({\r\n    ctor: function(element) {\r\n        this.callBase(element);\r\n        this._makeElementClickable((0, _renderer.default)(element))\r\n    },\r\n    _makeElementClickable: function($element) {\r\n        if (!$element.attr(\"onclick\")) {\r\n            $element.attr(\"onclick\", \"void(0)\")\r\n        }\r\n    },\r\n    start: function(e) {\r\n        this._blurPrevented = e.isDefaultPrevented();\r\n        this._startTarget = e.target;\r\n        this._startEventData = (0, _index.eventData)(e)\r\n    },\r\n    end: function(e) {\r\n        if (this._eventOutOfElement(e, this.getElement().get(0)) || e.type === _pointer.default.cancel) {\r\n            this._cancel(e);\r\n            return\r\n        }\r\n        if (!isInput(e.target) && !this._blurPrevented) {\r\n            (0, _dom.resetActiveElement)()\r\n        }\r\n        this._accept(e);\r\n        this._clickAnimationFrame = misc.requestAnimationFrame(function() {\r\n            this._fireClickEvent(e)\r\n        }.bind(this))\r\n    },\r\n    _eventOutOfElement: function(e, element) {\r\n        var target = e.target;\r\n        var targetChanged = !(0, _dom.contains)(element, target) && element !== target;\r\n        var gestureDelta = (0, _index.eventDelta)((0, _index.eventData)(e), this._startEventData);\r\n        var boundsExceeded = abs(gestureDelta.x) > TOUCH_BOUNDARY || abs(gestureDelta.y) > TOUCH_BOUNDARY;\r\n        return targetChanged || boundsExceeded\r\n    },\r\n    _fireClickEvent: function(e) {\r\n        this._fireEvent(CLICK_EVENT_NAME, e, {\r\n            target: (0, _dom.closestCommonParent)(this._startTarget, e.target)\r\n        })\r\n    },\r\n    dispose: function() {\r\n        misc.cancelAnimationFrame(this._clickAnimationFrame)\r\n    }\r\n});\r\nvar realDevice = _devices.default.real();\r\nvar useNativeClick = realDevice.generic || realDevice.ios && (0, _version.compare)(realDevice.version, [9, 3]) >= 0 || realDevice.android && (0, _version.compare)(realDevice.version, [5]) >= 0;\r\n! function() {\r\n    var NATIVE_CLICK_CLASS = \"dx-native-click\";\r\n    var isNativeClickEvent = function(target) {\r\n        return useNativeClick || (0, _renderer.default)(target).closest(\".\" + NATIVE_CLICK_CLASS).length\r\n    };\r\n    var prevented = null;\r\n    var lastFiredEvent = null;\r\n    var clickHandler = function(e) {\r\n        var originalEvent = e.originalEvent;\r\n        var eventAlreadyFired = lastFiredEvent === originalEvent || originalEvent && originalEvent.DXCLICK_FIRED;\r\n        var leftButton = !e.which || 1 === e.which;\r\n        if (leftButton && !prevented && isNativeClickEvent(e.target) && !eventAlreadyFired) {\r\n            if (originalEvent) {\r\n                originalEvent.DXCLICK_FIRED = true\r\n            }\r\n            lastFiredEvent = originalEvent;\r\n            (0, _index.fireEvent)({\r\n                type: CLICK_EVENT_NAME,\r\n                originalEvent: e\r\n            })\r\n        }\r\n    };\r\n    ClickEmitter = ClickEmitter.inherit({\r\n        _makeElementClickable: function($element) {\r\n            if (!isNativeClickEvent($element)) {\r\n                this.callBase($element)\r\n            }\r\n            _events_engine.default.on($element, \"click\", clickHandler)\r\n        },\r\n        configure: function(data) {\r\n            this.callBase(data);\r\n            if (data.useNative) {\r\n                this.getElement().addClass(NATIVE_CLICK_CLASS)\r\n            }\r\n        },\r\n        start: function(e) {\r\n            prevented = null;\r\n            if (!isNativeClickEvent(e.target)) {\r\n                this.callBase(e)\r\n            }\r\n        },\r\n        end: function(e) {\r\n            if (!isNativeClickEvent(e.target)) {\r\n                this.callBase(e)\r\n            }\r\n        },\r\n        cancel: function() {\r\n            prevented = true\r\n        },\r\n        dispose: function() {\r\n            this.callBase();\r\n            _events_engine.default.off(this.getElement(), \"click\", clickHandler)\r\n        }\r\n    })\r\n}();\r\n! function() {\r\n    var desktopDevice = _devices.default.real().generic;\r\n    if (!desktopDevice) {\r\n        var startTarget = null;\r\n        var blurPrevented = false;\r\n        var pointerDownHandler = function(e) {\r\n            startTarget = e.target;\r\n            blurPrevented = e.isDefaultPrevented()\r\n        };\r\n        var clickHandler = function(e) {\r\n            var $target = (0, _renderer.default)(e.target);\r\n            if (!blurPrevented && startTarget && !$target.is(startTarget) && !(0, _renderer.default)(startTarget).is(\"label\") && isInput($target)) {\r\n                (0, _dom.resetActiveElement)()\r\n            }\r\n            startTarget = null;\r\n            blurPrevented = false\r\n        };\r\n        var NATIVE_CLICK_FIXER_NAMESPACE = \"NATIVE_CLICK_FIXER\";\r\n        var document = _dom_adapter.default.getDocument();\r\n        _events_engine.default.subscribeGlobal(document, (0, _index.addNamespace)(_pointer.default.down, NATIVE_CLICK_FIXER_NAMESPACE), pointerDownHandler);\r\n        _events_engine.default.subscribeGlobal(document, (0, _index.addNamespace)(\"click\", NATIVE_CLICK_FIXER_NAMESPACE), clickHandler)\r\n    }\r\n}();\r\n(0, _emitter_registrator.default)({\r\n    emitter: ClickEmitter,\r\n    bubble: true,\r\n    events: [CLICK_EVENT_NAME]\r\n});\r\n"]},"metadata":{},"sourceType":"script"}