{"ast":null,"code":"/*!\n * devextreme-react\n * Version: 20.2.3\n * Build date: Tue Oct 20 2020\n *\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-react\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getChanges = void 0;\n\nvar tree_1 = require(\"./tree\");\n\nvar utils_1 = require(\"./utils\");\n\nfunction getChanges(current, prev) {\n  var changesAccum = {\n    options: {},\n    removedOptions: [],\n    templates: {},\n    addRemovedValues: function addRemovedValues(currentOptions, prevOptions, path) {\n      appendRemovedValues(currentOptions, prevOptions, path, this.removedOptions);\n    }\n  };\n  compare(current, prev, changesAccum);\n  return changesAccum;\n}\n\nexports.getChanges = getChanges;\n\nfunction compare(current, prev, changesAccum) {\n  if (!prev) {\n    changesAccum.options[current.fullName] = tree_1.buildNode(current, changesAccum.templates, true);\n    return;\n  }\n\n  changesAccum.addRemovedValues(current.options, prev.options, current.fullName);\n  changesAccum.addRemovedValues(current.configCollections, prev.configCollections, current.fullName);\n  changesAccum.addRemovedValues(current.configs, prev.configs, current.fullName);\n  compareCollections(current, prev, changesAccum);\n\n  for (var _i = 0, _a = Object.keys(current.configs); _i < _a.length; _i++) {\n    var key = _a[_i];\n    compare(current.configs[key], prev.configs[key], changesAccum);\n  }\n\n  for (var _b = 0, _c = Object.keys(current.options); _b < _c.length; _b++) {\n    var key = _c[_b];\n\n    if (current.options[key] === prev.options[key]) {\n      continue;\n    }\n\n    changesAccum.options[utils_1.mergeNameParts(current.fullName, key)] = current.options[key];\n  }\n\n  compareTemplates(current, prev, changesAccum);\n}\n\nfunction compareTemplates(current, prev, changesAccum) {\n  var currentTemplatesOptions = {};\n  var currentTemplates = {};\n  var prevTemplatesOptions = {};\n  var prevTemplates = {};\n  tree_1.buildTemplates(current, currentTemplatesOptions, currentTemplates);\n  tree_1.buildTemplates(prev, prevTemplatesOptions, prevTemplates);\n  changesAccum.addRemovedValues(currentTemplatesOptions, prevTemplatesOptions, current.fullName); // TODO: support switching to default templates\n  // appendRemovedValues(currentTemplates, prevTemplates, \"\", changesAccum.templates);\n\n  for (var _i = 0, _a = Object.keys(currentTemplatesOptions); _i < _a.length; _i++) {\n    var key = _a[_i];\n\n    if (currentTemplatesOptions[key] === prevTemplatesOptions[key]) {\n      continue;\n    }\n\n    changesAccum.options[utils_1.mergeNameParts(current.fullName, key)] = currentTemplatesOptions[key];\n  }\n\n  for (var _b = 0, _c = Object.keys(currentTemplates); _b < _c.length; _b++) {\n    var key = _c[_b];\n    var currentTemplate = currentTemplates[key];\n    var prevTemplate = prevTemplates[key];\n\n    if (prevTemplate && currentTemplate.content === prevTemplate.content) {\n      continue;\n    }\n\n    changesAccum.templates[key] = currentTemplate;\n  }\n}\n\nfunction appendRemovedValues(current, prev, path, changesAccum) {\n  var removedKeys = Object.keys(prev).filter(function (key) {\n    return Object.keys(current).indexOf(key) < 0;\n  });\n\n  for (var _i = 0, removedKeys_1 = removedKeys; _i < removedKeys_1.length; _i++) {\n    var key = removedKeys_1[_i];\n    changesAccum.push(utils_1.mergeNameParts(path, key));\n  }\n}\n\nfunction compareCollections(current, prev, changesAccum) {\n  var _loop_1 = function _loop_1(key) {\n    var currentCollection = current.configCollections[key];\n    var prevCollection = prev.configCollections[key] || [];\n\n    if (!currentCollection || currentCollection.length !== prevCollection.length) {\n      var updatedCollection_1 = [];\n      currentCollection.map(function (item) {\n        var config = tree_1.buildNode(item, changesAccum.templates, true);\n        updatedCollection_1.push(config);\n      });\n      changesAccum.options[utils_1.mergeNameParts(current.fullName, key)] = updatedCollection_1;\n      return \"continue\";\n    }\n\n    for (var i = 0; i < currentCollection.length; i++) {\n      compare(currentCollection[i], prevCollection[i], changesAccum);\n    }\n  };\n\n  for (var _i = 0, _a = Object.keys(current.configCollections); _i < _a.length; _i++) {\n    var key = _a[_i];\n\n    _loop_1(key);\n  }\n}","map":{"version":3,"sources":["E:/Monday.com/quickstart-react/node_modules/devextreme-react/core/configuration/comparer.js"],"names":["Object","defineProperty","exports","value","getChanges","tree_1","require","utils_1","current","prev","changesAccum","options","removedOptions","templates","addRemovedValues","currentOptions","prevOptions","path","appendRemovedValues","compare","fullName","buildNode","configCollections","configs","compareCollections","_i","_a","keys","length","key","_b","_c","mergeNameParts","compareTemplates","currentTemplatesOptions","currentTemplates","prevTemplatesOptions","prevTemplates","buildTemplates","currentTemplate","prevTemplate","content","removedKeys","filter","indexOf","removedKeys_1","push","_loop_1","currentCollection","prevCollection","updatedCollection_1","map","item","config","i"],"mappings":"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","sourcesContent":["/*!\n * devextreme-react\n * Version: 20.2.3\n * Build date: Tue Oct 20 2020\n *\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-react\n */\n\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getChanges = void 0;\nvar tree_1 = require(\"./tree\");\nvar utils_1 = require(\"./utils\");\nfunction getChanges(current, prev) {\n    var changesAccum = {\n        options: {},\n        removedOptions: [],\n        templates: {},\n        addRemovedValues: function (currentOptions, prevOptions, path) {\n            appendRemovedValues(currentOptions, prevOptions, path, this.removedOptions);\n        },\n    };\n    compare(current, prev, changesAccum);\n    return changesAccum;\n}\nexports.getChanges = getChanges;\nfunction compare(current, prev, changesAccum) {\n    if (!prev) {\n        changesAccum.options[current.fullName] = tree_1.buildNode(current, changesAccum.templates, true);\n        return;\n    }\n    changesAccum.addRemovedValues(current.options, prev.options, current.fullName);\n    changesAccum.addRemovedValues(current.configCollections, prev.configCollections, current.fullName);\n    changesAccum.addRemovedValues(current.configs, prev.configs, current.fullName);\n    compareCollections(current, prev, changesAccum);\n    for (var _i = 0, _a = Object.keys(current.configs); _i < _a.length; _i++) {\n        var key = _a[_i];\n        compare(current.configs[key], prev.configs[key], changesAccum);\n    }\n    for (var _b = 0, _c = Object.keys(current.options); _b < _c.length; _b++) {\n        var key = _c[_b];\n        if (current.options[key] === prev.options[key]) {\n            continue;\n        }\n        changesAccum.options[utils_1.mergeNameParts(current.fullName, key)] = current.options[key];\n    }\n    compareTemplates(current, prev, changesAccum);\n}\nfunction compareTemplates(current, prev, changesAccum) {\n    var currentTemplatesOptions = {};\n    var currentTemplates = {};\n    var prevTemplatesOptions = {};\n    var prevTemplates = {};\n    tree_1.buildTemplates(current, currentTemplatesOptions, currentTemplates);\n    tree_1.buildTemplates(prev, prevTemplatesOptions, prevTemplates);\n    changesAccum.addRemovedValues(currentTemplatesOptions, prevTemplatesOptions, current.fullName);\n    // TODO: support switching to default templates\n    // appendRemovedValues(currentTemplates, prevTemplates, \"\", changesAccum.templates);\n    for (var _i = 0, _a = Object.keys(currentTemplatesOptions); _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (currentTemplatesOptions[key] === prevTemplatesOptions[key]) {\n            continue;\n        }\n        changesAccum.options[utils_1.mergeNameParts(current.fullName, key)] = currentTemplatesOptions[key];\n    }\n    for (var _b = 0, _c = Object.keys(currentTemplates); _b < _c.length; _b++) {\n        var key = _c[_b];\n        var currentTemplate = currentTemplates[key];\n        var prevTemplate = prevTemplates[key];\n        if (prevTemplate && currentTemplate.content === prevTemplate.content) {\n            continue;\n        }\n        changesAccum.templates[key] = currentTemplate;\n    }\n}\nfunction appendRemovedValues(current, prev, path, changesAccum) {\n    var removedKeys = Object.keys(prev).filter(function (key) { return Object.keys(current).indexOf(key) < 0; });\n    for (var _i = 0, removedKeys_1 = removedKeys; _i < removedKeys_1.length; _i++) {\n        var key = removedKeys_1[_i];\n        changesAccum.push(utils_1.mergeNameParts(path, key));\n    }\n}\nfunction compareCollections(current, prev, changesAccum) {\n    var _loop_1 = function (key) {\n        var currentCollection = current.configCollections[key];\n        var prevCollection = prev.configCollections[key] || [];\n        if (!currentCollection || currentCollection.length !== prevCollection.length) {\n            var updatedCollection_1 = [];\n            currentCollection.map(function (item) {\n                var config = tree_1.buildNode(item, changesAccum.templates, true);\n                updatedCollection_1.push(config);\n            });\n            changesAccum.options[utils_1.mergeNameParts(current.fullName, key)] = updatedCollection_1;\n            return \"continue\";\n        }\n        for (var i = 0; i < currentCollection.length; i++) {\n            compare(currentCollection[i], prevCollection[i], changesAccum);\n        }\n    };\n    for (var _i = 0, _a = Object.keys(current.configCollections); _i < _a.length; _i++) {\n        var key = _a[_i];\n        _loop_1(key);\n    }\n}\n"]},"metadata":{},"sourceType":"script"}