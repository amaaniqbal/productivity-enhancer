{"ast":null,"code":"/**\r\n * DevExtreme (viz/chart_components/base_chart.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.BaseChart = exports.overlapping = void 0;\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _base_widget = _interopRequireDefault(require(\"../core/base_widget\"));\n\nvar _legend = require(\"../components/legend\");\n\nvar _data_validator = require(\"../components/data_validator\");\n\nvar _base_series = require(\"../series/base_series\");\n\nvar _chart_theme_manager = require(\"../components/chart_theme_manager\");\n\nvar _layout_manager = require(\"./layout_manager\");\n\nvar trackerModule = _interopRequireWildcard(require(\"./tracker\"));\n\nvar _utils = require(\"../core/utils\");\n\nvar _export = require(\"../core/export\");\n\nvar _title = require(\"../core/title\");\n\nvar _data_source = require(\"../core/data_source\");\n\nvar _tooltip = require(\"../core/tooltip\");\n\nvar _loading_indicator = require(\"../core/loading_indicator\");\n\nfunction _getRequireWildcardCache() {\n  if (\"function\" !== typeof WeakMap) {\n    return null;\n  }\n\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar _isArray = Array.isArray;\nvar REINIT_REFRESH_ACTION = \"_reinit\";\nvar REINIT_DATA_SOURCE_REFRESH_ACTION = \"_updateDataSource\";\nvar DATA_INIT_REFRESH_ACTION = \"_dataInit\";\nvar FORCE_RENDER_REFRESH_ACTION = \"_forceRender\";\nvar RESIZE_REFRESH_ACTION = \"_resize\";\nvar ACTIONS_BY_PRIORITY = [REINIT_REFRESH_ACTION, REINIT_DATA_SOURCE_REFRESH_ACTION, DATA_INIT_REFRESH_ACTION, FORCE_RENDER_REFRESH_ACTION, RESIZE_REFRESH_ACTION];\nvar DEFAULT_OPACITY = .3;\nvar REFRESH_SERIES_DATA_INIT_ACTION_OPTIONS = [\"series\", \"commonSeriesSettings\", \"dataPrepareSettings\", \"seriesSelectionMode\", \"pointSelectionMode\", \"synchronizeMultiAxes\", \"resolveLabelsOverlapping\"];\nvar REFRESH_SERIES_FAMILIES_ACTION_OPTIONS = [\"minBubbleSize\", \"maxBubbleSize\", \"barGroupPadding\", \"barGroupWidth\", \"negativesAsZeroes\", \"negativesAsZeros\"];\nvar FORCE_RENDER_REFRESH_ACTION_OPTIONS = [\"adaptiveLayout\", \"crosshair\", \"resolveLabelOverlapping\", \"adjustOnZoom\", \"stickyHovering\"];\nvar FONT = \"font\";\n\nfunction checkHeightRollingStock(rollingStocks, stubCanvas) {\n  var canvasSize = stubCanvas.end - stubCanvas.start;\n  var size = 0;\n  rollingStocks.forEach(function (rollingStock) {\n    size += rollingStock.getBoundingRect().width;\n  });\n\n  while (canvasSize < size) {\n    size -= findAndKillSmallValue(rollingStocks);\n  }\n}\n\nfunction findAndKillSmallValue(rollingStocks) {\n  var smallestObject = rollingStocks.reduce(function (prev, rollingStock, index) {\n    if (!rollingStock) {\n      return prev;\n    }\n\n    var value = rollingStock.value();\n    return value < prev.value ? {\n      value: value,\n      rollingStock: rollingStock,\n      index: index\n    } : prev;\n  }, {\n    rollingStock: void 0,\n    value: 1 / 0,\n    index: void 0\n  });\n  smallestObject.rollingStock.getLabels()[0].draw(false);\n  var width = smallestObject.rollingStock.getBoundingRect().width;\n  rollingStocks[smallestObject.index] = null;\n  return width;\n}\n\nfunction checkStackOverlap(rollingStocks) {\n  var i;\n  var j;\n  var iLength;\n  var jLength;\n  var overlap = false;\n\n  for (i = 0, iLength = rollingStocks.length - 1; i < iLength; i++) {\n    for (j = i + 1, jLength = rollingStocks.length; j < jLength; j++) {\n      if (i !== j && checkStacksOverlapping(rollingStocks[i], rollingStocks[j], true)) {\n        overlap = true;\n        break;\n      }\n    }\n\n    if (overlap) {\n      break;\n    }\n  }\n\n  return overlap;\n}\n\nfunction resolveLabelOverlappingInOneDirection(points, canvas, isRotated, shiftFunction) {\n  var customSorting = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : function () {\n    return 0;\n  };\n  var rollingStocks = [];\n  var stubCanvas = {\n    start: isRotated ? canvas.left : canvas.top,\n    end: isRotated ? canvas.width - canvas.right : canvas.height - canvas.bottom\n  };\n  var hasStackedSeries = false;\n  points.forEach(function (p) {\n    if (!p) {\n      return;\n    }\n\n    hasStackedSeries = hasStackedSeries || p.series.isStackedSeries() || p.series.isFullStackedSeries();\n    p.getLabels().forEach(function (l) {\n      l.isVisible() && rollingStocks.push(new RollingStock(l, isRotated, shiftFunction));\n    });\n  });\n\n  if (hasStackedSeries) {\n    !isRotated && rollingStocks.reverse();\n  } else {\n    var rollingStocksTmp = rollingStocks.slice();\n    rollingStocks.sort(function (a, b) {\n      return customSorting(a, b) || a.getInitialPosition() - b.getInitialPosition() || rollingStocksTmp.indexOf(a) - rollingStocksTmp.indexOf(b);\n    });\n  }\n\n  if (!checkStackOverlap(rollingStocks)) {\n    return false;\n  }\n\n  checkHeightRollingStock(rollingStocks, stubCanvas);\n  prepareOverlapStacks(rollingStocks);\n  rollingStocks.reverse();\n  moveRollingStock(rollingStocks, stubCanvas);\n  return true;\n}\n\nfunction checkStacksOverlapping(firstRolling, secondRolling, inTwoSides) {\n  if (!firstRolling || !secondRolling) {\n    return;\n  }\n\n  var firstRect = firstRolling.getBoundingRect();\n  var secondRect = secondRolling.getBoundingRect();\n  var oppositeOverlapping = inTwoSides ? firstRect.oppositeStart <= secondRect.oppositeStart && firstRect.oppositeEnd > secondRect.oppositeStart || secondRect.oppositeStart <= firstRect.oppositeStart && secondRect.oppositeEnd > firstRect.oppositeStart : true;\n  return firstRect.end > secondRect.start && oppositeOverlapping;\n}\n\nfunction prepareOverlapStacks(rollingStocks) {\n  var i;\n  var currentRollingStock;\n  var root;\n\n  for (i = 0; i < rollingStocks.length - 1; i++) {\n    currentRollingStock = root || rollingStocks[i];\n\n    if (checkStacksOverlapping(currentRollingStock, rollingStocks[i + 1])) {\n      currentRollingStock.toChain(rollingStocks[i + 1]);\n      rollingStocks[i + 1] = null;\n      root = currentRollingStock;\n    } else {\n      root = rollingStocks[i + 1] || currentRollingStock;\n    }\n  }\n}\n\nfunction moveRollingStock(rollingStocks, canvas) {\n  var i;\n  var j;\n  var currentRollingStock;\n  var nextRollingStock;\n  var currentBBox;\n  var nextBBox;\n\n  for (i = 0; i < rollingStocks.length; i++) {\n    currentRollingStock = rollingStocks[i];\n\n    if (rollingStocksIsOut(currentRollingStock, canvas)) {\n      currentBBox = currentRollingStock.getBoundingRect();\n\n      for (j = i + 1; j < rollingStocks.length; j++) {\n        nextRollingStock = rollingStocks[j];\n\n        if (!nextRollingStock) {\n          continue;\n        }\n\n        nextBBox = nextRollingStock.getBoundingRect();\n\n        if (nextBBox.end > currentBBox.start - (currentBBox.end - canvas.end)) {\n          nextRollingStock.toChain(currentRollingStock);\n          rollingStocks[i] = currentRollingStock = null;\n          break;\n        }\n      }\n    }\n\n    currentRollingStock && currentRollingStock.setRollingStockInCanvas(canvas);\n  }\n}\n\nfunction rollingStocksIsOut(rollingStock, canvas) {\n  return rollingStock && rollingStock.getBoundingRect().end > canvas.end;\n}\n\nfunction RollingStock(label, isRotated, shiftFunction) {\n  var bBox = label.getBoundingRect();\n  var x = bBox.x;\n  var y = bBox.y;\n  var endX = bBox.x + bBox.width;\n  var endY = bBox.y + bBox.height;\n  this.labels = [label];\n  this.shiftFunction = shiftFunction;\n  this._bBox = {\n    start: isRotated ? x : y,\n    width: isRotated ? bBox.width : bBox.height,\n    end: isRotated ? endX : endY,\n    oppositeStart: isRotated ? y : x,\n    oppositeEnd: isRotated ? endY : endX\n  };\n  this._initialPosition = isRotated ? bBox.x : bBox.y;\n  return this;\n}\n\nRollingStock.prototype = {\n  toChain: function toChain(nextRollingStock) {\n    var nextRollingStockBBox = nextRollingStock.getBoundingRect();\n    nextRollingStock.shift(nextRollingStockBBox.start - this._bBox.end);\n\n    this._changeBoxWidth(nextRollingStockBBox.width);\n\n    this.labels = this.labels.concat(nextRollingStock.labels);\n  },\n  getBoundingRect: function getBoundingRect() {\n    return this._bBox;\n  },\n  shift: function shift(shiftLength) {\n    var shiftFunction = this.shiftFunction;\n    (0, _iterator.each)(this.labels, function (index, label) {\n      var bBox = label.getBoundingRect();\n      var coords = shiftFunction(bBox, shiftLength);\n\n      if (!label.hideInsideLabel(coords)) {\n        label.shift(coords.x, coords.y);\n      }\n    });\n    this._bBox.end -= shiftLength;\n    this._bBox.start -= shiftLength;\n  },\n  setRollingStockInCanvas: function setRollingStockInCanvas(canvas) {\n    if (this._bBox.end > canvas.end) {\n      this.shift(this._bBox.end - canvas.end);\n    }\n  },\n  getLabels: function getLabels() {\n    return this.labels;\n  },\n  value: function value() {\n    return this.labels[0].getData().value;\n  },\n  getInitialPosition: function getInitialPosition() {\n    return this._initialPosition;\n  },\n  _changeBoxWidth: function _changeBoxWidth(width) {\n    this._bBox.end += width;\n    this._bBox.width += width;\n  }\n};\n\nfunction getLegendFields(name) {\n  return {\n    nameField: name + \"Name\",\n    colorField: name + \"Color\",\n    indexField: name + \"Index\"\n  };\n}\n\nfunction getLegendSettings(legendDataField) {\n  var formatObjectFields = getLegendFields(legendDataField);\n  return {\n    getFormatObject: function getFormatObject(data) {\n      var res = {};\n      res[formatObjectFields.indexField] = data.id;\n      res[formatObjectFields.colorField] = data.states.normal.fill;\n      res[formatObjectFields.nameField] = data.text;\n      return res;\n    },\n    textField: formatObjectFields.nameField\n  };\n}\n\nfunction checkOverlapping(firstRect, secondRect) {\n  return (firstRect.x <= secondRect.x && secondRect.x <= firstRect.x + firstRect.width || firstRect.x >= secondRect.x && firstRect.x <= secondRect.x + secondRect.width) && (firstRect.y <= secondRect.y && secondRect.y <= firstRect.y + firstRect.height || firstRect.y >= secondRect.y && firstRect.y <= secondRect.y + secondRect.height);\n}\n\nvar overlapping = {\n  resolveLabelOverlappingInOneDirection: resolveLabelOverlappingInOneDirection\n};\nexports.overlapping = overlapping;\n\nvar BaseChart = _base_widget.default.inherit({\n  _eventsMap: {\n    onSeriesClick: {\n      name: \"seriesClick\"\n    },\n    onPointClick: {\n      name: \"pointClick\"\n    },\n    onArgumentAxisClick: {\n      name: \"argumentAxisClick\"\n    },\n    onLegendClick: {\n      name: \"legendClick\"\n    },\n    onSeriesSelectionChanged: {\n      name: \"seriesSelectionChanged\"\n    },\n    onPointSelectionChanged: {\n      name: \"pointSelectionChanged\"\n    },\n    onSeriesHoverChanged: {\n      name: \"seriesHoverChanged\"\n    },\n    onPointHoverChanged: {\n      name: \"pointHoverChanged\"\n    },\n    onDone: {\n      name: \"done\"\n    },\n    onZoomStart: {\n      name: \"zoomStart\"\n    },\n    onZoomEnd: {\n      name: \"zoomEnd\"\n    }\n  },\n  _fontFields: [\"legend.\" + FONT, \"legend.title.\" + FONT, \"legend.title.subtitle.\" + FONT, \"commonSeriesSettings.label.\" + FONT],\n  _rootClassPrefix: \"dxc\",\n  _rootClass: \"dxc-chart\",\n  _initialChanges: [\"INIT\"],\n  _themeDependentChanges: [\"REFRESH_SERIES_REINIT\"],\n  _getThemeManagerOptions: function _getThemeManagerOptions() {\n    var themeOptions = this.callBase.apply(this, arguments);\n    themeOptions.options = this.option();\n    return themeOptions;\n  },\n  _createThemeManager: function _createThemeManager() {\n    var chartOption = this.option();\n    var themeManager = new _chart_theme_manager.ThemeManager(this._getThemeManagerOptions());\n    themeManager.setTheme(chartOption.theme, chartOption.rtlEnabled);\n    return themeManager;\n  },\n  _initCore: function _initCore() {\n    var that = this;\n    that._canvasClipRect = that._renderer.clipRect();\n\n    that._createHtmlStructure();\n\n    that._createLegend();\n\n    that._createTracker();\n\n    that._needHandleRenderComplete = true;\n    that.layoutManager = new _layout_manager.LayoutManager();\n\n    that._createScrollBar();\n\n    _events_engine.default.on(that._$element, \"contextmenu\", function (event) {\n      if ((0, _index.isTouchEvent)(event) || (0, _index.isPointerEvent)(event)) {\n        event.preventDefault();\n      }\n    });\n\n    _events_engine.default.on(that._$element, \"MSHoldVisual\", function (event) {\n      event.preventDefault();\n    });\n  },\n  _getLayoutItems: _common.noop,\n  _layoutManagerOptions: function _layoutManagerOptions() {\n    return this._themeManager.getOptions(\"adaptiveLayout\");\n  },\n  _reinit: function _reinit() {\n    var that = this;\n    (0, _utils.setCanvasValues)(that._canvas);\n\n    that._reinitAxes();\n\n    that._requestChange([\"DATA_SOURCE\", \"DATA_INIT\", \"CORRECT_AXIS\", \"FULL_RENDER\"]);\n  },\n  _correctAxes: _common.noop,\n  _createHtmlStructure: function _createHtmlStructure() {\n    var that = this;\n    var renderer = that._renderer;\n    var root = renderer.root;\n\n    var createConstantLinesGroup = function createConstantLinesGroup() {\n      return renderer.g().attr({\n        \"class\": \"dxc-constant-lines-group\"\n      }).linkOn(root, \"constant-lines\");\n    };\n\n    that._constantLinesGroup = {\n      dispose: function dispose() {\n        this.under.dispose();\n        this.above.dispose();\n      },\n      linkOff: function linkOff() {\n        this.under.linkOff();\n        this.above.linkOff();\n      },\n      clear: function clear() {\n        this.under.linkRemove().clear();\n        this.above.linkRemove().clear();\n      },\n      linkAppend: function linkAppend() {\n        this.under.linkAppend();\n        this.above.linkAppend();\n      }\n    };\n    that._backgroundRect = renderer.rect().attr({\n      fill: \"gray\",\n      opacity: 1e-4\n    }).append(root);\n    that._panesBackgroundGroup = renderer.g().attr({\n      \"class\": \"dxc-background\"\n    }).append(root);\n    that._stripsGroup = renderer.g().attr({\n      \"class\": \"dxc-strips-group\"\n    }).linkOn(root, \"strips\");\n    that._gridGroup = renderer.g().attr({\n      \"class\": \"dxc-grids-group\"\n    }).linkOn(root, \"grids\");\n    that._panesBorderGroup = renderer.g().attr({\n      \"class\": \"dxc-border\"\n    }).linkOn(root, \"border\");\n    that._axesGroup = renderer.g().attr({\n      \"class\": \"dxc-axes-group\"\n    }).linkOn(root, \"axes\");\n    that._labelAxesGroup = renderer.g().attr({\n      \"class\": \"dxc-strips-labels-group\"\n    }).linkOn(root, \"strips-labels\");\n    that._constantLinesGroup.under = createConstantLinesGroup();\n    that._seriesGroup = renderer.g().attr({\n      \"class\": \"dxc-series-group\"\n    }).linkOn(root, \"series\");\n    that._constantLinesGroup.above = createConstantLinesGroup();\n    that._scaleBreaksGroup = renderer.g().attr({\n      \"class\": \"dxc-scale-breaks\"\n    }).linkOn(root, \"scale-breaks\");\n    that._labelsGroup = renderer.g().attr({\n      \"class\": \"dxc-labels-group\"\n    }).linkOn(root, \"labels\");\n    that._crosshairCursorGroup = renderer.g().attr({\n      \"class\": \"dxc-crosshair-cursor\"\n    }).linkOn(root, \"crosshair\");\n    that._legendGroup = renderer.g().attr({\n      \"class\": \"dxc-legend\",\n      \"clip-path\": that._getCanvasClipRectID()\n    }).linkOn(root, \"legend\").linkAppend(root).enableLinks();\n    that._scrollBarGroup = renderer.g().attr({\n      \"class\": \"dxc-scroll-bar\"\n    }).linkOn(root, \"scroll-bar\");\n  },\n  _disposeObjectsInArray: function _disposeObjectsInArray(propName, fieldNames) {\n    (0, _iterator.each)(this[propName] || [], function (_, item) {\n      if (fieldNames && item) {\n        (0, _iterator.each)(fieldNames, function (_, field) {\n          item[field] && item[field].dispose();\n        });\n      } else {\n        item && item.dispose();\n      }\n    });\n    this[propName] = null;\n  },\n  _disposeCore: function _disposeCore() {\n    var that = this;\n\n    var disposeObject = function disposeObject(propName) {\n      if (that[propName]) {\n        that[propName].dispose();\n        that[propName] = null;\n      }\n    };\n\n    var unlinkGroup = function unlinkGroup(name) {\n      that[name].linkOff();\n    };\n\n    var disposeObjectsInArray = this._disposeObjectsInArray;\n\n    that._renderer.stopAllAnimations();\n\n    disposeObjectsInArray.call(that, \"series\");\n    disposeObject(\"_tracker\");\n    disposeObject(\"_crosshair\");\n    that.layoutManager = that._userOptions = that._canvas = that._groupsData = null;\n    unlinkGroup(\"_stripsGroup\");\n    unlinkGroup(\"_gridGroup\");\n    unlinkGroup(\"_axesGroup\");\n    unlinkGroup(\"_constantLinesGroup\");\n    unlinkGroup(\"_labelAxesGroup\");\n    unlinkGroup(\"_panesBorderGroup\");\n    unlinkGroup(\"_seriesGroup\");\n    unlinkGroup(\"_labelsGroup\");\n    unlinkGroup(\"_crosshairCursorGroup\");\n    unlinkGroup(\"_legendGroup\");\n    unlinkGroup(\"_scrollBarGroup\");\n    unlinkGroup(\"_scaleBreaksGroup\");\n    disposeObject(\"_canvasClipRect\");\n    disposeObject(\"_panesBackgroundGroup\");\n    disposeObject(\"_backgroundRect\");\n    disposeObject(\"_stripsGroup\");\n    disposeObject(\"_gridGroup\");\n    disposeObject(\"_axesGroup\");\n    disposeObject(\"_constantLinesGroup\");\n    disposeObject(\"_labelAxesGroup\");\n    disposeObject(\"_panesBorderGroup\");\n    disposeObject(\"_seriesGroup\");\n    disposeObject(\"_labelsGroup\");\n    disposeObject(\"_crosshairCursorGroup\");\n    disposeObject(\"_legendGroup\");\n    disposeObject(\"_scrollBarGroup\");\n    disposeObject(\"_scaleBreaksGroup\");\n  },\n  _getAnimationOptions: function _getAnimationOptions() {\n    return this._themeManager.getOptions(\"animation\");\n  },\n  _getDefaultSize: function _getDefaultSize() {\n    return {\n      width: 400,\n      height: 400\n    };\n  },\n  _getOption: function _getOption(name) {\n    return this._themeManager.getOptions(name);\n  },\n  _applySize: function _applySize(rect) {\n    this._rect = rect.slice();\n\n    if (!this._changes.has(\"FULL_RENDER\")) {\n      this._processRefreshData(RESIZE_REFRESH_ACTION);\n    }\n  },\n  _resize: function _resize() {\n    this._doRender(this.__renderOptions || {\n      animate: false,\n      isResize: true\n    });\n  },\n  _trackerType: \"ChartTracker\",\n  _createTracker: function _createTracker() {\n    var that = this;\n    that._tracker = new trackerModule[that._trackerType]({\n      seriesGroup: that._seriesGroup,\n      renderer: that._renderer,\n      tooltip: that._tooltip,\n      legend: that._legend,\n      eventTrigger: that._eventTrigger\n    });\n  },\n  _getTrackerSettings: function _getTrackerSettings() {\n    return (0, _extend.extend)({\n      chart: this\n    }, this._getSelectionModes());\n  },\n  _getSelectionModes: function _getSelectionModes() {\n    var themeManager = this._themeManager;\n    return {\n      seriesSelectionMode: themeManager.getOptions(\"seriesSelectionMode\"),\n      pointSelectionMode: themeManager.getOptions(\"pointSelectionMode\")\n    };\n  },\n  _updateTracker: function _updateTracker(trackerCanvases) {\n    var that = this;\n\n    that._tracker.update(that._getTrackerSettings());\n\n    that._tracker.setCanvases({\n      left: 0,\n      right: that._canvas.width,\n      top: 0,\n      bottom: that._canvas.height\n    }, trackerCanvases);\n  },\n  _createCanvasFromRect: function _createCanvasFromRect(rect) {\n    var currentCanvas = this._canvas;\n    return (0, _utils.setCanvasValues)({\n      left: rect[0],\n      top: rect[1],\n      right: currentCanvas.width - rect[2],\n      bottom: currentCanvas.height - rect[3],\n      width: currentCanvas.width,\n      height: currentCanvas.height\n    });\n  },\n  _doRender: function _doRender(_options) {\n    var that = this;\n\n    if (0 === that._canvas.width && 0 === that._canvas.height) {\n      return;\n    }\n\n    that._resetIsReady();\n\n    var drawOptions = that._prepareDrawOptions(_options);\n\n    var recreateCanvas = drawOptions.recreateCanvas;\n\n    that._preserveOriginalCanvas();\n\n    if (recreateCanvas) {\n      that.__currentCanvas = that._canvas;\n    } else {\n      that._canvas = that.__currentCanvas;\n    }\n\n    recreateCanvas && that._updateCanvasClipRect(that._canvas);\n    this._canvas = this._createCanvasFromRect(this._rect);\n\n    that._renderer.stopAllAnimations(true);\n\n    that._cleanGroups();\n\n    var startTime = new Date();\n\n    that._renderElements(drawOptions);\n\n    that._lastRenderingTime = new Date() - startTime;\n  },\n  _preserveOriginalCanvas: function _preserveOriginalCanvas() {\n    this.__originalCanvas = this._canvas;\n    this._canvas = (0, _extend.extend)({}, this._canvas);\n  },\n  _layoutAxes: _common.noop,\n  _renderElements: function _renderElements(drawOptions) {\n    var that = this;\n\n    var preparedOptions = that._prepareToRender(drawOptions);\n\n    var isRotated = that._isRotated();\n\n    var isLegendInside = that._isLegendInside();\n\n    var trackerCanvases = [];\n    (0, _extend.extend)({}, that._canvas);\n    var argBusinessRange;\n    var zoomMinArg;\n    var zoomMaxArg;\n\n    that._renderer.lock();\n\n    if (drawOptions.drawLegend && that._legend) {\n      that._legendGroup.linkAppend();\n    }\n\n    that.layoutManager.setOptions(that._layoutManagerOptions());\n\n    var layoutTargets = that._getLayoutTargets();\n\n    this._layoutAxes(function (needSpace) {\n      var axisDrawOptions = needSpace ? (0, _extend.extend)({}, drawOptions, {\n        animate: false\n      }) : drawOptions;\n\n      var canvas = that._renderAxes(axisDrawOptions, preparedOptions);\n\n      that._shrinkAxes(needSpace, canvas);\n    });\n\n    that._applyClipRects(preparedOptions);\n\n    that._appendSeriesGroups();\n\n    that._createCrosshairCursor();\n\n    layoutTargets.forEach(function (_ref) {\n      var canvas = _ref.canvas;\n      trackerCanvases.push({\n        left: canvas.left,\n        right: canvas.width - canvas.right,\n        top: canvas.top,\n        bottom: canvas.height - canvas.bottom\n      });\n    });\n\n    if (that._scrollBar) {\n      argBusinessRange = that._argumentAxes[0].getTranslator().getBusinessRange();\n\n      if (\"discrete\" === argBusinessRange.axisType && argBusinessRange.categories && argBusinessRange.categories.length <= 1 || \"discrete\" !== argBusinessRange.axisType && argBusinessRange.min === argBusinessRange.max) {\n        zoomMinArg = zoomMaxArg = void 0;\n      } else {\n        zoomMinArg = argBusinessRange.minVisible;\n        zoomMaxArg = argBusinessRange.maxVisible;\n      }\n\n      that._scrollBar.init(argBusinessRange, !that._argumentAxes[0].getOptions().valueMarginsEnabled).setPosition(zoomMinArg, zoomMaxArg);\n    }\n\n    that._updateTracker(trackerCanvases);\n\n    that._updateLegendPosition(drawOptions, isLegendInside);\n\n    that._applyPointMarkersAutoHiding();\n\n    that._renderSeries(drawOptions, isRotated, isLegendInside);\n\n    that._renderer.unlock();\n  },\n  _updateLegendPosition: _common.noop,\n  _createCrosshairCursor: _common.noop,\n  _appendSeriesGroups: function _appendSeriesGroups() {\n    this._seriesGroup.linkAppend();\n\n    this._labelsGroup.linkAppend();\n\n    this._appendAdditionalSeriesGroups();\n  },\n  _renderSeries: function _renderSeries(drawOptions, isRotated, isLegendInside) {\n    this._calculateSeriesLayout(drawOptions, isRotated);\n\n    this._renderSeriesElements(drawOptions, isLegendInside);\n  },\n  _calculateSeriesLayout: function _calculateSeriesLayout(drawOptions, isRotated) {\n    drawOptions.hideLayoutLabels = this.layoutManager.needMoreSpaceForPanesCanvas(this._getLayoutTargets(), isRotated) && !this._themeManager.getOptions(\"adaptiveLayout\").keepLabels;\n\n    this._updateSeriesDimensions(drawOptions);\n  },\n  _getArgFilter: function _getArgFilter() {\n    return function () {\n      return true;\n    };\n  },\n  _getValFilter: function _getValFilter(series) {\n    return function () {\n      return true;\n    };\n  },\n  _getPointsToAnimation: function _getPointsToAnimation(series) {\n    var _this = this;\n\n    var argViewPortFilter = this._getArgFilter();\n\n    return series.map(function (s) {\n      var valViewPortFilter = _this._getValFilter(s);\n\n      return s.getPoints().filter(function (p) {\n        return p.getOptions().visible && argViewPortFilter(p.argument) && (valViewPortFilter(p.getMinValue(true)) || valViewPortFilter(p.getMaxValue(true)));\n      }).length;\n    });\n  },\n  _renderSeriesElements: function _renderSeriesElements(drawOptions, isLegendInside) {\n    var that = this;\n    var i;\n    var series = that.series;\n    var singleSeries;\n    var seriesLength = series.length;\n\n    var resolveLabelOverlapping = that._themeManager.getOptions(\"resolveLabelOverlapping\");\n\n    var pointsToAnimation = that._getPointsToAnimation(series);\n\n    for (i = 0; i < seriesLength; i++) {\n      singleSeries = series[i];\n\n      that._applyExtraSettings(singleSeries, drawOptions);\n\n      singleSeries.draw(drawOptions.animate && pointsToAnimation[i] <= drawOptions.animationPointsLimit && that._renderer.animationEnabled(), drawOptions.hideLayoutLabels, that._getLegendCallBack(singleSeries));\n    }\n\n    if (\"none\" === resolveLabelOverlapping) {\n      that._adjustSeriesLabels(false);\n    } else {\n      that._locateLabels(resolveLabelOverlapping);\n    }\n\n    that._renderTrackers(isLegendInside);\n\n    that._tracker.repairTooltip();\n\n    that._renderExtraElements();\n\n    that._clearCanvas();\n\n    that._drawn();\n\n    that._renderCompleteHandler();\n  },\n  _locateLabels: function _locateLabels(resolveLabelOverlapping) {\n    this._resolveLabelOverlapping(resolveLabelOverlapping);\n  },\n  _renderExtraElements: function _renderExtraElements() {},\n  _clearCanvas: function _clearCanvas() {\n    this._canvas = this.__originalCanvas;\n  },\n  _resolveLabelOverlapping: function _resolveLabelOverlapping(resolveLabelOverlapping) {\n    var func;\n\n    switch (resolveLabelOverlapping) {\n      case \"stack\":\n        func = this._resolveLabelOverlappingStack;\n        break;\n\n      case \"hide\":\n        func = this._resolveLabelOverlappingHide;\n        break;\n\n      case \"shift\":\n        func = this._resolveLabelOverlappingShift;\n    }\n\n    return (0, _type.isFunction)(func) && func.call(this);\n  },\n  _getVisibleSeries: function _getVisibleSeries() {\n    return (0, _common.grep)(this.getAllSeries(), function (series) {\n      return series.isVisible();\n    });\n  },\n  _resolveLabelOverlappingHide: function _resolveLabelOverlappingHide() {\n    var labels = [];\n    var currentLabel;\n    var nextLabel;\n    var currentLabelRect;\n    var nextLabelRect;\n    var i;\n    var j;\n    var points;\n\n    var series = this._getVisibleSeries();\n\n    for (i = 0; i < series.length; i++) {\n      points = series[i].getVisiblePoints();\n\n      for (j = 0; j < points.length; j++) {\n        labels.push.apply(labels, points[j].getLabels());\n      }\n    }\n\n    for (i = 0; i < labels.length; i++) {\n      currentLabel = labels[i];\n\n      if (!currentLabel.isVisible()) {\n        continue;\n      }\n\n      currentLabelRect = currentLabel.getBoundingRect();\n\n      for (j = i + 1; j < labels.length; j++) {\n        nextLabel = labels[j];\n        nextLabelRect = nextLabel.getBoundingRect();\n\n        if (checkOverlapping(currentLabelRect, nextLabelRect)) {\n          nextLabel.draw(false);\n        }\n      }\n    }\n  },\n  _cleanGroups: function _cleanGroups() {\n    var that = this;\n\n    that._stripsGroup.linkRemove().clear();\n\n    that._gridGroup.linkRemove().clear();\n\n    that._axesGroup.linkRemove().clear();\n\n    that._constantLinesGroup.above.clear();\n\n    that._labelAxesGroup.linkRemove().clear();\n\n    that._labelsGroup.linkRemove().clear();\n\n    that._crosshairCursorGroup.linkRemove().clear();\n\n    that._scaleBreaksGroup.linkRemove().clear();\n  },\n  _allowLegendInsidePosition: function _allowLegendInsidePosition() {\n    return false;\n  },\n  _createLegend: function _createLegend() {\n    var that = this;\n    var legendSettings = getLegendSettings(that._legendDataField);\n    that._legend = new _legend.Legend({\n      renderer: that._renderer,\n      widget: that,\n      group: that._legendGroup,\n      backgroundClass: \"dxc-border\",\n      itemGroupClass: \"dxc-item\",\n      titleGroupClass: \"dxc-title\",\n      textField: legendSettings.textField,\n      getFormatObject: legendSettings.getFormatObject,\n      allowInsidePosition: that._allowLegendInsidePosition()\n    });\n\n    that._updateLegend();\n\n    that._layout.add(that._legend);\n  },\n  _updateLegend: function _updateLegend() {\n    var that = this;\n    var themeManager = that._themeManager;\n    var legendOptions = themeManager.getOptions(\"legend\");\n\n    var legendData = that._getLegendData();\n\n    legendOptions.containerBackgroundColor = themeManager.getOptions(\"containerBackgroundColor\");\n    legendOptions._incidentOccurred = that._incidentOccurred;\n\n    that._legend.update(legendData, legendOptions, themeManager.theme(\"legend\").title);\n\n    this._change([\"LAYOUT\"]);\n  },\n  _prepareDrawOptions: function _prepareDrawOptions(drawOptions) {\n    var animationOptions = this._getAnimationOptions();\n\n    var options = (0, _extend.extend)({}, {\n      force: false,\n      adjustAxes: true,\n      drawLegend: true,\n      drawTitle: true,\n      animate: animationOptions.enabled,\n      animationPointsLimit: animationOptions.maxPointCountSupported\n    }, drawOptions, this.__renderOptions);\n\n    if (!(0, _type.isDefined)(options.recreateCanvas)) {\n      options.recreateCanvas = options.adjustAxes && options.drawLegend && options.drawTitle;\n    }\n\n    return options;\n  },\n  _processRefreshData: function _processRefreshData(newRefreshAction) {\n    var currentRefreshActionPosition = (0, _array.inArray)(this._currentRefreshData, ACTIONS_BY_PRIORITY);\n    var newRefreshActionPosition = (0, _array.inArray)(newRefreshAction, ACTIONS_BY_PRIORITY);\n\n    if (!this._currentRefreshData || currentRefreshActionPosition >= 0 && newRefreshActionPosition < currentRefreshActionPosition) {\n      this._currentRefreshData = newRefreshAction;\n    }\n\n    this._requestChange([\"REFRESH\"]);\n  },\n  _getLegendData: function _getLegendData() {\n    return (0, _utils.map)(this._getLegendTargets(), function (item) {\n      var legendData = item.legendData;\n      var style = item.getLegendStyles;\n      var opacity = style.normal.opacity;\n\n      if (!item.visible) {\n        if (!(0, _type.isDefined)(opacity) || opacity > DEFAULT_OPACITY) {\n          opacity = DEFAULT_OPACITY;\n        }\n\n        legendData.textOpacity = DEFAULT_OPACITY;\n      }\n\n      var opacityStyle = {\n        opacity: opacity\n      };\n      legendData.states = {\n        hover: (0, _extend.extend)({}, style.hover, opacityStyle),\n        selection: (0, _extend.extend)({}, style.selection, opacityStyle),\n        normal: (0, _extend.extend)({}, style.normal, opacityStyle)\n      };\n      return legendData;\n    });\n  },\n  _getLegendOptions: function _getLegendOptions(item) {\n    return {\n      legendData: {\n        text: item[this._legendItemTextField],\n        id: item.index,\n        visible: true\n      },\n      getLegendStyles: item.getLegendStyles(),\n      visible: item.isVisible()\n    };\n  },\n  _disposeSeries: function _disposeSeries(seriesIndex) {\n    var _that$series;\n\n    var that = this;\n\n    if (that.series) {\n      if ((0, _type.isDefined)(seriesIndex)) {\n        that.series[seriesIndex].dispose();\n        that.series.splice(seriesIndex, 1);\n      } else {\n        (0, _iterator.each)(that.series, function (_, s) {\n          return s.dispose();\n        });\n        that.series.length = 0;\n      }\n    }\n\n    if (!(null === (_that$series = that.series) || void 0 === _that$series ? void 0 : _that$series.length)) {\n      that.series = [];\n    }\n  },\n  _disposeSeriesFamilies: function _disposeSeriesFamilies() {\n    var that = this;\n    (0, _iterator.each)(that.seriesFamilies || [], function (_, family) {\n      family.dispose();\n    });\n    that.seriesFamilies = null;\n    that._needHandleRenderComplete = true;\n  },\n  _optionChanged: function _optionChanged(arg) {\n    this._themeManager.resetOptions(arg.name);\n\n    this.callBase.apply(this, arguments);\n  },\n  _applyChanges: function _applyChanges() {\n    var that = this;\n\n    that._themeManager.update(that._options.silent());\n\n    that.callBase.apply(that, arguments);\n  },\n  _optionChangesMap: {\n    animation: \"ANIMATION\",\n    dataSource: \"DATA_SOURCE\",\n    palette: \"PALETTE\",\n    paletteExtensionMode: \"PALETTE\",\n    legend: \"FORCE_DATA_INIT\",\n    seriesTemplate: \"FORCE_DATA_INIT\",\n    \"export\": \"FORCE_RENDER\",\n    valueAxis: \"AXES_AND_PANES\",\n    argumentAxis: \"AXES_AND_PANES\",\n    commonAxisSettings: \"AXES_AND_PANES\",\n    panes: \"AXES_AND_PANES\",\n    commonPaneSettings: \"AXES_AND_PANES\",\n    defaultPane: \"AXES_AND_PANES\",\n    containerBackgroundColor: \"AXES_AND_PANES\",\n    rotated: \"ROTATED\",\n    autoHidePointMarkers: \"REFRESH_SERIES_REINIT\",\n    customizePoint: \"REFRESH_SERIES_REINIT\",\n    customizeLabel: \"REFRESH_SERIES_REINIT\",\n    scrollBar: \"SCROLL_BAR\"\n  },\n  _optionChangesOrder: [\"ROTATED\", \"PALETTE\", \"REFRESH_SERIES_REINIT\", \"AXES_AND_PANES\", \"INIT\", \"REINIT\", \"DATA_SOURCE\", \"REFRESH_SERIES_DATA_INIT\", \"DATA_INIT\", \"FORCE_DATA_INIT\", \"REFRESH_AXES\", \"CORRECT_AXIS\"],\n  _customChangesOrder: [\"ANIMATION\", \"REFRESH_SERIES_FAMILIES\", \"FORCE_FIRST_DRAWING\", \"FORCE_DRAWING\", \"FORCE_RENDER\", \"VISUAL_RANGE\", \"SCROLL_BAR\", \"REINIT\", \"REFRESH\", \"FULL_RENDER\"],\n  _change_ANIMATION: function _change_ANIMATION() {\n    this._renderer.updateAnimationOptions(this._getAnimationOptions());\n  },\n  _change_DATA_SOURCE: function _change_DATA_SOURCE() {\n    this._needHandleRenderComplete = true;\n\n    this._updateDataSource();\n  },\n  _change_PALETTE: function _change_PALETTE() {\n    this._themeManager.updatePalette();\n\n    this._refreshSeries(\"DATA_INIT\");\n  },\n  _change_REFRESH_SERIES_DATA_INIT: function _change_REFRESH_SERIES_DATA_INIT() {\n    this._refreshSeries(\"DATA_INIT\");\n  },\n  _change_DATA_INIT: function _change_DATA_INIT() {\n    if ((!this.series || this.needToPopulateSeries) && !this._changes.has(\"FORCE_DATA_INIT\")) {\n      this._dataInit();\n    }\n  },\n  _change_FORCE_DATA_INIT: function _change_FORCE_DATA_INIT() {\n    this._dataInit();\n  },\n  _change_REFRESH_SERIES_FAMILIES: function _change_REFRESH_SERIES_FAMILIES() {\n    this._processSeriesFamilies();\n\n    this._populateBusinessRange();\n\n    this._processRefreshData(FORCE_RENDER_REFRESH_ACTION);\n  },\n  _change_FORCE_RENDER: function _change_FORCE_RENDER() {\n    this._processRefreshData(FORCE_RENDER_REFRESH_ACTION);\n  },\n  _change_AXES_AND_PANES: function _change_AXES_AND_PANES() {\n    this._refreshSeries(\"INIT\");\n  },\n  _change_ROTATED: function _change_ROTATED() {\n    this._createScrollBar();\n\n    this._refreshSeries(\"INIT\");\n  },\n  _change_REFRESH_SERIES_REINIT: function _change_REFRESH_SERIES_REINIT() {\n    this._refreshSeries(\"INIT\");\n  },\n  _change_REFRESH_AXES: function _change_REFRESH_AXES() {\n    var that = this;\n    (0, _utils.setCanvasValues)(that._canvas);\n\n    that._reinitAxes();\n\n    that._requestChange([\"CORRECT_AXIS\", \"FULL_RENDER\"]);\n  },\n  _change_SCROLL_BAR: function _change_SCROLL_BAR() {\n    this._createScrollBar();\n\n    this._processRefreshData(FORCE_RENDER_REFRESH_ACTION);\n  },\n  _change_REINIT: function _change_REINIT() {\n    this._processRefreshData(REINIT_REFRESH_ACTION);\n  },\n  _change_FORCE_DRAWING: function _change_FORCE_DRAWING() {\n    this._resetComponentsAnimation();\n  },\n  _change_FORCE_FIRST_DRAWING: function _change_FORCE_FIRST_DRAWING() {\n    this._resetComponentsAnimation(true);\n  },\n  _resetComponentsAnimation: function _resetComponentsAnimation(isFirstDrawing) {\n    this.series.forEach(function (s) {\n      s.resetApplyingAnimation(isFirstDrawing);\n    });\n\n    this._resetAxesAnimation(isFirstDrawing);\n  },\n  _resetAxesAnimation: _common.noop,\n  _refreshSeries: function _refreshSeries(actionName) {\n    this.needToPopulateSeries = true;\n\n    this._requestChange([actionName]);\n  },\n  _change_CORRECT_AXIS: function _change_CORRECT_AXIS() {\n    this._correctAxes();\n  },\n  _doRefresh: function _doRefresh() {\n    var methodName = this._currentRefreshData;\n\n    if (methodName) {\n      this._currentRefreshData = null;\n\n      this._renderer.stopAllAnimations(true);\n\n      this[methodName]();\n    }\n  },\n  _updateCanvasClipRect: function _updateCanvasClipRect(canvas) {\n    var that = this;\n    var width = Math.max(canvas.width - canvas.left - canvas.right, 0);\n    var height = Math.max(canvas.height - canvas.top - canvas.bottom, 0);\n\n    that._canvasClipRect.attr({\n      x: canvas.left,\n      y: canvas.top,\n      width: width,\n      height: height\n    });\n\n    that._backgroundRect.attr({\n      x: canvas.left,\n      y: canvas.top,\n      width: width,\n      height: height\n    });\n  },\n  _getCanvasClipRectID: function _getCanvasClipRectID() {\n    return this._canvasClipRect.id;\n  },\n  _dataSourceChangedHandler: function _dataSourceChangedHandler() {\n    if (this._changes.has(\"INIT\")) {\n      this._requestChange([\"DATA_INIT\"]);\n    } else {\n      this._requestChange([\"FORCE_DATA_INIT\"]);\n    }\n  },\n  _dataInit: function _dataInit() {\n    this._dataSpecificInit(true);\n  },\n  _processSingleSeries: function _processSingleSeries(singleSeries) {\n    singleSeries.createPoints(false);\n  },\n  _handleSeriesDataUpdated: function _handleSeriesDataUpdated() {\n    var _this2 = this;\n\n    if (this._getVisibleSeries().some(function (s) {\n      return s.useAggregation();\n    })) {\n      this._populateMarginOptions();\n    }\n\n    this.series.forEach(function (s) {\n      return _this2._processSingleSeries(s);\n    }, this);\n  },\n  _dataSpecificInit: function _dataSpecificInit(needRedraw) {\n    var that = this;\n\n    if (!that.series || that.needToPopulateSeries) {\n      that.series = that._populateSeries();\n    }\n\n    that._repopulateSeries();\n\n    that._seriesPopulatedHandlerCore();\n\n    that._populateBusinessRange();\n\n    that._tracker.updateSeries(that.series, this._changes.has(\"INIT\"));\n\n    that._updateLegend();\n\n    if (needRedraw) {\n      this._requestChange([\"FULL_RENDER\"]);\n    }\n  },\n  _forceRender: function _forceRender() {\n    this._doRender({\n      force: true\n    });\n  },\n  _repopulateSeries: function _repopulateSeries() {\n    var that = this;\n    var themeManager = that._themeManager;\n\n    var data = that._dataSourceItems();\n\n    var dataValidatorOptions = themeManager.getOptions(\"dataPrepareSettings\");\n    var seriesTemplate = themeManager.getOptions(\"seriesTemplate\");\n\n    if (seriesTemplate) {\n      that._populateSeries(data);\n    }\n\n    that._groupSeries();\n\n    var parsedData = (0, _data_validator.validateData)(data, that._groupsData, that._incidentOccurred, dataValidatorOptions);\n    themeManager.resetPalette();\n    that.series.forEach(function (singleSeries) {\n      singleSeries.updateData(parsedData[singleSeries.getArgumentField()]);\n    });\n\n    that._handleSeriesDataUpdated();\n  },\n  _renderCompleteHandler: function _renderCompleteHandler() {\n    var that = this;\n    var allSeriesInited = true;\n\n    if (that._needHandleRenderComplete) {\n      (0, _iterator.each)(that.series, function (_, s) {\n        allSeriesInited = allSeriesInited && s.canRenderCompleteHandle();\n      });\n\n      if (allSeriesInited) {\n        that._needHandleRenderComplete = false;\n\n        that._eventTrigger(\"done\", {\n          target: that\n        });\n      }\n    }\n  },\n  _dataIsReady: function _dataIsReady() {\n    return (0, _type.isDefined)(this.option(\"dataSource\")) && this._dataIsLoaded();\n  },\n  _populateSeriesOptions: function _populateSeriesOptions(data) {\n    var that = this;\n    var themeManager = that._themeManager;\n    var seriesTemplate = themeManager.getOptions(\"seriesTemplate\");\n    var seriesOptions = seriesTemplate ? (0, _utils.processSeriesTemplate)(seriesTemplate, data || []) : that.option(\"series\");\n    var allSeriesOptions = _isArray(seriesOptions) ? seriesOptions : seriesOptions ? [seriesOptions] : [];\n\n    var extraOptions = that._getExtraOptions();\n\n    var particularSeriesOptions;\n    var seriesTheme;\n    var seriesThemes = [];\n\n    var seriesVisibilityChanged = function seriesVisibilityChanged(target) {\n      that._specialProcessSeries();\n\n      that._populateBusinessRange(target && target.getValueAxis(), true);\n\n      that._renderer.stopAllAnimations(true);\n\n      that._updateLegend();\n\n      that._requestChange([\"FULL_RENDER\"]);\n    };\n\n    for (var i = 0; i < allSeriesOptions.length; i++) {\n      particularSeriesOptions = (0, _extend.extend)(true, {}, allSeriesOptions[i], extraOptions);\n\n      if (!particularSeriesOptions.name) {\n        particularSeriesOptions.name = \"Series \" + (i + 1).toString();\n      }\n\n      particularSeriesOptions.rotated = that._isRotated();\n      particularSeriesOptions.customizePoint = themeManager.getOptions(\"customizePoint\");\n      particularSeriesOptions.customizeLabel = themeManager.getOptions(\"customizeLabel\");\n      particularSeriesOptions.visibilityChanged = seriesVisibilityChanged;\n      particularSeriesOptions.incidentOccurred = that._incidentOccurred;\n      seriesTheme = themeManager.getOptions(\"series\", particularSeriesOptions, allSeriesOptions.length);\n\n      if (that._checkPaneName(seriesTheme)) {\n        seriesThemes.push(seriesTheme);\n      }\n    }\n\n    return seriesThemes;\n  },\n  _populateSeries: function _populateSeries(data) {\n    var that = this;\n    var seriesBasis = [];\n    var incidentOccurred = that._incidentOccurred;\n\n    var seriesThemes = that._populateSeriesOptions(data);\n\n    var particularSeries;\n    var disposeSeriesFamilies = false;\n    that.needToPopulateSeries = false;\n    (0, _iterator.each)(seriesThemes, function (_, theme) {\n      var curSeries = that.series && that.series.filter(function (s) {\n        return s.name === theme.name && seriesBasis.map(function (sb) {\n          return sb.series;\n        }).indexOf(s) === -1;\n      })[0];\n\n      if (curSeries && curSeries.type === theme.type) {\n        seriesBasis.push({\n          series: curSeries,\n          options: theme\n        });\n      } else {\n        seriesBasis.push({\n          options: theme\n        });\n        disposeSeriesFamilies = true;\n      }\n    });\n\n    that._tracker.clearHover();\n\n    (0, _iterator.reverseEach)(that.series, function (index, series) {\n      if (!seriesBasis.some(function (s) {\n        return series === s.series;\n      })) {\n        that._disposeSeries(index);\n\n        disposeSeriesFamilies = true;\n      }\n    });\n    !disposeSeriesFamilies && (disposeSeriesFamilies = seriesBasis.some(function (sb) {\n      return sb.series.name !== seriesThemes[sb.series.index].name;\n    }));\n    that.series = [];\n    disposeSeriesFamilies && that._disposeSeriesFamilies();\n\n    that._themeManager.resetPalette();\n\n    var eventPipe = function eventPipe(data) {\n      that.series.forEach(function (currentSeries) {\n        currentSeries.notify(data);\n      });\n    };\n\n    (0, _iterator.each)(seriesBasis, function (_, basis) {\n      var seriesTheme = basis.options;\n      var renderSettings = {\n        commonSeriesModes: that._getSelectionModes(),\n        argumentAxis: that.getArgumentAxis(),\n        valueAxis: that._getValueAxis(seriesTheme.pane, seriesTheme.axis)\n      };\n\n      if (basis.series) {\n        particularSeries = basis.series;\n        particularSeries.updateOptions(seriesTheme, renderSettings);\n      } else {\n        particularSeries = new _base_series.Series((0, _extend.extend)({\n          renderer: that._renderer,\n          seriesGroup: that._seriesGroup,\n          labelsGroup: that._labelsGroup,\n          eventTrigger: that._eventTrigger,\n          eventPipe: eventPipe,\n          incidentOccurred: incidentOccurred\n        }, renderSettings), seriesTheme);\n      }\n\n      if (!particularSeries.isUpdated) {\n        incidentOccurred(\"E2101\", [seriesTheme.type]);\n      } else {\n        particularSeries.index = that.series.length;\n        that.series.push(particularSeries);\n      }\n    });\n    return that.series;\n  },\n  getStackedPoints: function getStackedPoints(point) {\n    var stackName = point.series.getStackName();\n    return this._getVisibleSeries().reduce(function (stackPoints, series) {\n      if (!(0, _type.isDefined)(series.getStackName()) || !(0, _type.isDefined)(stackName) || stackName === series.getStackName()) {\n        stackPoints = stackPoints.concat(series.getPointsByArg(point.argument));\n      }\n\n      return stackPoints;\n    }, []);\n  },\n  getAllSeries: function getAllSeries() {\n    return (this.series || []).slice();\n  },\n  getSeriesByName: function getSeriesByName(name) {\n    var found = null;\n    (0, _iterator.each)(this.series, function (i, singleSeries) {\n      if (singleSeries.name === name) {\n        found = singleSeries;\n        return false;\n      }\n    });\n    return found;\n  },\n  getSeriesByPos: function getSeriesByPos(pos) {\n    return (this.series || [])[pos];\n  },\n  clearSelection: function clearSelection() {\n    this._tracker.clearSelection();\n  },\n  hideTooltip: function hideTooltip() {\n    this._tracker._hideTooltip();\n  },\n  clearHover: function clearHover() {\n    this._tracker.clearHover();\n  },\n  render: function render(renderOptions) {\n    var that = this;\n    that.__renderOptions = renderOptions;\n    that.__forceRender = renderOptions && renderOptions.force;\n    that.callBase.apply(that, arguments);\n    that.__renderOptions = that.__forceRender = null;\n    return that;\n  },\n  refresh: function refresh() {\n    this._disposeSeries();\n\n    this._disposeSeriesFamilies();\n\n    this._requestChange([\"CONTAINER_SIZE\", \"REFRESH_SERIES_REINIT\"]);\n  },\n  _getMinSize: function _getMinSize() {\n    var adaptiveLayout = this._layoutManagerOptions();\n\n    return [adaptiveLayout.width, adaptiveLayout.height];\n  },\n  _change_REFRESH: function _change_REFRESH() {\n    if (!this._changes.has(\"INIT\")) {\n      this._doRefresh();\n    } else {\n      this._currentRefreshData = null;\n    }\n  },\n  _change_FULL_RENDER: function _change_FULL_RENDER() {\n    this._forceRender();\n  },\n  _change_INIT: function _change_INIT() {\n    this._reinit();\n  },\n  _stopCurrentHandling: function _stopCurrentHandling() {\n    this._tracker.stopCurrentHandling();\n  }\n});\n\nexports.BaseChart = BaseChart;\nREFRESH_SERIES_DATA_INIT_ACTION_OPTIONS.forEach(function (name) {\n  BaseChart.prototype._optionChangesMap[name] = \"REFRESH_SERIES_DATA_INIT\";\n});\nFORCE_RENDER_REFRESH_ACTION_OPTIONS.forEach(function (name) {\n  BaseChart.prototype._optionChangesMap[name] = \"FORCE_RENDER\";\n});\nREFRESH_SERIES_FAMILIES_ACTION_OPTIONS.forEach(function (name) {\n  BaseChart.prototype._optionChangesMap[name] = \"REFRESH_SERIES_FAMILIES\";\n});\nBaseChart.addPlugin(_export.plugin);\nBaseChart.addPlugin(_title.plugin);\nBaseChart.addPlugin(_data_source.plugin);\nBaseChart.addPlugin(_tooltip.plugin);\nBaseChart.addPlugin(_loading_indicator.plugin);\nvar _change_TITLE = BaseChart.prototype._change_TITLE;\n\nBaseChart.prototype._change_TITLE = function () {\n  _change_TITLE.apply(this, arguments);\n\n  this._change([\"FORCE_RENDER\"]);\n};","map":{"version":3,"sources":["E:/Monday.com/quickstart-react/node_modules/devextreme/viz/chart_components/base_chart.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","BaseChart","overlapping","_common","require","_events_engine","_interopRequireDefault","_type","_iterator","_extend","_array","_index","_base_widget","_legend","_data_validator","_base_series","_chart_theme_manager","_layout_manager","trackerModule","_interopRequireWildcard","_utils","_export","_title","_data_source","_tooltip","_loading_indicator","_getRequireWildcardCache","WeakMap","cache","__esModule","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","default","_isArray","Array","isArray","REINIT_REFRESH_ACTION","REINIT_DATA_SOURCE_REFRESH_ACTION","DATA_INIT_REFRESH_ACTION","FORCE_RENDER_REFRESH_ACTION","RESIZE_REFRESH_ACTION","ACTIONS_BY_PRIORITY","DEFAULT_OPACITY","REFRESH_SERIES_DATA_INIT_ACTION_OPTIONS","REFRESH_SERIES_FAMILIES_ACTION_OPTIONS","FORCE_RENDER_REFRESH_ACTION_OPTIONS","FONT","checkHeightRollingStock","rollingStocks","stubCanvas","canvasSize","end","start","size","forEach","rollingStock","getBoundingRect","width","findAndKillSmallValue","smallestObject","reduce","prev","index","value","getLabels","draw","checkStackOverlap","i","j","iLength","jLength","overlap","length","checkStacksOverlapping","resolveLabelOverlappingInOneDirection","points","canvas","isRotated","shiftFunction","customSorting","arguments","left","top","right","height","bottom","hasStackedSeries","p","series","isStackedSeries","isFullStackedSeries","l","isVisible","push","RollingStock","reverse","rollingStocksTmp","slice","sort","a","b","getInitialPosition","indexOf","prepareOverlapStacks","moveRollingStock","firstRolling","secondRolling","inTwoSides","firstRect","secondRect","oppositeOverlapping","oppositeStart","oppositeEnd","currentRollingStock","root","toChain","nextRollingStock","currentBBox","nextBBox","rollingStocksIsOut","setRollingStockInCanvas","label","bBox","x","y","endX","endY","labels","_bBox","_initialPosition","nextRollingStockBBox","shift","_changeBoxWidth","concat","shiftLength","each","coords","hideInsideLabel","getData","getLegendFields","name","nameField","colorField","indexField","getLegendSettings","legendDataField","formatObjectFields","getFormatObject","data","res","id","states","normal","fill","text","textField","checkOverlapping","inherit","_eventsMap","onSeriesClick","onPointClick","onArgumentAxisClick","onLegendClick","onSeriesSelectionChanged","onPointSelectionChanged","onSeriesHoverChanged","onPointHoverChanged","onDone","onZoomStart","onZoomEnd","_fontFields","_rootClassPrefix","_rootClass","_initialChanges","_themeDependentChanges","_getThemeManagerOptions","themeOptions","callBase","apply","options","option","_createThemeManager","chartOption","themeManager","ThemeManager","setTheme","theme","rtlEnabled","_initCore","that","_canvasClipRect","_renderer","clipRect","_createHtmlStructure","_createLegend","_createTracker","_needHandleRenderComplete","layoutManager","LayoutManager","_createScrollBar","on","_$element","event","isTouchEvent","isPointerEvent","preventDefault","_getLayoutItems","noop","_layoutManagerOptions","_themeManager","getOptions","_reinit","setCanvasValues","_canvas","_reinitAxes","_requestChange","_correctAxes","renderer","createConstantLinesGroup","g","attr","linkOn","_constantLinesGroup","dispose","under","above","linkOff","clear","linkRemove","linkAppend","_backgroundRect","rect","opacity","append","_panesBackgroundGroup","_stripsGroup","_gridGroup","_panesBorderGroup","_axesGroup","_labelAxesGroup","_seriesGroup","_scaleBreaksGroup","_labelsGroup","_crosshairCursorGroup","_legendGroup","_getCanvasClipRectID","enableLinks","_scrollBarGroup","_disposeObjectsInArray","propName","fieldNames","_","item","field","_disposeCore","disposeObject","unlinkGroup","disposeObjectsInArray","stopAllAnimations","_userOptions","_groupsData","_getAnimationOptions","_getDefaultSize","_getOption","_applySize","_rect","_changes","_processRefreshData","_resize","_doRender","__renderOptions","animate","isResize","_trackerType","_tracker","seriesGroup","tooltip","legend","eventTrigger","_eventTrigger","_getTrackerSettings","extend","chart","_getSelectionModes","seriesSelectionMode","pointSelectionMode","_updateTracker","trackerCanvases","update","setCanvases","_createCanvasFromRect","currentCanvas","_options","_resetIsReady","drawOptions","_prepareDrawOptions","recreateCanvas","_preserveOriginalCanvas","__currentCanvas","_updateCanvasClipRect","_cleanGroups","startTime","Date","_renderElements","_lastRenderingTime","__originalCanvas","_layoutAxes","preparedOptions","_prepareToRender","_isRotated","isLegendInside","_isLegendInside","argBusinessRange","zoomMinArg","zoomMaxArg","lock","drawLegend","setOptions","layoutTargets","_getLayoutTargets","needSpace","axisDrawOptions","_renderAxes","_shrinkAxes","_applyClipRects","_appendSeriesGroups","_createCrosshairCursor","_ref","_scrollBar","_argumentAxes","getTranslator","getBusinessRange","axisType","categories","min","max","minVisible","maxVisible","init","valueMarginsEnabled","setPosition","_updateLegendPosition","_applyPointMarkersAutoHiding","_renderSeries","unlock","_appendAdditionalSeriesGroups","_calculateSeriesLayout","_renderSeriesElements","hideLayoutLabels","needMoreSpaceForPanesCanvas","keepLabels","_updateSeriesDimensions","_getArgFilter","_getValFilter","_getPointsToAnimation","_this","argViewPortFilter","map","s","valViewPortFilter","getPoints","filter","visible","argument","getMinValue","getMaxValue","singleSeries","seriesLength","resolveLabelOverlapping","pointsToAnimation","_applyExtraSettings","animationPointsLimit","animationEnabled","_getLegendCallBack","_adjustSeriesLabels","_locateLabels","_renderTrackers","repairTooltip","_renderExtraElements","_clearCanvas","_drawn","_renderCompleteHandler","_resolveLabelOverlapping","func","_resolveLabelOverlappingStack","_resolveLabelOverlappingHide","_resolveLabelOverlappingShift","isFunction","_getVisibleSeries","grep","getAllSeries","currentLabel","nextLabel","currentLabelRect","nextLabelRect","getVisiblePoints","_allowLegendInsidePosition","legendSettings","_legendDataField","Legend","widget","group","backgroundClass","itemGroupClass","titleGroupClass","allowInsidePosition","_updateLegend","_layout","add","legendOptions","legendData","_getLegendData","containerBackgroundColor","_incidentOccurred","title","_change","animationOptions","force","adjustAxes","drawTitle","enabled","maxPointCountSupported","isDefined","newRefreshAction","currentRefreshActionPosition","inArray","_currentRefreshData","newRefreshActionPosition","_getLegendTargets","style","getLegendStyles","textOpacity","opacityStyle","hover","selection","_getLegendOptions","_legendItemTextField","_disposeSeries","seriesIndex","_that$series","splice","_disposeSeriesFamilies","seriesFamilies","family","_optionChanged","arg","resetOptions","_applyChanges","silent","_optionChangesMap","animation","dataSource","palette","paletteExtensionMode","seriesTemplate","valueAxis","argumentAxis","commonAxisSettings","panes","commonPaneSettings","defaultPane","rotated","autoHidePointMarkers","customizePoint","customizeLabel","scrollBar","_optionChangesOrder","_customChangesOrder","_change_ANIMATION","updateAnimationOptions","_change_DATA_SOURCE","_updateDataSource","_change_PALETTE","updatePalette","_refreshSeries","_change_REFRESH_SERIES_DATA_INIT","_change_DATA_INIT","needToPopulateSeries","_dataInit","_change_FORCE_DATA_INIT","_change_REFRESH_SERIES_FAMILIES","_processSeriesFamilies","_populateBusinessRange","_change_FORCE_RENDER","_change_AXES_AND_PANES","_change_ROTATED","_change_REFRESH_SERIES_REINIT","_change_REFRESH_AXES","_change_SCROLL_BAR","_change_REINIT","_change_FORCE_DRAWING","_resetComponentsAnimation","_change_FORCE_FIRST_DRAWING","isFirstDrawing","resetApplyingAnimation","_resetAxesAnimation","actionName","_change_CORRECT_AXIS","_doRefresh","methodName","Math","_dataSourceChangedHandler","_dataSpecificInit","_processSingleSeries","createPoints","_handleSeriesDataUpdated","_this2","some","useAggregation","_populateMarginOptions","needRedraw","_populateSeries","_repopulateSeries","_seriesPopulatedHandlerCore","updateSeries","_forceRender","_dataSourceItems","dataValidatorOptions","_groupSeries","parsedData","validateData","resetPalette","updateData","getArgumentField","allSeriesInited","canRenderCompleteHandle","target","_dataIsReady","_dataIsLoaded","_populateSeriesOptions","seriesOptions","processSeriesTemplate","allSeriesOptions","extraOptions","_getExtraOptions","particularSeriesOptions","seriesTheme","seriesThemes","seriesVisibilityChanged","_specialProcessSeries","getValueAxis","toString","visibilityChanged","incidentOccurred","_checkPaneName","seriesBasis","particularSeries","disposeSeriesFamilies","curSeries","sb","type","clearHover","reverseEach","eventPipe","currentSeries","notify","basis","renderSettings","commonSeriesModes","getArgumentAxis","_getValueAxis","pane","axis","updateOptions","Series","labelsGroup","isUpdated","getStackedPoints","point","stackName","getStackName","stackPoints","getPointsByArg","getSeriesByName","found","getSeriesByPos","pos","clearSelection","hideTooltip","_hideTooltip","render","renderOptions","__forceRender","refresh","_getMinSize","adaptiveLayout","_change_REFRESH","_change_FULL_RENDER","_change_INIT","_stopCurrentHandling","stopCurrentHandling","addPlugin","plugin","_change_TITLE"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/chart_components/base_chart.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.BaseChart = exports.overlapping = void 0;\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _base_widget = _interopRequireDefault(require(\"../core/base_widget\"));\r\nvar _legend = require(\"../components/legend\");\r\nvar _data_validator = require(\"../components/data_validator\");\r\nvar _base_series = require(\"../series/base_series\");\r\nvar _chart_theme_manager = require(\"../components/chart_theme_manager\");\r\nvar _layout_manager = require(\"./layout_manager\");\r\nvar trackerModule = _interopRequireWildcard(require(\"./tracker\"));\r\nvar _utils = require(\"../core/utils\");\r\nvar _export = require(\"../core/export\");\r\nvar _title = require(\"../core/title\");\r\nvar _data_source = require(\"../core/data_source\");\r\nvar _tooltip = require(\"../core/tooltip\");\r\nvar _loading_indicator = require(\"../core/loading_indicator\");\r\n\r\nfunction _getRequireWildcardCache() {\r\n    if (\"function\" !== typeof WeakMap) {\r\n        return null\r\n    }\r\n    var cache = new WeakMap;\r\n    _getRequireWildcardCache = function() {\r\n        return cache\r\n    };\r\n    return cache\r\n}\r\n\r\nfunction _interopRequireWildcard(obj) {\r\n    if (obj && obj.__esModule) {\r\n        return obj\r\n    }\r\n    if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\r\n        return {\r\n            \"default\": obj\r\n        }\r\n    }\r\n    var cache = _getRequireWildcardCache();\r\n    if (cache && cache.has(obj)) {\r\n        return cache.get(obj)\r\n    }\r\n    var newObj = {};\r\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\r\n    for (var key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\r\n            if (desc && (desc.get || desc.set)) {\r\n                Object.defineProperty(newObj, key, desc)\r\n            } else {\r\n                newObj[key] = obj[key]\r\n            }\r\n        }\r\n    }\r\n    newObj.default = obj;\r\n    if (cache) {\r\n        cache.set(obj, newObj)\r\n    }\r\n    return newObj\r\n}\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar _isArray = Array.isArray;\r\nvar REINIT_REFRESH_ACTION = \"_reinit\";\r\nvar REINIT_DATA_SOURCE_REFRESH_ACTION = \"_updateDataSource\";\r\nvar DATA_INIT_REFRESH_ACTION = \"_dataInit\";\r\nvar FORCE_RENDER_REFRESH_ACTION = \"_forceRender\";\r\nvar RESIZE_REFRESH_ACTION = \"_resize\";\r\nvar ACTIONS_BY_PRIORITY = [REINIT_REFRESH_ACTION, REINIT_DATA_SOURCE_REFRESH_ACTION, DATA_INIT_REFRESH_ACTION, FORCE_RENDER_REFRESH_ACTION, RESIZE_REFRESH_ACTION];\r\nvar DEFAULT_OPACITY = .3;\r\nvar REFRESH_SERIES_DATA_INIT_ACTION_OPTIONS = [\"series\", \"commonSeriesSettings\", \"dataPrepareSettings\", \"seriesSelectionMode\", \"pointSelectionMode\", \"synchronizeMultiAxes\", \"resolveLabelsOverlapping\"];\r\nvar REFRESH_SERIES_FAMILIES_ACTION_OPTIONS = [\"minBubbleSize\", \"maxBubbleSize\", \"barGroupPadding\", \"barGroupWidth\", \"negativesAsZeroes\", \"negativesAsZeros\"];\r\nvar FORCE_RENDER_REFRESH_ACTION_OPTIONS = [\"adaptiveLayout\", \"crosshair\", \"resolveLabelOverlapping\", \"adjustOnZoom\", \"stickyHovering\"];\r\nvar FONT = \"font\";\r\n\r\nfunction checkHeightRollingStock(rollingStocks, stubCanvas) {\r\n    var canvasSize = stubCanvas.end - stubCanvas.start;\r\n    var size = 0;\r\n    rollingStocks.forEach(function(rollingStock) {\r\n        size += rollingStock.getBoundingRect().width\r\n    });\r\n    while (canvasSize < size) {\r\n        size -= findAndKillSmallValue(rollingStocks)\r\n    }\r\n}\r\n\r\nfunction findAndKillSmallValue(rollingStocks) {\r\n    var smallestObject = rollingStocks.reduce(function(prev, rollingStock, index) {\r\n        if (!rollingStock) {\r\n            return prev\r\n        }\r\n        var value = rollingStock.value();\r\n        return value < prev.value ? {\r\n            value: value,\r\n            rollingStock: rollingStock,\r\n            index: index\r\n        } : prev\r\n    }, {\r\n        rollingStock: void 0,\r\n        value: 1 / 0,\r\n        index: void 0\r\n    });\r\n    smallestObject.rollingStock.getLabels()[0].draw(false);\r\n    var width = smallestObject.rollingStock.getBoundingRect().width;\r\n    rollingStocks[smallestObject.index] = null;\r\n    return width\r\n}\r\n\r\nfunction checkStackOverlap(rollingStocks) {\r\n    var i;\r\n    var j;\r\n    var iLength;\r\n    var jLength;\r\n    var overlap = false;\r\n    for (i = 0, iLength = rollingStocks.length - 1; i < iLength; i++) {\r\n        for (j = i + 1, jLength = rollingStocks.length; j < jLength; j++) {\r\n            if (i !== j && checkStacksOverlapping(rollingStocks[i], rollingStocks[j], true)) {\r\n                overlap = true;\r\n                break\r\n            }\r\n        }\r\n        if (overlap) {\r\n            break\r\n        }\r\n    }\r\n    return overlap\r\n}\r\n\r\nfunction resolveLabelOverlappingInOneDirection(points, canvas, isRotated, shiftFunction) {\r\n    var customSorting = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : function() {\r\n        return 0\r\n    };\r\n    var rollingStocks = [];\r\n    var stubCanvas = {\r\n        start: isRotated ? canvas.left : canvas.top,\r\n        end: isRotated ? canvas.width - canvas.right : canvas.height - canvas.bottom\r\n    };\r\n    var hasStackedSeries = false;\r\n    points.forEach(function(p) {\r\n        if (!p) {\r\n            return\r\n        }\r\n        hasStackedSeries = hasStackedSeries || p.series.isStackedSeries() || p.series.isFullStackedSeries();\r\n        p.getLabels().forEach(function(l) {\r\n            l.isVisible() && rollingStocks.push(new RollingStock(l, isRotated, shiftFunction))\r\n        })\r\n    });\r\n    if (hasStackedSeries) {\r\n        !isRotated && rollingStocks.reverse()\r\n    } else {\r\n        var rollingStocksTmp = rollingStocks.slice();\r\n        rollingStocks.sort(function(a, b) {\r\n            return customSorting(a, b) || a.getInitialPosition() - b.getInitialPosition() || rollingStocksTmp.indexOf(a) - rollingStocksTmp.indexOf(b)\r\n        })\r\n    }\r\n    if (!checkStackOverlap(rollingStocks)) {\r\n        return false\r\n    }\r\n    checkHeightRollingStock(rollingStocks, stubCanvas);\r\n    prepareOverlapStacks(rollingStocks);\r\n    rollingStocks.reverse();\r\n    moveRollingStock(rollingStocks, stubCanvas);\r\n    return true\r\n}\r\n\r\nfunction checkStacksOverlapping(firstRolling, secondRolling, inTwoSides) {\r\n    if (!firstRolling || !secondRolling) {\r\n        return\r\n    }\r\n    var firstRect = firstRolling.getBoundingRect();\r\n    var secondRect = secondRolling.getBoundingRect();\r\n    var oppositeOverlapping = inTwoSides ? firstRect.oppositeStart <= secondRect.oppositeStart && firstRect.oppositeEnd > secondRect.oppositeStart || secondRect.oppositeStart <= firstRect.oppositeStart && secondRect.oppositeEnd > firstRect.oppositeStart : true;\r\n    return firstRect.end > secondRect.start && oppositeOverlapping\r\n}\r\n\r\nfunction prepareOverlapStacks(rollingStocks) {\r\n    var i;\r\n    var currentRollingStock;\r\n    var root;\r\n    for (i = 0; i < rollingStocks.length - 1; i++) {\r\n        currentRollingStock = root || rollingStocks[i];\r\n        if (checkStacksOverlapping(currentRollingStock, rollingStocks[i + 1])) {\r\n            currentRollingStock.toChain(rollingStocks[i + 1]);\r\n            rollingStocks[i + 1] = null;\r\n            root = currentRollingStock\r\n        } else {\r\n            root = rollingStocks[i + 1] || currentRollingStock\r\n        }\r\n    }\r\n}\r\n\r\nfunction moveRollingStock(rollingStocks, canvas) {\r\n    var i;\r\n    var j;\r\n    var currentRollingStock;\r\n    var nextRollingStock;\r\n    var currentBBox;\r\n    var nextBBox;\r\n    for (i = 0; i < rollingStocks.length; i++) {\r\n        currentRollingStock = rollingStocks[i];\r\n        if (rollingStocksIsOut(currentRollingStock, canvas)) {\r\n            currentBBox = currentRollingStock.getBoundingRect();\r\n            for (j = i + 1; j < rollingStocks.length; j++) {\r\n                nextRollingStock = rollingStocks[j];\r\n                if (!nextRollingStock) {\r\n                    continue\r\n                }\r\n                nextBBox = nextRollingStock.getBoundingRect();\r\n                if (nextBBox.end > currentBBox.start - (currentBBox.end - canvas.end)) {\r\n                    nextRollingStock.toChain(currentRollingStock);\r\n                    rollingStocks[i] = currentRollingStock = null;\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        currentRollingStock && currentRollingStock.setRollingStockInCanvas(canvas)\r\n    }\r\n}\r\n\r\nfunction rollingStocksIsOut(rollingStock, canvas) {\r\n    return rollingStock && rollingStock.getBoundingRect().end > canvas.end\r\n}\r\n\r\nfunction RollingStock(label, isRotated, shiftFunction) {\r\n    var bBox = label.getBoundingRect();\r\n    var x = bBox.x;\r\n    var y = bBox.y;\r\n    var endX = bBox.x + bBox.width;\r\n    var endY = bBox.y + bBox.height;\r\n    this.labels = [label];\r\n    this.shiftFunction = shiftFunction;\r\n    this._bBox = {\r\n        start: isRotated ? x : y,\r\n        width: isRotated ? bBox.width : bBox.height,\r\n        end: isRotated ? endX : endY,\r\n        oppositeStart: isRotated ? y : x,\r\n        oppositeEnd: isRotated ? endY : endX\r\n    };\r\n    this._initialPosition = isRotated ? bBox.x : bBox.y;\r\n    return this\r\n}\r\nRollingStock.prototype = {\r\n    toChain: function(nextRollingStock) {\r\n        var nextRollingStockBBox = nextRollingStock.getBoundingRect();\r\n        nextRollingStock.shift(nextRollingStockBBox.start - this._bBox.end);\r\n        this._changeBoxWidth(nextRollingStockBBox.width);\r\n        this.labels = this.labels.concat(nextRollingStock.labels)\r\n    },\r\n    getBoundingRect: function() {\r\n        return this._bBox\r\n    },\r\n    shift: function(shiftLength) {\r\n        var shiftFunction = this.shiftFunction;\r\n        (0, _iterator.each)(this.labels, function(index, label) {\r\n            var bBox = label.getBoundingRect();\r\n            var coords = shiftFunction(bBox, shiftLength);\r\n            if (!label.hideInsideLabel(coords)) {\r\n                label.shift(coords.x, coords.y)\r\n            }\r\n        });\r\n        this._bBox.end -= shiftLength;\r\n        this._bBox.start -= shiftLength\r\n    },\r\n    setRollingStockInCanvas: function(canvas) {\r\n        if (this._bBox.end > canvas.end) {\r\n            this.shift(this._bBox.end - canvas.end)\r\n        }\r\n    },\r\n    getLabels: function() {\r\n        return this.labels\r\n    },\r\n    value: function() {\r\n        return this.labels[0].getData().value\r\n    },\r\n    getInitialPosition: function() {\r\n        return this._initialPosition\r\n    },\r\n    _changeBoxWidth: function(width) {\r\n        this._bBox.end += width;\r\n        this._bBox.width += width\r\n    }\r\n};\r\n\r\nfunction getLegendFields(name) {\r\n    return {\r\n        nameField: name + \"Name\",\r\n        colorField: name + \"Color\",\r\n        indexField: name + \"Index\"\r\n    }\r\n}\r\n\r\nfunction getLegendSettings(legendDataField) {\r\n    var formatObjectFields = getLegendFields(legendDataField);\r\n    return {\r\n        getFormatObject: function(data) {\r\n            var res = {};\r\n            res[formatObjectFields.indexField] = data.id;\r\n            res[formatObjectFields.colorField] = data.states.normal.fill;\r\n            res[formatObjectFields.nameField] = data.text;\r\n            return res\r\n        },\r\n        textField: formatObjectFields.nameField\r\n    }\r\n}\r\n\r\nfunction checkOverlapping(firstRect, secondRect) {\r\n    return (firstRect.x <= secondRect.x && secondRect.x <= firstRect.x + firstRect.width || firstRect.x >= secondRect.x && firstRect.x <= secondRect.x + secondRect.width) && (firstRect.y <= secondRect.y && secondRect.y <= firstRect.y + firstRect.height || firstRect.y >= secondRect.y && firstRect.y <= secondRect.y + secondRect.height)\r\n}\r\nvar overlapping = {\r\n    resolveLabelOverlappingInOneDirection: resolveLabelOverlappingInOneDirection\r\n};\r\nexports.overlapping = overlapping;\r\nvar BaseChart = _base_widget.default.inherit({\r\n    _eventsMap: {\r\n        onSeriesClick: {\r\n            name: \"seriesClick\"\r\n        },\r\n        onPointClick: {\r\n            name: \"pointClick\"\r\n        },\r\n        onArgumentAxisClick: {\r\n            name: \"argumentAxisClick\"\r\n        },\r\n        onLegendClick: {\r\n            name: \"legendClick\"\r\n        },\r\n        onSeriesSelectionChanged: {\r\n            name: \"seriesSelectionChanged\"\r\n        },\r\n        onPointSelectionChanged: {\r\n            name: \"pointSelectionChanged\"\r\n        },\r\n        onSeriesHoverChanged: {\r\n            name: \"seriesHoverChanged\"\r\n        },\r\n        onPointHoverChanged: {\r\n            name: \"pointHoverChanged\"\r\n        },\r\n        onDone: {\r\n            name: \"done\"\r\n        },\r\n        onZoomStart: {\r\n            name: \"zoomStart\"\r\n        },\r\n        onZoomEnd: {\r\n            name: \"zoomEnd\"\r\n        }\r\n    },\r\n    _fontFields: [\"legend.\" + FONT, \"legend.title.\" + FONT, \"legend.title.subtitle.\" + FONT, \"commonSeriesSettings.label.\" + FONT],\r\n    _rootClassPrefix: \"dxc\",\r\n    _rootClass: \"dxc-chart\",\r\n    _initialChanges: [\"INIT\"],\r\n    _themeDependentChanges: [\"REFRESH_SERIES_REINIT\"],\r\n    _getThemeManagerOptions: function() {\r\n        var themeOptions = this.callBase.apply(this, arguments);\r\n        themeOptions.options = this.option();\r\n        return themeOptions\r\n    },\r\n    _createThemeManager: function() {\r\n        var chartOption = this.option();\r\n        var themeManager = new _chart_theme_manager.ThemeManager(this._getThemeManagerOptions());\r\n        themeManager.setTheme(chartOption.theme, chartOption.rtlEnabled);\r\n        return themeManager\r\n    },\r\n    _initCore: function() {\r\n        var that = this;\r\n        that._canvasClipRect = that._renderer.clipRect();\r\n        that._createHtmlStructure();\r\n        that._createLegend();\r\n        that._createTracker();\r\n        that._needHandleRenderComplete = true;\r\n        that.layoutManager = new _layout_manager.LayoutManager;\r\n        that._createScrollBar();\r\n        _events_engine.default.on(that._$element, \"contextmenu\", function(event) {\r\n            if ((0, _index.isTouchEvent)(event) || (0, _index.isPointerEvent)(event)) {\r\n                event.preventDefault()\r\n            }\r\n        });\r\n        _events_engine.default.on(that._$element, \"MSHoldVisual\", function(event) {\r\n            event.preventDefault()\r\n        })\r\n    },\r\n    _getLayoutItems: _common.noop,\r\n    _layoutManagerOptions: function() {\r\n        return this._themeManager.getOptions(\"adaptiveLayout\")\r\n    },\r\n    _reinit: function() {\r\n        var that = this;\r\n        (0, _utils.setCanvasValues)(that._canvas);\r\n        that._reinitAxes();\r\n        that._requestChange([\"DATA_SOURCE\", \"DATA_INIT\", \"CORRECT_AXIS\", \"FULL_RENDER\"])\r\n    },\r\n    _correctAxes: _common.noop,\r\n    _createHtmlStructure: function() {\r\n        var that = this;\r\n        var renderer = that._renderer;\r\n        var root = renderer.root;\r\n        var createConstantLinesGroup = function() {\r\n            return renderer.g().attr({\r\n                \"class\": \"dxc-constant-lines-group\"\r\n            }).linkOn(root, \"constant-lines\")\r\n        };\r\n        that._constantLinesGroup = {\r\n            dispose: function() {\r\n                this.under.dispose();\r\n                this.above.dispose()\r\n            },\r\n            linkOff: function() {\r\n                this.under.linkOff();\r\n                this.above.linkOff()\r\n            },\r\n            clear: function() {\r\n                this.under.linkRemove().clear();\r\n                this.above.linkRemove().clear()\r\n            },\r\n            linkAppend: function() {\r\n                this.under.linkAppend();\r\n                this.above.linkAppend()\r\n            }\r\n        };\r\n        that._backgroundRect = renderer.rect().attr({\r\n            fill: \"gray\",\r\n            opacity: 1e-4\r\n        }).append(root);\r\n        that._panesBackgroundGroup = renderer.g().attr({\r\n            \"class\": \"dxc-background\"\r\n        }).append(root);\r\n        that._stripsGroup = renderer.g().attr({\r\n            \"class\": \"dxc-strips-group\"\r\n        }).linkOn(root, \"strips\");\r\n        that._gridGroup = renderer.g().attr({\r\n            \"class\": \"dxc-grids-group\"\r\n        }).linkOn(root, \"grids\");\r\n        that._panesBorderGroup = renderer.g().attr({\r\n            \"class\": \"dxc-border\"\r\n        }).linkOn(root, \"border\");\r\n        that._axesGroup = renderer.g().attr({\r\n            \"class\": \"dxc-axes-group\"\r\n        }).linkOn(root, \"axes\");\r\n        that._labelAxesGroup = renderer.g().attr({\r\n            \"class\": \"dxc-strips-labels-group\"\r\n        }).linkOn(root, \"strips-labels\");\r\n        that._constantLinesGroup.under = createConstantLinesGroup();\r\n        that._seriesGroup = renderer.g().attr({\r\n            \"class\": \"dxc-series-group\"\r\n        }).linkOn(root, \"series\");\r\n        that._constantLinesGroup.above = createConstantLinesGroup();\r\n        that._scaleBreaksGroup = renderer.g().attr({\r\n            \"class\": \"dxc-scale-breaks\"\r\n        }).linkOn(root, \"scale-breaks\");\r\n        that._labelsGroup = renderer.g().attr({\r\n            \"class\": \"dxc-labels-group\"\r\n        }).linkOn(root, \"labels\");\r\n        that._crosshairCursorGroup = renderer.g().attr({\r\n            \"class\": \"dxc-crosshair-cursor\"\r\n        }).linkOn(root, \"crosshair\");\r\n        that._legendGroup = renderer.g().attr({\r\n            \"class\": \"dxc-legend\",\r\n            \"clip-path\": that._getCanvasClipRectID()\r\n        }).linkOn(root, \"legend\").linkAppend(root).enableLinks();\r\n        that._scrollBarGroup = renderer.g().attr({\r\n            \"class\": \"dxc-scroll-bar\"\r\n        }).linkOn(root, \"scroll-bar\")\r\n    },\r\n    _disposeObjectsInArray: function(propName, fieldNames) {\r\n        (0, _iterator.each)(this[propName] || [], function(_, item) {\r\n            if (fieldNames && item) {\r\n                (0, _iterator.each)(fieldNames, function(_, field) {\r\n                    item[field] && item[field].dispose()\r\n                })\r\n            } else {\r\n                item && item.dispose()\r\n            }\r\n        });\r\n        this[propName] = null\r\n    },\r\n    _disposeCore: function() {\r\n        var that = this;\r\n        var disposeObject = function(propName) {\r\n            if (that[propName]) {\r\n                that[propName].dispose();\r\n                that[propName] = null\r\n            }\r\n        };\r\n        var unlinkGroup = function(name) {\r\n            that[name].linkOff()\r\n        };\r\n        var disposeObjectsInArray = this._disposeObjectsInArray;\r\n        that._renderer.stopAllAnimations();\r\n        disposeObjectsInArray.call(that, \"series\");\r\n        disposeObject(\"_tracker\");\r\n        disposeObject(\"_crosshair\");\r\n        that.layoutManager = that._userOptions = that._canvas = that._groupsData = null;\r\n        unlinkGroup(\"_stripsGroup\");\r\n        unlinkGroup(\"_gridGroup\");\r\n        unlinkGroup(\"_axesGroup\");\r\n        unlinkGroup(\"_constantLinesGroup\");\r\n        unlinkGroup(\"_labelAxesGroup\");\r\n        unlinkGroup(\"_panesBorderGroup\");\r\n        unlinkGroup(\"_seriesGroup\");\r\n        unlinkGroup(\"_labelsGroup\");\r\n        unlinkGroup(\"_crosshairCursorGroup\");\r\n        unlinkGroup(\"_legendGroup\");\r\n        unlinkGroup(\"_scrollBarGroup\");\r\n        unlinkGroup(\"_scaleBreaksGroup\");\r\n        disposeObject(\"_canvasClipRect\");\r\n        disposeObject(\"_panesBackgroundGroup\");\r\n        disposeObject(\"_backgroundRect\");\r\n        disposeObject(\"_stripsGroup\");\r\n        disposeObject(\"_gridGroup\");\r\n        disposeObject(\"_axesGroup\");\r\n        disposeObject(\"_constantLinesGroup\");\r\n        disposeObject(\"_labelAxesGroup\");\r\n        disposeObject(\"_panesBorderGroup\");\r\n        disposeObject(\"_seriesGroup\");\r\n        disposeObject(\"_labelsGroup\");\r\n        disposeObject(\"_crosshairCursorGroup\");\r\n        disposeObject(\"_legendGroup\");\r\n        disposeObject(\"_scrollBarGroup\");\r\n        disposeObject(\"_scaleBreaksGroup\")\r\n    },\r\n    _getAnimationOptions: function() {\r\n        return this._themeManager.getOptions(\"animation\")\r\n    },\r\n    _getDefaultSize: function() {\r\n        return {\r\n            width: 400,\r\n            height: 400\r\n        }\r\n    },\r\n    _getOption: function(name) {\r\n        return this._themeManager.getOptions(name)\r\n    },\r\n    _applySize: function(rect) {\r\n        this._rect = rect.slice();\r\n        if (!this._changes.has(\"FULL_RENDER\")) {\r\n            this._processRefreshData(RESIZE_REFRESH_ACTION)\r\n        }\r\n    },\r\n    _resize: function() {\r\n        this._doRender(this.__renderOptions || {\r\n            animate: false,\r\n            isResize: true\r\n        })\r\n    },\r\n    _trackerType: \"ChartTracker\",\r\n    _createTracker: function() {\r\n        var that = this;\r\n        that._tracker = new trackerModule[that._trackerType]({\r\n            seriesGroup: that._seriesGroup,\r\n            renderer: that._renderer,\r\n            tooltip: that._tooltip,\r\n            legend: that._legend,\r\n            eventTrigger: that._eventTrigger\r\n        })\r\n    },\r\n    _getTrackerSettings: function() {\r\n        return (0, _extend.extend)({\r\n            chart: this\r\n        }, this._getSelectionModes())\r\n    },\r\n    _getSelectionModes: function() {\r\n        var themeManager = this._themeManager;\r\n        return {\r\n            seriesSelectionMode: themeManager.getOptions(\"seriesSelectionMode\"),\r\n            pointSelectionMode: themeManager.getOptions(\"pointSelectionMode\")\r\n        }\r\n    },\r\n    _updateTracker: function(trackerCanvases) {\r\n        var that = this;\r\n        that._tracker.update(that._getTrackerSettings());\r\n        that._tracker.setCanvases({\r\n            left: 0,\r\n            right: that._canvas.width,\r\n            top: 0,\r\n            bottom: that._canvas.height\r\n        }, trackerCanvases)\r\n    },\r\n    _createCanvasFromRect: function(rect) {\r\n        var currentCanvas = this._canvas;\r\n        return (0, _utils.setCanvasValues)({\r\n            left: rect[0],\r\n            top: rect[1],\r\n            right: currentCanvas.width - rect[2],\r\n            bottom: currentCanvas.height - rect[3],\r\n            width: currentCanvas.width,\r\n            height: currentCanvas.height\r\n        })\r\n    },\r\n    _doRender: function(_options) {\r\n        var that = this;\r\n        if (0 === that._canvas.width && 0 === that._canvas.height) {\r\n            return\r\n        }\r\n        that._resetIsReady();\r\n        var drawOptions = that._prepareDrawOptions(_options);\r\n        var recreateCanvas = drawOptions.recreateCanvas;\r\n        that._preserveOriginalCanvas();\r\n        if (recreateCanvas) {\r\n            that.__currentCanvas = that._canvas\r\n        } else {\r\n            that._canvas = that.__currentCanvas\r\n        }\r\n        recreateCanvas && that._updateCanvasClipRect(that._canvas);\r\n        this._canvas = this._createCanvasFromRect(this._rect);\r\n        that._renderer.stopAllAnimations(true);\r\n        that._cleanGroups();\r\n        var startTime = new Date;\r\n        that._renderElements(drawOptions);\r\n        that._lastRenderingTime = new Date - startTime\r\n    },\r\n    _preserveOriginalCanvas: function() {\r\n        this.__originalCanvas = this._canvas;\r\n        this._canvas = (0, _extend.extend)({}, this._canvas)\r\n    },\r\n    _layoutAxes: _common.noop,\r\n    _renderElements: function(drawOptions) {\r\n        var that = this;\r\n        var preparedOptions = that._prepareToRender(drawOptions);\r\n        var isRotated = that._isRotated();\r\n        var isLegendInside = that._isLegendInside();\r\n        var trackerCanvases = [];\r\n        (0, _extend.extend)({}, that._canvas);\r\n        var argBusinessRange;\r\n        var zoomMinArg;\r\n        var zoomMaxArg;\r\n        that._renderer.lock();\r\n        if (drawOptions.drawLegend && that._legend) {\r\n            that._legendGroup.linkAppend()\r\n        }\r\n        that.layoutManager.setOptions(that._layoutManagerOptions());\r\n        var layoutTargets = that._getLayoutTargets();\r\n        this._layoutAxes(function(needSpace) {\r\n            var axisDrawOptions = needSpace ? (0, _extend.extend)({}, drawOptions, {\r\n                animate: false\r\n            }) : drawOptions;\r\n            var canvas = that._renderAxes(axisDrawOptions, preparedOptions);\r\n            that._shrinkAxes(needSpace, canvas)\r\n        });\r\n        that._applyClipRects(preparedOptions);\r\n        that._appendSeriesGroups();\r\n        that._createCrosshairCursor();\r\n        layoutTargets.forEach(function(_ref) {\r\n            var canvas = _ref.canvas;\r\n            trackerCanvases.push({\r\n                left: canvas.left,\r\n                right: canvas.width - canvas.right,\r\n                top: canvas.top,\r\n                bottom: canvas.height - canvas.bottom\r\n            })\r\n        });\r\n        if (that._scrollBar) {\r\n            argBusinessRange = that._argumentAxes[0].getTranslator().getBusinessRange();\r\n            if (\"discrete\" === argBusinessRange.axisType && argBusinessRange.categories && argBusinessRange.categories.length <= 1 || \"discrete\" !== argBusinessRange.axisType && argBusinessRange.min === argBusinessRange.max) {\r\n                zoomMinArg = zoomMaxArg = void 0\r\n            } else {\r\n                zoomMinArg = argBusinessRange.minVisible;\r\n                zoomMaxArg = argBusinessRange.maxVisible\r\n            }\r\n            that._scrollBar.init(argBusinessRange, !that._argumentAxes[0].getOptions().valueMarginsEnabled).setPosition(zoomMinArg, zoomMaxArg)\r\n        }\r\n        that._updateTracker(trackerCanvases);\r\n        that._updateLegendPosition(drawOptions, isLegendInside);\r\n        that._applyPointMarkersAutoHiding();\r\n        that._renderSeries(drawOptions, isRotated, isLegendInside);\r\n        that._renderer.unlock()\r\n    },\r\n    _updateLegendPosition: _common.noop,\r\n    _createCrosshairCursor: _common.noop,\r\n    _appendSeriesGroups: function() {\r\n        this._seriesGroup.linkAppend();\r\n        this._labelsGroup.linkAppend();\r\n        this._appendAdditionalSeriesGroups()\r\n    },\r\n    _renderSeries: function(drawOptions, isRotated, isLegendInside) {\r\n        this._calculateSeriesLayout(drawOptions, isRotated);\r\n        this._renderSeriesElements(drawOptions, isLegendInside)\r\n    },\r\n    _calculateSeriesLayout: function(drawOptions, isRotated) {\r\n        drawOptions.hideLayoutLabels = this.layoutManager.needMoreSpaceForPanesCanvas(this._getLayoutTargets(), isRotated) && !this._themeManager.getOptions(\"adaptiveLayout\").keepLabels;\r\n        this._updateSeriesDimensions(drawOptions)\r\n    },\r\n    _getArgFilter: function() {\r\n        return function() {\r\n            return true\r\n        }\r\n    },\r\n    _getValFilter: function(series) {\r\n        return function() {\r\n            return true\r\n        }\r\n    },\r\n    _getPointsToAnimation: function(series) {\r\n        var _this = this;\r\n        var argViewPortFilter = this._getArgFilter();\r\n        return series.map(function(s) {\r\n            var valViewPortFilter = _this._getValFilter(s);\r\n            return s.getPoints().filter(function(p) {\r\n                return p.getOptions().visible && argViewPortFilter(p.argument) && (valViewPortFilter(p.getMinValue(true)) || valViewPortFilter(p.getMaxValue(true)))\r\n            }).length\r\n        })\r\n    },\r\n    _renderSeriesElements: function(drawOptions, isLegendInside) {\r\n        var that = this;\r\n        var i;\r\n        var series = that.series;\r\n        var singleSeries;\r\n        var seriesLength = series.length;\r\n        var resolveLabelOverlapping = that._themeManager.getOptions(\"resolveLabelOverlapping\");\r\n        var pointsToAnimation = that._getPointsToAnimation(series);\r\n        for (i = 0; i < seriesLength; i++) {\r\n            singleSeries = series[i];\r\n            that._applyExtraSettings(singleSeries, drawOptions);\r\n            singleSeries.draw(drawOptions.animate && pointsToAnimation[i] <= drawOptions.animationPointsLimit && that._renderer.animationEnabled(), drawOptions.hideLayoutLabels, that._getLegendCallBack(singleSeries))\r\n        }\r\n        if (\"none\" === resolveLabelOverlapping) {\r\n            that._adjustSeriesLabels(false)\r\n        } else {\r\n            that._locateLabels(resolveLabelOverlapping)\r\n        }\r\n        that._renderTrackers(isLegendInside);\r\n        that._tracker.repairTooltip();\r\n        that._renderExtraElements();\r\n        that._clearCanvas();\r\n        that._drawn();\r\n        that._renderCompleteHandler()\r\n    },\r\n    _locateLabels: function(resolveLabelOverlapping) {\r\n        this._resolveLabelOverlapping(resolveLabelOverlapping)\r\n    },\r\n    _renderExtraElements: function() {},\r\n    _clearCanvas: function() {\r\n        this._canvas = this.__originalCanvas\r\n    },\r\n    _resolveLabelOverlapping: function(resolveLabelOverlapping) {\r\n        var func;\r\n        switch (resolveLabelOverlapping) {\r\n            case \"stack\":\r\n                func = this._resolveLabelOverlappingStack;\r\n                break;\r\n            case \"hide\":\r\n                func = this._resolveLabelOverlappingHide;\r\n                break;\r\n            case \"shift\":\r\n                func = this._resolveLabelOverlappingShift\r\n        }\r\n        return (0, _type.isFunction)(func) && func.call(this)\r\n    },\r\n    _getVisibleSeries: function() {\r\n        return (0, _common.grep)(this.getAllSeries(), function(series) {\r\n            return series.isVisible()\r\n        })\r\n    },\r\n    _resolveLabelOverlappingHide: function() {\r\n        var labels = [];\r\n        var currentLabel;\r\n        var nextLabel;\r\n        var currentLabelRect;\r\n        var nextLabelRect;\r\n        var i;\r\n        var j;\r\n        var points;\r\n        var series = this._getVisibleSeries();\r\n        for (i = 0; i < series.length; i++) {\r\n            points = series[i].getVisiblePoints();\r\n            for (j = 0; j < points.length; j++) {\r\n                labels.push.apply(labels, points[j].getLabels())\r\n            }\r\n        }\r\n        for (i = 0; i < labels.length; i++) {\r\n            currentLabel = labels[i];\r\n            if (!currentLabel.isVisible()) {\r\n                continue\r\n            }\r\n            currentLabelRect = currentLabel.getBoundingRect();\r\n            for (j = i + 1; j < labels.length; j++) {\r\n                nextLabel = labels[j];\r\n                nextLabelRect = nextLabel.getBoundingRect();\r\n                if (checkOverlapping(currentLabelRect, nextLabelRect)) {\r\n                    nextLabel.draw(false)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _cleanGroups: function() {\r\n        var that = this;\r\n        that._stripsGroup.linkRemove().clear();\r\n        that._gridGroup.linkRemove().clear();\r\n        that._axesGroup.linkRemove().clear();\r\n        that._constantLinesGroup.above.clear();\r\n        that._labelAxesGroup.linkRemove().clear();\r\n        that._labelsGroup.linkRemove().clear();\r\n        that._crosshairCursorGroup.linkRemove().clear();\r\n        that._scaleBreaksGroup.linkRemove().clear()\r\n    },\r\n    _allowLegendInsidePosition: function() {\r\n        return false\r\n    },\r\n    _createLegend: function() {\r\n        var that = this;\r\n        var legendSettings = getLegendSettings(that._legendDataField);\r\n        that._legend = new _legend.Legend({\r\n            renderer: that._renderer,\r\n            widget: that,\r\n            group: that._legendGroup,\r\n            backgroundClass: \"dxc-border\",\r\n            itemGroupClass: \"dxc-item\",\r\n            titleGroupClass: \"dxc-title\",\r\n            textField: legendSettings.textField,\r\n            getFormatObject: legendSettings.getFormatObject,\r\n            allowInsidePosition: that._allowLegendInsidePosition()\r\n        });\r\n        that._updateLegend();\r\n        that._layout.add(that._legend)\r\n    },\r\n    _updateLegend: function() {\r\n        var that = this;\r\n        var themeManager = that._themeManager;\r\n        var legendOptions = themeManager.getOptions(\"legend\");\r\n        var legendData = that._getLegendData();\r\n        legendOptions.containerBackgroundColor = themeManager.getOptions(\"containerBackgroundColor\");\r\n        legendOptions._incidentOccurred = that._incidentOccurred;\r\n        that._legend.update(legendData, legendOptions, themeManager.theme(\"legend\").title);\r\n        this._change([\"LAYOUT\"])\r\n    },\r\n    _prepareDrawOptions: function(drawOptions) {\r\n        var animationOptions = this._getAnimationOptions();\r\n        var options = (0, _extend.extend)({}, {\r\n            force: false,\r\n            adjustAxes: true,\r\n            drawLegend: true,\r\n            drawTitle: true,\r\n            animate: animationOptions.enabled,\r\n            animationPointsLimit: animationOptions.maxPointCountSupported\r\n        }, drawOptions, this.__renderOptions);\r\n        if (!(0, _type.isDefined)(options.recreateCanvas)) {\r\n            options.recreateCanvas = options.adjustAxes && options.drawLegend && options.drawTitle\r\n        }\r\n        return options\r\n    },\r\n    _processRefreshData: function(newRefreshAction) {\r\n        var currentRefreshActionPosition = (0, _array.inArray)(this._currentRefreshData, ACTIONS_BY_PRIORITY);\r\n        var newRefreshActionPosition = (0, _array.inArray)(newRefreshAction, ACTIONS_BY_PRIORITY);\r\n        if (!this._currentRefreshData || currentRefreshActionPosition >= 0 && newRefreshActionPosition < currentRefreshActionPosition) {\r\n            this._currentRefreshData = newRefreshAction\r\n        }\r\n        this._requestChange([\"REFRESH\"])\r\n    },\r\n    _getLegendData: function() {\r\n        return (0, _utils.map)(this._getLegendTargets(), function(item) {\r\n            var legendData = item.legendData;\r\n            var style = item.getLegendStyles;\r\n            var opacity = style.normal.opacity;\r\n            if (!item.visible) {\r\n                if (!(0, _type.isDefined)(opacity) || opacity > DEFAULT_OPACITY) {\r\n                    opacity = DEFAULT_OPACITY\r\n                }\r\n                legendData.textOpacity = DEFAULT_OPACITY\r\n            }\r\n            var opacityStyle = {\r\n                opacity: opacity\r\n            };\r\n            legendData.states = {\r\n                hover: (0, _extend.extend)({}, style.hover, opacityStyle),\r\n                selection: (0, _extend.extend)({}, style.selection, opacityStyle),\r\n                normal: (0, _extend.extend)({}, style.normal, opacityStyle)\r\n            };\r\n            return legendData\r\n        })\r\n    },\r\n    _getLegendOptions: function(item) {\r\n        return {\r\n            legendData: {\r\n                text: item[this._legendItemTextField],\r\n                id: item.index,\r\n                visible: true\r\n            },\r\n            getLegendStyles: item.getLegendStyles(),\r\n            visible: item.isVisible()\r\n        }\r\n    },\r\n    _disposeSeries: function(seriesIndex) {\r\n        var _that$series;\r\n        var that = this;\r\n        if (that.series) {\r\n            if ((0, _type.isDefined)(seriesIndex)) {\r\n                that.series[seriesIndex].dispose();\r\n                that.series.splice(seriesIndex, 1)\r\n            } else {\r\n                (0, _iterator.each)(that.series, function(_, s) {\r\n                    return s.dispose()\r\n                });\r\n                that.series.length = 0\r\n            }\r\n        }\r\n        if (!(null === (_that$series = that.series) || void 0 === _that$series ? void 0 : _that$series.length)) {\r\n            that.series = []\r\n        }\r\n    },\r\n    _disposeSeriesFamilies: function() {\r\n        var that = this;\r\n        (0, _iterator.each)(that.seriesFamilies || [], function(_, family) {\r\n            family.dispose()\r\n        });\r\n        that.seriesFamilies = null;\r\n        that._needHandleRenderComplete = true\r\n    },\r\n    _optionChanged: function(arg) {\r\n        this._themeManager.resetOptions(arg.name);\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _applyChanges: function() {\r\n        var that = this;\r\n        that._themeManager.update(that._options.silent());\r\n        that.callBase.apply(that, arguments)\r\n    },\r\n    _optionChangesMap: {\r\n        animation: \"ANIMATION\",\r\n        dataSource: \"DATA_SOURCE\",\r\n        palette: \"PALETTE\",\r\n        paletteExtensionMode: \"PALETTE\",\r\n        legend: \"FORCE_DATA_INIT\",\r\n        seriesTemplate: \"FORCE_DATA_INIT\",\r\n        \"export\": \"FORCE_RENDER\",\r\n        valueAxis: \"AXES_AND_PANES\",\r\n        argumentAxis: \"AXES_AND_PANES\",\r\n        commonAxisSettings: \"AXES_AND_PANES\",\r\n        panes: \"AXES_AND_PANES\",\r\n        commonPaneSettings: \"AXES_AND_PANES\",\r\n        defaultPane: \"AXES_AND_PANES\",\r\n        containerBackgroundColor: \"AXES_AND_PANES\",\r\n        rotated: \"ROTATED\",\r\n        autoHidePointMarkers: \"REFRESH_SERIES_REINIT\",\r\n        customizePoint: \"REFRESH_SERIES_REINIT\",\r\n        customizeLabel: \"REFRESH_SERIES_REINIT\",\r\n        scrollBar: \"SCROLL_BAR\"\r\n    },\r\n    _optionChangesOrder: [\"ROTATED\", \"PALETTE\", \"REFRESH_SERIES_REINIT\", \"AXES_AND_PANES\", \"INIT\", \"REINIT\", \"DATA_SOURCE\", \"REFRESH_SERIES_DATA_INIT\", \"DATA_INIT\", \"FORCE_DATA_INIT\", \"REFRESH_AXES\", \"CORRECT_AXIS\"],\r\n    _customChangesOrder: [\"ANIMATION\", \"REFRESH_SERIES_FAMILIES\", \"FORCE_FIRST_DRAWING\", \"FORCE_DRAWING\", \"FORCE_RENDER\", \"VISUAL_RANGE\", \"SCROLL_BAR\", \"REINIT\", \"REFRESH\", \"FULL_RENDER\"],\r\n    _change_ANIMATION: function() {\r\n        this._renderer.updateAnimationOptions(this._getAnimationOptions())\r\n    },\r\n    _change_DATA_SOURCE: function() {\r\n        this._needHandleRenderComplete = true;\r\n        this._updateDataSource()\r\n    },\r\n    _change_PALETTE: function() {\r\n        this._themeManager.updatePalette();\r\n        this._refreshSeries(\"DATA_INIT\")\r\n    },\r\n    _change_REFRESH_SERIES_DATA_INIT: function() {\r\n        this._refreshSeries(\"DATA_INIT\")\r\n    },\r\n    _change_DATA_INIT: function() {\r\n        if ((!this.series || this.needToPopulateSeries) && !this._changes.has(\"FORCE_DATA_INIT\")) {\r\n            this._dataInit()\r\n        }\r\n    },\r\n    _change_FORCE_DATA_INIT: function() {\r\n        this._dataInit()\r\n    },\r\n    _change_REFRESH_SERIES_FAMILIES: function() {\r\n        this._processSeriesFamilies();\r\n        this._populateBusinessRange();\r\n        this._processRefreshData(FORCE_RENDER_REFRESH_ACTION)\r\n    },\r\n    _change_FORCE_RENDER: function() {\r\n        this._processRefreshData(FORCE_RENDER_REFRESH_ACTION)\r\n    },\r\n    _change_AXES_AND_PANES: function() {\r\n        this._refreshSeries(\"INIT\")\r\n    },\r\n    _change_ROTATED: function() {\r\n        this._createScrollBar();\r\n        this._refreshSeries(\"INIT\")\r\n    },\r\n    _change_REFRESH_SERIES_REINIT: function() {\r\n        this._refreshSeries(\"INIT\")\r\n    },\r\n    _change_REFRESH_AXES: function() {\r\n        var that = this;\r\n        (0, _utils.setCanvasValues)(that._canvas);\r\n        that._reinitAxes();\r\n        that._requestChange([\"CORRECT_AXIS\", \"FULL_RENDER\"])\r\n    },\r\n    _change_SCROLL_BAR: function() {\r\n        this._createScrollBar();\r\n        this._processRefreshData(FORCE_RENDER_REFRESH_ACTION)\r\n    },\r\n    _change_REINIT: function() {\r\n        this._processRefreshData(REINIT_REFRESH_ACTION)\r\n    },\r\n    _change_FORCE_DRAWING: function() {\r\n        this._resetComponentsAnimation()\r\n    },\r\n    _change_FORCE_FIRST_DRAWING: function() {\r\n        this._resetComponentsAnimation(true)\r\n    },\r\n    _resetComponentsAnimation: function(isFirstDrawing) {\r\n        this.series.forEach(function(s) {\r\n            s.resetApplyingAnimation(isFirstDrawing)\r\n        });\r\n        this._resetAxesAnimation(isFirstDrawing)\r\n    },\r\n    _resetAxesAnimation: _common.noop,\r\n    _refreshSeries: function(actionName) {\r\n        this.needToPopulateSeries = true;\r\n        this._requestChange([actionName])\r\n    },\r\n    _change_CORRECT_AXIS: function() {\r\n        this._correctAxes()\r\n    },\r\n    _doRefresh: function() {\r\n        var methodName = this._currentRefreshData;\r\n        if (methodName) {\r\n            this._currentRefreshData = null;\r\n            this._renderer.stopAllAnimations(true);\r\n            this[methodName]()\r\n        }\r\n    },\r\n    _updateCanvasClipRect: function(canvas) {\r\n        var that = this;\r\n        var width = Math.max(canvas.width - canvas.left - canvas.right, 0);\r\n        var height = Math.max(canvas.height - canvas.top - canvas.bottom, 0);\r\n        that._canvasClipRect.attr({\r\n            x: canvas.left,\r\n            y: canvas.top,\r\n            width: width,\r\n            height: height\r\n        });\r\n        that._backgroundRect.attr({\r\n            x: canvas.left,\r\n            y: canvas.top,\r\n            width: width,\r\n            height: height\r\n        })\r\n    },\r\n    _getCanvasClipRectID: function() {\r\n        return this._canvasClipRect.id\r\n    },\r\n    _dataSourceChangedHandler: function() {\r\n        if (this._changes.has(\"INIT\")) {\r\n            this._requestChange([\"DATA_INIT\"])\r\n        } else {\r\n            this._requestChange([\"FORCE_DATA_INIT\"])\r\n        }\r\n    },\r\n    _dataInit: function() {\r\n        this._dataSpecificInit(true)\r\n    },\r\n    _processSingleSeries: function(singleSeries) {\r\n        singleSeries.createPoints(false)\r\n    },\r\n    _handleSeriesDataUpdated: function() {\r\n        var _this2 = this;\r\n        if (this._getVisibleSeries().some(function(s) {\r\n                return s.useAggregation()\r\n            })) {\r\n            this._populateMarginOptions()\r\n        }\r\n        this.series.forEach(function(s) {\r\n            return _this2._processSingleSeries(s)\r\n        }, this)\r\n    },\r\n    _dataSpecificInit: function(needRedraw) {\r\n        var that = this;\r\n        if (!that.series || that.needToPopulateSeries) {\r\n            that.series = that._populateSeries()\r\n        }\r\n        that._repopulateSeries();\r\n        that._seriesPopulatedHandlerCore();\r\n        that._populateBusinessRange();\r\n        that._tracker.updateSeries(that.series, this._changes.has(\"INIT\"));\r\n        that._updateLegend();\r\n        if (needRedraw) {\r\n            this._requestChange([\"FULL_RENDER\"])\r\n        }\r\n    },\r\n    _forceRender: function() {\r\n        this._doRender({\r\n            force: true\r\n        })\r\n    },\r\n    _repopulateSeries: function() {\r\n        var that = this;\r\n        var themeManager = that._themeManager;\r\n        var data = that._dataSourceItems();\r\n        var dataValidatorOptions = themeManager.getOptions(\"dataPrepareSettings\");\r\n        var seriesTemplate = themeManager.getOptions(\"seriesTemplate\");\r\n        if (seriesTemplate) {\r\n            that._populateSeries(data)\r\n        }\r\n        that._groupSeries();\r\n        var parsedData = (0, _data_validator.validateData)(data, that._groupsData, that._incidentOccurred, dataValidatorOptions);\r\n        themeManager.resetPalette();\r\n        that.series.forEach(function(singleSeries) {\r\n            singleSeries.updateData(parsedData[singleSeries.getArgumentField()])\r\n        });\r\n        that._handleSeriesDataUpdated()\r\n    },\r\n    _renderCompleteHandler: function() {\r\n        var that = this;\r\n        var allSeriesInited = true;\r\n        if (that._needHandleRenderComplete) {\r\n            (0, _iterator.each)(that.series, function(_, s) {\r\n                allSeriesInited = allSeriesInited && s.canRenderCompleteHandle()\r\n            });\r\n            if (allSeriesInited) {\r\n                that._needHandleRenderComplete = false;\r\n                that._eventTrigger(\"done\", {\r\n                    target: that\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _dataIsReady: function() {\r\n        return (0, _type.isDefined)(this.option(\"dataSource\")) && this._dataIsLoaded()\r\n    },\r\n    _populateSeriesOptions: function(data) {\r\n        var that = this;\r\n        var themeManager = that._themeManager;\r\n        var seriesTemplate = themeManager.getOptions(\"seriesTemplate\");\r\n        var seriesOptions = seriesTemplate ? (0, _utils.processSeriesTemplate)(seriesTemplate, data || []) : that.option(\"series\");\r\n        var allSeriesOptions = _isArray(seriesOptions) ? seriesOptions : seriesOptions ? [seriesOptions] : [];\r\n        var extraOptions = that._getExtraOptions();\r\n        var particularSeriesOptions;\r\n        var seriesTheme;\r\n        var seriesThemes = [];\r\n        var seriesVisibilityChanged = function(target) {\r\n            that._specialProcessSeries();\r\n            that._populateBusinessRange(target && target.getValueAxis(), true);\r\n            that._renderer.stopAllAnimations(true);\r\n            that._updateLegend();\r\n            that._requestChange([\"FULL_RENDER\"])\r\n        };\r\n        for (var i = 0; i < allSeriesOptions.length; i++) {\r\n            particularSeriesOptions = (0, _extend.extend)(true, {}, allSeriesOptions[i], extraOptions);\r\n            if (!particularSeriesOptions.name) {\r\n                particularSeriesOptions.name = \"Series \" + (i + 1).toString()\r\n            }\r\n            particularSeriesOptions.rotated = that._isRotated();\r\n            particularSeriesOptions.customizePoint = themeManager.getOptions(\"customizePoint\");\r\n            particularSeriesOptions.customizeLabel = themeManager.getOptions(\"customizeLabel\");\r\n            particularSeriesOptions.visibilityChanged = seriesVisibilityChanged;\r\n            particularSeriesOptions.incidentOccurred = that._incidentOccurred;\r\n            seriesTheme = themeManager.getOptions(\"series\", particularSeriesOptions, allSeriesOptions.length);\r\n            if (that._checkPaneName(seriesTheme)) {\r\n                seriesThemes.push(seriesTheme)\r\n            }\r\n        }\r\n        return seriesThemes\r\n    },\r\n    _populateSeries: function(data) {\r\n        var that = this;\r\n        var seriesBasis = [];\r\n        var incidentOccurred = that._incidentOccurred;\r\n        var seriesThemes = that._populateSeriesOptions(data);\r\n        var particularSeries;\r\n        var disposeSeriesFamilies = false;\r\n        that.needToPopulateSeries = false;\r\n        (0, _iterator.each)(seriesThemes, function(_, theme) {\r\n            var curSeries = that.series && that.series.filter(function(s) {\r\n                return s.name === theme.name && seriesBasis.map(function(sb) {\r\n                    return sb.series\r\n                }).indexOf(s) === -1\r\n            })[0];\r\n            if (curSeries && curSeries.type === theme.type) {\r\n                seriesBasis.push({\r\n                    series: curSeries,\r\n                    options: theme\r\n                })\r\n            } else {\r\n                seriesBasis.push({\r\n                    options: theme\r\n                });\r\n                disposeSeriesFamilies = true\r\n            }\r\n        });\r\n        that._tracker.clearHover();\r\n        (0, _iterator.reverseEach)(that.series, function(index, series) {\r\n            if (!seriesBasis.some(function(s) {\r\n                    return series === s.series\r\n                })) {\r\n                that._disposeSeries(index);\r\n                disposeSeriesFamilies = true\r\n            }\r\n        });\r\n        !disposeSeriesFamilies && (disposeSeriesFamilies = seriesBasis.some(function(sb) {\r\n            return sb.series.name !== seriesThemes[sb.series.index].name\r\n        }));\r\n        that.series = [];\r\n        disposeSeriesFamilies && that._disposeSeriesFamilies();\r\n        that._themeManager.resetPalette();\r\n        var eventPipe = function(data) {\r\n            that.series.forEach(function(currentSeries) {\r\n                currentSeries.notify(data)\r\n            })\r\n        };\r\n        (0, _iterator.each)(seriesBasis, function(_, basis) {\r\n            var seriesTheme = basis.options;\r\n            var renderSettings = {\r\n                commonSeriesModes: that._getSelectionModes(),\r\n                argumentAxis: that.getArgumentAxis(),\r\n                valueAxis: that._getValueAxis(seriesTheme.pane, seriesTheme.axis)\r\n            };\r\n            if (basis.series) {\r\n                particularSeries = basis.series;\r\n                particularSeries.updateOptions(seriesTheme, renderSettings)\r\n            } else {\r\n                particularSeries = new _base_series.Series((0, _extend.extend)({\r\n                    renderer: that._renderer,\r\n                    seriesGroup: that._seriesGroup,\r\n                    labelsGroup: that._labelsGroup,\r\n                    eventTrigger: that._eventTrigger,\r\n                    eventPipe: eventPipe,\r\n                    incidentOccurred: incidentOccurred\r\n                }, renderSettings), seriesTheme)\r\n            }\r\n            if (!particularSeries.isUpdated) {\r\n                incidentOccurred(\"E2101\", [seriesTheme.type])\r\n            } else {\r\n                particularSeries.index = that.series.length;\r\n                that.series.push(particularSeries)\r\n            }\r\n        });\r\n        return that.series\r\n    },\r\n    getStackedPoints: function(point) {\r\n        var stackName = point.series.getStackName();\r\n        return this._getVisibleSeries().reduce(function(stackPoints, series) {\r\n            if (!(0, _type.isDefined)(series.getStackName()) || !(0, _type.isDefined)(stackName) || stackName === series.getStackName()) {\r\n                stackPoints = stackPoints.concat(series.getPointsByArg(point.argument))\r\n            }\r\n            return stackPoints\r\n        }, [])\r\n    },\r\n    getAllSeries: function() {\r\n        return (this.series || []).slice()\r\n    },\r\n    getSeriesByName: function(name) {\r\n        var found = null;\r\n        (0, _iterator.each)(this.series, function(i, singleSeries) {\r\n            if (singleSeries.name === name) {\r\n                found = singleSeries;\r\n                return false\r\n            }\r\n        });\r\n        return found\r\n    },\r\n    getSeriesByPos: function(pos) {\r\n        return (this.series || [])[pos]\r\n    },\r\n    clearSelection: function() {\r\n        this._tracker.clearSelection()\r\n    },\r\n    hideTooltip: function() {\r\n        this._tracker._hideTooltip()\r\n    },\r\n    clearHover: function() {\r\n        this._tracker.clearHover()\r\n    },\r\n    render: function(renderOptions) {\r\n        var that = this;\r\n        that.__renderOptions = renderOptions;\r\n        that.__forceRender = renderOptions && renderOptions.force;\r\n        that.callBase.apply(that, arguments);\r\n        that.__renderOptions = that.__forceRender = null;\r\n        return that\r\n    },\r\n    refresh: function() {\r\n        this._disposeSeries();\r\n        this._disposeSeriesFamilies();\r\n        this._requestChange([\"CONTAINER_SIZE\", \"REFRESH_SERIES_REINIT\"])\r\n    },\r\n    _getMinSize: function() {\r\n        var adaptiveLayout = this._layoutManagerOptions();\r\n        return [adaptiveLayout.width, adaptiveLayout.height]\r\n    },\r\n    _change_REFRESH: function() {\r\n        if (!this._changes.has(\"INIT\")) {\r\n            this._doRefresh()\r\n        } else {\r\n            this._currentRefreshData = null\r\n        }\r\n    },\r\n    _change_FULL_RENDER: function() {\r\n        this._forceRender()\r\n    },\r\n    _change_INIT: function() {\r\n        this._reinit()\r\n    },\r\n    _stopCurrentHandling: function() {\r\n        this._tracker.stopCurrentHandling()\r\n    }\r\n});\r\nexports.BaseChart = BaseChart;\r\nREFRESH_SERIES_DATA_INIT_ACTION_OPTIONS.forEach(function(name) {\r\n    BaseChart.prototype._optionChangesMap[name] = \"REFRESH_SERIES_DATA_INIT\"\r\n});\r\nFORCE_RENDER_REFRESH_ACTION_OPTIONS.forEach(function(name) {\r\n    BaseChart.prototype._optionChangesMap[name] = \"FORCE_RENDER\"\r\n});\r\nREFRESH_SERIES_FAMILIES_ACTION_OPTIONS.forEach(function(name) {\r\n    BaseChart.prototype._optionChangesMap[name] = \"REFRESH_SERIES_FAMILIES\"\r\n});\r\nBaseChart.addPlugin(_export.plugin);\r\nBaseChart.addPlugin(_title.plugin);\r\nBaseChart.addPlugin(_data_source.plugin);\r\nBaseChart.addPlugin(_tooltip.plugin);\r\nBaseChart.addPlugin(_loading_indicator.plugin);\r\nvar _change_TITLE = BaseChart.prototype._change_TITLE;\r\nBaseChart.prototype._change_TITLE = function() {\r\n    _change_TITLE.apply(this, arguments);\r\n    this._change([\"FORCE_RENDER\"])\r\n};\r\n"]},"metadata":{},"sourceType":"script"}