{"ast":null,"code":"var _regeneratorRuntime = require(\"E:\\\\Monday.com\\\\quickstart-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"E:\\\\Monday.com\\\\quickstart-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"E:\\\\Monday.com\\\\quickstart-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"E:\\\\Monday.com\\\\quickstart-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\n\nvar mondayApiClient = require(\"./monday-api-client\");\n\nvar _require = require(\"./services/oauth-service.js\"),\n    _oauthToken = _require.oauthToken;\n\nvar TOKEN_MISSING_ERROR = \"Should send 'token' as an option or call mondaySdk.setToken(TOKEN)\";\n\nvar MondayServerSdk = /*#__PURE__*/function () {\n  \"use strict\";\n\n  function MondayServerSdk() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, MondayServerSdk);\n\n    this._token = options.token;\n    this.setToken = this.setToken.bind(this);\n    this.api = this.api.bind(this);\n  }\n\n  _createClass(MondayServerSdk, [{\n    key: \"setToken\",\n    value: function setToken(token) {\n      this._token = token;\n    }\n  }, {\n    key: \"api\",\n    value: function () {\n      var _api = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(query) {\n        var options,\n            params,\n            token,\n            _args = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n                params = {\n                  query: query,\n                  variables: options.variables\n                };\n                token = options.token || this._token;\n\n                if (token) {\n                  _context.next = 5;\n                  break;\n                }\n\n                throw new Error(TOKEN_MISSING_ERROR);\n\n              case 5:\n                _context.next = 7;\n                return mondayApiClient.execute(params, token);\n\n              case 7:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function api(_x) {\n        return _api.apply(this, arguments);\n      }\n\n      return api;\n    }()\n  }, {\n    key: \"oauthToken\",\n    value: function oauthToken(code, clientId, clientSecret) {\n      return _oauthToken(code, clientId, clientSecret);\n    }\n  }]);\n\n  return MondayServerSdk;\n}();\n\nfunction init() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return new MondayServerSdk(options);\n}\n\nmodule.exports = init;","map":{"version":3,"sources":["E:/Monday.com/quickstart-react/node_modules/monday-sdk-js/src/server.js"],"names":["mondayApiClient","require","oauthToken","TOKEN_MISSING_ERROR","MondayServerSdk","options","_token","token","setToken","bind","api","query","params","variables","Error","execute","code","clientId","clientSecret","init","module","exports"],"mappings":";;;;;;;;AAAA,IAAMA,eAAe,GAAGC,OAAO,CAAC,qBAAD,CAA/B;;eACuBA,OAAO,CAAC,6BAAD,C;IAAtBC,W,YAAAA,U;;AAER,IAAMC,mBAAmB,GAAG,oEAA5B;;IAEMC,e;;;AACJ,6BAA0B;AAAA,QAAdC,OAAc,uEAAJ,EAAI;;AAAA;;AACxB,SAAKC,MAAL,GAAcD,OAAO,CAACE,KAAtB;AAEA,SAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKC,GAAL,GAAW,KAAKA,GAAL,CAASD,IAAT,CAAc,IAAd,CAAX;AACD;;;;6BAEQF,K,EAAO;AACd,WAAKD,MAAL,GAAcC,KAAd;AACD;;;;2FAESI,K;;;;;;;;;AAAON,gBAAAA,O,2DAAU,E;AACnBO,gBAAAA,M,GAAS;AAAED,kBAAAA,KAAK,EAALA,KAAF;AAASE,kBAAAA,SAAS,EAAER,OAAO,CAACQ;AAA5B,iB;AACTN,gBAAAA,K,GAAQF,OAAO,CAACE,KAAR,IAAiB,KAAKD,M;;oBAE/BC,K;;;;;sBAAa,IAAIO,KAAJ,CAAUX,mBAAV,C;;;;uBAELH,eAAe,CAACe,OAAhB,CAAwBH,MAAxB,EAAgCL,KAAhC,C;;;;;;;;;;;;;;;;;;;;;+BAGJS,I,EAAMC,Q,EAAUC,Y,EAAc;AACvC,aAAOhB,WAAU,CAACc,IAAD,EAAOC,QAAP,EAAiBC,YAAjB,CAAjB;AACD;;;;;;AAGH,SAASC,IAAT,GAA4B;AAAA,MAAdd,OAAc,uEAAJ,EAAI;AAC1B,SAAO,IAAID,eAAJ,CAAoBC,OAApB,CAAP;AACD;;AAEDe,MAAM,CAACC,OAAP,GAAiBF,IAAjB","sourcesContent":["const mondayApiClient = require(\"./monday-api-client\");\nconst { oauthToken } = require(\"./services/oauth-service.js\");\n\nconst TOKEN_MISSING_ERROR = \"Should send 'token' as an option or call mondaySdk.setToken(TOKEN)\";\n\nclass MondayServerSdk {\n  constructor(options = {}) {\n    this._token = options.token;\n\n    this.setToken = this.setToken.bind(this);\n    this.api = this.api.bind(this);\n  }\n\n  setToken(token) {\n    this._token = token;\n  }\n\n  async api(query, options = {}) {\n    const params = { query, variables: options.variables };\n    const token = options.token || this._token;\n\n    if (!token) throw new Error(TOKEN_MISSING_ERROR);\n\n    return await mondayApiClient.execute(params, token);\n  }\n\n  oauthToken(code, clientId, clientSecret) {\n    return oauthToken(code, clientId, clientSecret);\n  }\n}\n\nfunction init(options = {}) {\n  return new MondayServerSdk(options);\n}\n\nmodule.exports = init;\n"]},"metadata":{},"sourceType":"script"}