{"ast":null,"code":"/**\r\n * DevExtreme (viz/axes/tick_generator.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.tickGenerator = void 0;\n\nvar _utils = require(\"../core/utils\");\n\nvar _date = _interopRequireDefault(require(\"../../core/utils/date\"));\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _math = require(\"../../core/utils/math\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) {\n    return;\n  }\n\n  if (\"string\" === typeof o) {\n    return _arrayLikeToArray(o, minLen);\n  }\n\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n\n  if (\"Object\" === n && o.constructor) {\n    n = o.constructor.name;\n  }\n\n  if (\"Map\" === n || \"Set\" === n) {\n    return Array.from(o);\n  }\n\n  if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\n    return _arrayLikeToArray(o, minLen);\n  }\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (null == len || len > arr.length) {\n    len = arr.length;\n  }\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (\"undefined\" === typeof Symbol || !(Symbol.iterator in Object(arr))) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _e = void 0;\n\n  try {\n    for (var _s, _i = arr[Symbol.iterator](); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) {\n        break;\n      }\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && null != _i.return) {\n        _i.return();\n      }\n    } finally {\n      if (_d) {\n        throw _e;\n      }\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) {\n    return arr;\n  }\n}\n\nvar convertDateUnitToMilliseconds = _date.default.convertDateUnitToMilliseconds;\nvar dateToMilliseconds = _date.default.dateToMilliseconds;\nvar math = Math;\nvar mathAbs = math.abs;\nvar mathFloor = math.floor;\nvar mathCeil = math.ceil;\nvar mathPow = math.pow;\nvar NUMBER_MULTIPLIERS = [1, 2, 2.5, 5];\nvar LOGARITHMIC_MULTIPLIERS = [1, 2, 3, 5];\nvar DATETIME_MULTIPLIERS = {\n  millisecond: [1, 2, 5, 10, 25, 50, 100, 250, 500],\n  second: [1, 2, 3, 5, 10, 15, 20, 30],\n  minute: [1, 2, 3, 5, 10, 15, 20, 30],\n  hour: [1, 2, 3, 4, 6, 8, 12],\n  day: [1, 2],\n  week: [1, 2],\n  month: [1, 2, 3, 6]\n};\nvar DATETIME_MULTIPLIERS_WITH_BIG_WEEKEND = (0, _extend.extend)({}, DATETIME_MULTIPLIERS, {\n  day: [1]\n});\nvar DATETIME_MINOR_MULTIPLIERS = {\n  millisecond: [1, 2, 5, 10, 25, 50, 100, 250, 500],\n  second: [1, 2, 3, 5, 10, 15, 20, 30],\n  minute: [1, 2, 3, 5, 10, 15, 20, 30],\n  hour: [1, 2, 3, 4, 6, 8, 12],\n  day: [1, 2, 3, 7, 14],\n  month: [1, 2, 3, 6]\n};\nvar MINOR_DELIMITERS = [2, 4, 5, 8, 10];\nvar VISIBILITY_DELIMITER = 3;\nvar MINUTE = 6e4;\n\nfunction dummyGenerator(options) {\n  return function (data, screenDelta, tickInterval, forceTickInterval) {\n    var count = mathFloor(screenDelta / options.axisDivisionFactor);\n    count = count < 1 ? 1 : count;\n    var interval = screenDelta / count;\n    return {\n      ticks: interval > 0 ? Array.apply(null, new Array(count + 1)).map(function (_, i) {\n        return interval * i;\n      }) : [],\n      tickInterval: interval\n    };\n  };\n}\n\nfunction discreteGenerator(options) {\n  return function (data, screenDelta, tickInterval, forceTickInterval) {\n    var categories = (0, _utils.getCategoriesInfo)(data.categories, data.min, data.max).categories;\n    return {\n      ticks: categories,\n      tickInterval: mathCeil(categories.length * options.axisDivisionFactor / screenDelta)\n    };\n  };\n}\n\nvar getValue = function getValue(value) {\n  return value;\n};\n\nvar getLogValue = function getLogValue(base, allowNegatives, linearThreshold) {\n  return function (value) {\n    return (0, _utils.getLogExt)(value, base, allowNegatives, linearThreshold);\n  };\n};\n\nvar raiseTo = function raiseTo(base, allowNegatives, linearThreshold) {\n  return function (value) {\n    return (0, _utils.raiseToExt)(value, base, allowNegatives, linearThreshold);\n  };\n};\n\nvar mathRaiseTo = function mathRaiseTo(base) {\n  return function (value) {\n    return (0, _utils.raiseTo)(value, base);\n  };\n};\n\nvar logAbsValue = function logAbsValue(base) {\n  return function (value) {\n    return 0 === value ? 0 : (0, _utils.getLog)(mathAbs(value), base);\n  };\n};\n\nvar correctValueByInterval = function correctValueByInterval(post, round, getValue) {\n  return function (value, interval) {\n    return (0, _math.adjust)(post(round((0, _math.adjust)(getValue(value) / interval)) * interval));\n  };\n};\n\nfunction correctMinValueByEndOnTick(floorFunc, ceilFunc, resolveEndOnTick, endOnTick) {\n  if ((0, _type.isDefined)(endOnTick)) {\n    return endOnTick ? floorFunc : ceilFunc;\n  }\n\n  return function (value, interval, businessViewInfo, forceEndOnTick) {\n    var floorTickValue = floorFunc(value, interval);\n\n    if (value - floorTickValue === 0 || !(0, _type.isDefined)(businessViewInfo) || resolveEndOnTick(value, floorTickValue, interval, businessViewInfo) || forceEndOnTick) {\n      return floorTickValue;\n    }\n\n    return ceilFunc(value, interval);\n  };\n}\n\nfunction resolveEndOnTick(curValue, tickValue, interval, businessViewInfo) {\n  var prevTickDataDiff = interval - mathAbs(tickValue - curValue);\n  var intervalCount = math.max(mathCeil(businessViewInfo.businessDelta / interval), 2);\n  var businessRatio = businessViewInfo.screenDelta / (intervalCount * interval);\n  var potentialTickScreenDiff = math.round(businessRatio * prevTickDataDiff);\n  var delimiterFactor = (0, _utils.getLogExt)(businessRatio * interval / businessViewInfo.axisDivisionFactor, 2) + 1;\n  var delimiterMultiplier = (businessViewInfo.isSpacedMargin ? 2 : 1) * delimiterFactor;\n  var screenDelimiter = math.round(VISIBILITY_DELIMITER * delimiterMultiplier);\n  return businessViewInfo.businessDelta > businessViewInfo.interval && potentialTickScreenDiff >= screenDelimiter;\n}\n\nfunction resolveEndOnTickLog(base) {\n  return function (curValue, tickValue, interval, businessViewInfo) {\n    return resolveEndOnTick((0, _utils.getLogExt)(curValue, base), (0, _utils.getLogExt)(tickValue, base), interval, businessViewInfo);\n  };\n}\n\nfunction resolveEndOnTickDate(curValue, tickValue, interval, businessViewInfo) {\n  return resolveEndOnTick(curValue.valueOf(), tickValue.valueOf(), dateToMilliseconds(interval), businessViewInfo);\n}\n\nfunction getBusinessDelta(data, breaks) {\n  var spacing = 0;\n\n  if (breaks) {\n    spacing = breaks.reduce(function (prev, item) {\n      return prev + (item.to - item.from);\n    }, 0);\n  }\n\n  return mathAbs(data.max - data.min - spacing);\n}\n\nfunction getBusinessDeltaLog(base, allowNegatives, linearThreshold) {\n  var getLog = getLogValue(base, allowNegatives, linearThreshold);\n  return function (data, breaks) {\n    var spacing = 0;\n\n    if (breaks) {\n      spacing = breaks.reduce(function (prev, item) {\n        return prev + mathAbs(getLog(item.to / item.from));\n      }, 0);\n    }\n\n    return mathCeil(mathAbs(getLog(data.max) - getLog(data.min)) - spacing);\n  };\n}\n\nfunction getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor, addTickCount) {\n  var count = screenDelta / axisDivisionFactor - (addTickCount || 0);\n  count = count < 1 ? 1 : count;\n  return businessDelta / count;\n}\n\nfunction getMultiplierFactor(interval, factorDelta) {\n  return mathPow(10, mathFloor((0, _utils.getLogExt)(interval, 10)) + (factorDelta || 0));\n}\n\nfunction calculateTickInterval(businessDelta, screenDelta, tickInterval, forceTickInterval, axisDivisionFactor, multipliers, allowDecimals, addTickCount, _, minTickInterval) {\n  var interval = getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor, addTickCount);\n  var result = 1;\n  var onlyIntegers = false === allowDecimals;\n\n  if (!forceTickInterval || !tickInterval) {\n    if (interval >= 1 || !onlyIntegers && interval > 0) {\n      result = adjustInterval(interval, multipliers, onlyIntegers);\n    }\n\n    if (!tickInterval || !forceTickInterval && tickInterval < result) {\n      tickInterval = result;\n    }\n  }\n\n  if (!forceTickInterval && minTickInterval) {\n    minTickInterval = adjustInterval(minTickInterval, multipliers, onlyIntegers);\n\n    if (minTickInterval > tickInterval) {\n      tickInterval = minTickInterval;\n    }\n  }\n\n  return tickInterval;\n}\n\nfunction adjustInterval(interval, multipliers, onlyIntegers) {\n  var factor = getMultiplierFactor(interval, -1);\n  var result = 1;\n  multipliers = multipliers || NUMBER_MULTIPLIERS;\n\n  if (interval > 0) {\n    interval /= factor;\n    result = multipliers.concat(10 * multipliers[0]).map(function (m) {\n      return 10 * m;\n    }).reduce(function (r, m) {\n      if (.1 === factor && onlyIntegers && 25 === m) {\n        return r;\n      }\n\n      return r < interval ? m : r;\n    }, 0);\n    result = (0, _math.adjust)(result * factor, factor);\n  }\n\n  return result;\n}\n\nfunction calculateMinorTickInterval(businessDelta, screenDelta, tickInterval, axisDivisionFactor) {\n  var interval = getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor);\n  return tickInterval || MINOR_DELIMITERS.reduce(function (r, d) {\n    var cur = businessDelta / d;\n    return cur >= interval ? cur : r;\n  }, 0);\n}\n\nfunction getCalculateTickIntervalLog(skipCalculationLimits) {\n  return function (businessDelta, screenDelta, tickInterval, forceTickInterval, axisDivisionFactor, multipliers, allowDecimals, _, __, minTickInterval) {\n    var interval = getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor);\n    var result = 0;\n    var adjustInterval = getAdjustIntervalLog(skipCalculationLimits);\n\n    if (!forceTickInterval || !tickInterval) {\n      if (interval > 0) {\n        result = adjustInterval(interval, multipliers);\n      }\n\n      if (!tickInterval || !forceTickInterval && tickInterval < result) {\n        tickInterval = result;\n      }\n    }\n\n    if (!forceTickInterval && minTickInterval) {\n      minTickInterval = adjustInterval(minTickInterval, multipliers);\n\n      if (minTickInterval > tickInterval) {\n        tickInterval = minTickInterval;\n      }\n    }\n\n    return tickInterval;\n  };\n}\n\nfunction getAdjustIntervalLog(skipCalculationLimits) {\n  return function (interval, multipliers) {\n    var factor = getMultiplierFactor(interval);\n    multipliers = multipliers || LOGARITHMIC_MULTIPLIERS;\n\n    if (!skipCalculationLimits && factor < 1) {\n      factor = 1;\n    }\n\n    return multipliers.concat(10 * multipliers[0]).reduce(function (r, m) {\n      return r < interval ? m * factor : r;\n    }, 0);\n  };\n}\n\nfunction getDataTimeMultipliers(gapSize) {\n  if (gapSize && gapSize > 2) {\n    return DATETIME_MULTIPLIERS_WITH_BIG_WEEKEND;\n  } else {\n    return DATETIME_MULTIPLIERS;\n  }\n}\n\nfunction numbersReducer(interval, key) {\n  return function (r, m) {\n    if (!r && interval <= convertDateUnitToMilliseconds(key, m)) {\n      r = {};\n      r[key + \"s\"] = m;\n    }\n\n    return r;\n  };\n}\n\nfunction yearsReducer(interval, factor) {\n  return function (r, m) {\n    var years = factor * m;\n\n    if (!r && interval <= convertDateUnitToMilliseconds(\"year\", years) && 2.5 !== years) {\n      r = {\n        years: years\n      };\n    }\n\n    return r;\n  };\n}\n\nfunction calculateTickIntervalDateTime(businessDelta, screenDelta, tickInterval, forceTickInterval, axisDivisionFactor, multipliers, allowDecimals, addTickCount, gapSize, minTickInterval) {\n  if (!forceTickInterval || !tickInterval) {\n    var result = adjustIntervalDateTime(getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor), multipliers, null, gapSize);\n\n    if (!tickInterval || !forceTickInterval && dateToMilliseconds(tickInterval) <= dateToMilliseconds(result)) {\n      tickInterval = result;\n    }\n  }\n\n  if (!forceTickInterval && minTickInterval) {\n    minTickInterval = adjustIntervalDateTime(minTickInterval, multipliers, null, gapSize);\n\n    if (dateToMilliseconds(minTickInterval) > dateToMilliseconds(tickInterval)) {\n      tickInterval = minTickInterval;\n    }\n  }\n\n  return tickInterval;\n}\n\nfunction adjustIntervalDateTime(interval, multipliers, _, gapSize) {\n  var result;\n  multipliers = multipliers || getDataTimeMultipliers(gapSize);\n\n  for (var key in multipliers) {\n    result = multipliers[key].reduce(numbersReducer(interval, key), result);\n\n    if (result) {\n      break;\n    }\n  }\n\n  if (!result) {\n    for (var factor = 1;; factor *= 10) {\n      result = NUMBER_MULTIPLIERS.reduce(yearsReducer(interval, factor), result);\n\n      if (result) {\n        break;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction calculateMinorTickIntervalDateTime(businessDelta, screenDelta, tickInterval, axisDivisionFactor) {\n  return calculateTickIntervalDateTime(businessDelta, screenDelta, tickInterval, true, axisDivisionFactor, DATETIME_MINOR_MULTIPLIERS);\n}\n\nfunction getTickIntervalByCustomTicks(getValue, postProcess) {\n  return function (ticks) {\n    return ticks ? postProcess(mathAbs((0, _math.adjust)(getValue(ticks[1]) - getValue(ticks[0])))) || void 0 : void 0;\n  };\n}\n\nfunction addInterval(value, interval, isNegative) {\n  return _date.default.addInterval(value, interval, isNegative);\n}\n\nfunction addIntervalLog(log, raise) {\n  return function (value, interval, isNegative) {\n    return raise(addInterval(log(value), interval, isNegative));\n  };\n}\n\nfunction addIntervalDate(value, interval, isNegative) {\n  return addInterval(value, interval, isNegative);\n}\n\nfunction addIntervalWithBreaks(addInterval, breaks, correctValue) {\n  breaks = breaks.filter(function (b) {\n    return !b.gapSize;\n  });\n  return function (value, interval, isNegative) {\n    var breakSize;\n    value = addInterval(value, interval, isNegative);\n\n    if (!breaks.every(function (item) {\n      if (value >= addInterval(item.from, interval) && addInterval(value, interval) < item.to) {\n        breakSize = item.to - item.from - 2 * (addInterval(item.from, interval) - item.from);\n      }\n\n      return !breakSize;\n    })) {\n      value = correctValue(addInterval(value, breakSize), interval);\n    }\n\n    return value;\n  };\n}\n\nfunction calculateTicks(addInterval, correctMinValue, adjustInterval, resolveEndOnTick) {\n  return function (data, tickInterval, endOnTick, gaps, breaks, businessDelta, screenDelta, axisDivisionFactor, generateExtraTick) {\n    var correctTickValue = correctTickValueOnGapSize(addInterval, gaps);\n    var min = data.min;\n    var max = data.max;\n    var businessViewInfo = {\n      screenDelta: screenDelta,\n      businessDelta: businessDelta,\n      axisDivisionFactor: axisDivisionFactor,\n      isSpacedMargin: data.isSpacedMargin,\n      interval: tickInterval\n    };\n    var cur = correctMinValue(min, tickInterval, businessViewInfo);\n    var ticks = [];\n\n    if (null === breaks || void 0 === breaks ? void 0 : breaks.length) {\n      addInterval = addIntervalWithBreaks(addInterval, breaks, correctMinValue);\n    }\n\n    if (cur > max) {\n      cur = correctMinValue(min, adjustInterval(businessDelta / 2), businessViewInfo);\n\n      if (cur > max) {\n        endOnTick = true;\n        cur = correctMinValue(min, tickInterval, businessViewInfo, endOnTick);\n      }\n    }\n\n    cur = correctTickValue(cur);\n    var prev;\n\n    while (cur < max && cur !== prev || generateExtraTick && cur <= max) {\n      ticks.push(cur);\n      prev = cur;\n      cur = correctTickValue(addInterval(cur, tickInterval));\n    }\n\n    if (endOnTick || cur - max === 0 || !(0, _type.isDefined)(endOnTick) && resolveEndOnTick(max, cur, tickInterval, businessViewInfo)) {\n      ticks.push(cur);\n    }\n\n    return ticks;\n  };\n}\n\nfunction calculateMinorTicks(updateTickInterval, addInterval, correctMinValue, correctTickValue, ceil) {\n  return function (min, max, majorTicks, minorTickInterval, tickInterval, breaks, maxCount) {\n    var factor = tickInterval / minorTickInterval;\n    var lastMajor = majorTicks[majorTicks.length - 1];\n    var firstMajor = majorTicks[0];\n    var tickBalance = maxCount - 1;\n\n    if (null === breaks || void 0 === breaks ? void 0 : breaks.length) {\n      addInterval = addIntervalWithBreaks(addInterval, breaks, correctMinValue);\n    }\n\n    minorTickInterval = updateTickInterval(minorTickInterval, firstMajor, firstMajor, factor);\n\n    if (0 === minorTickInterval) {\n      return [];\n    }\n\n    var cur = correctTickValue(correctMinValue(min, tickInterval, min), minorTickInterval);\n    minorTickInterval = updateTickInterval(minorTickInterval, firstMajor, cur, factor);\n    var ticks = [];\n\n    while (cur < firstMajor && (!tickBalance || tickBalance > 0)) {\n      cur >= min && ticks.push(cur);\n      tickBalance--;\n      cur = addInterval(cur, minorTickInterval);\n    }\n\n    var middleTicks = majorTicks.reduce(function (r, tick) {\n      tickBalance = maxCount - 1;\n\n      if (null === r.prevTick) {\n        r.prevTick = tick;\n        return r;\n      }\n\n      minorTickInterval = updateTickInterval(minorTickInterval, tick, r.prevTick, factor);\n      var cur = correctTickValue(r.prevTick, minorTickInterval);\n\n      while (cur < tick && (!tickBalance || tickBalance > 0)) {\n        cur !== r.prevTick && r.minors.push(cur);\n        tickBalance--;\n        cur = addInterval(cur, minorTickInterval);\n      }\n\n      r.prevTick = tick;\n      return r;\n    }, {\n      prevTick: null,\n      minors: []\n    });\n    ticks = ticks.concat(middleTicks.minors);\n    var maxValue = ceil(max, tickInterval, min);\n    minorTickInterval = updateTickInterval(minorTickInterval, maxValue, maxValue, factor);\n    cur = correctTickValue(lastMajor, minorTickInterval);\n    var prev;\n\n    while (cur < max && cur !== prev) {\n      ticks.push(cur);\n      prev = cur;\n      cur = addInterval(cur, minorTickInterval);\n    }\n\n    if (lastMajor - max !== 0 && cur - max === 0) {\n      ticks.push(cur);\n    }\n\n    return ticks;\n  };\n}\n\nfunction filterTicks(ticks, breaks) {\n  if (breaks.length) {\n    var result = breaks.reduce(function (result, b) {\n      var tmpTicks = [];\n      var i;\n\n      for (i = result[1]; i < ticks.length; i++) {\n        var tickValue = ticks[i];\n\n        if (tickValue < b.from) {\n          tmpTicks.push(tickValue);\n        }\n\n        if (tickValue >= b.to) {\n          break;\n        }\n      }\n\n      return [result[0].concat(tmpTicks), i];\n    }, [[], 0]);\n    return result[0].concat(ticks.slice(result[1]));\n  }\n\n  return ticks;\n}\n\nfunction correctTickValueOnGapSize(addInterval, breaks) {\n  return function (value) {\n    var gapSize;\n\n    if (!breaks.every(function (item) {\n      if (value >= item.from && value < item.to) {\n        gapSize = item.gapSize;\n      }\n\n      return !gapSize;\n    })) {\n      value = addInterval(value, gapSize);\n    }\n\n    return value;\n  };\n}\n\nfunction generator(options, getBusinessDelta, calculateTickInterval, calculateMinorTickInterval, getMajorTickIntervalByCustomTicks, getMinorTickIntervalByCustomTicks, convertTickInterval, calculateTicks, calculateMinorTicks, processScaleBreaks) {\n  function processCustomTicks(customTicks) {\n    return {\n      tickInterval: getMajorTickIntervalByCustomTicks(customTicks.majors),\n      ticks: customTicks.majors || [],\n      minorTickInterval: getMinorTickIntervalByCustomTicks(customTicks.minors),\n      minorTicks: customTicks.minors || []\n    };\n  }\n\n  function correctUserTickInterval(tickInterval, businessDelta, limit) {\n    if (tickInterval && businessDelta / convertTickInterval(tickInterval) >= limit + 1) {\n      options.incidentOccurred(\"W2003\");\n      tickInterval = void 0;\n    }\n\n    return tickInterval;\n  }\n\n  function generateMajorTicks(ticks, data, businessDelta, screenDelta, tickInterval, forceTickInterval, customTicks, breaks) {\n    if (customTicks.majors) {\n      ticks.breaks = breaks;\n      return ticks;\n    }\n\n    var gaps = breaks.filter(function (b) {\n      return b.gapSize;\n    });\n    var majorTicks;\n    tickInterval = options.skipCalculationLimits ? tickInterval : correctUserTickInterval(tickInterval, businessDelta, screenDelta);\n    tickInterval = calculateTickInterval(businessDelta, screenDelta, tickInterval, forceTickInterval, options.axisDivisionFactor, options.numberMultipliers, options.allowDecimals, breaks.length, gaps[0] && gaps[0].gapSize.days, options.minTickInterval);\n\n    if (!options.skipTickGeneration) {\n      majorTicks = calculateTicks(data, tickInterval, options.endOnTick, gaps, breaks, businessDelta, screenDelta, options.axisDivisionFactor, options.generateExtraTick);\n      breaks = processScaleBreaks(breaks, majorTicks, tickInterval);\n      majorTicks = filterTicks(majorTicks, breaks);\n      ticks.breaks = breaks;\n      ticks.ticks = ticks.ticks.concat(majorTicks);\n    }\n\n    ticks.tickInterval = tickInterval;\n    return ticks;\n  }\n\n  function generateMinorTicks(ticks, data, businessDelta, screenDelta, minorTickInterval, minorTickCount, customTicks) {\n    if (!options.calculateMinors) {\n      return ticks;\n    }\n\n    if (customTicks.minors) {\n      return ticks;\n    }\n\n    var minorBusinessDelta = convertTickInterval(ticks.tickInterval);\n    var minorScreenDelta = screenDelta * minorBusinessDelta / businessDelta;\n    var breaks = ticks.breaks;\n\n    if (!minorTickInterval && minorTickCount) {\n      minorTickInterval = getMinorTickIntervalByCustomTicks([minorBusinessDelta / (minorTickCount + 1), minorBusinessDelta / (minorTickCount + 1) * 2]);\n    } else {\n      minorTickCount = void 0;\n    }\n\n    minorTickInterval = correctUserTickInterval(minorTickInterval, minorBusinessDelta, minorScreenDelta);\n    minorTickInterval = calculateMinorTickInterval(minorBusinessDelta, minorScreenDelta, minorTickInterval, options.minorAxisDivisionFactor);\n    ticks.minorTicks = filterTicks(ticks.minorTicks.concat(calculateMinorTicks(data.min, data.max, ticks.ticks, minorTickInterval, ticks.tickInterval, breaks, minorTickCount)), breaks);\n    ticks.minorTickInterval = minorTickInterval;\n    return ticks;\n  }\n\n  return function (data, screenDelta, tickInterval, forceTickInterval, customTicks, minorTickInterval, minorTickCount, breaks) {\n    customTicks = customTicks || {};\n    var businessDelta = getBusinessDelta(data, breaks);\n    var result = processCustomTicks(customTicks);\n\n    if (!isNaN(businessDelta)) {\n      if (0 === businessDelta && !customTicks.majors) {\n        result.ticks = [data.min];\n      } else {\n        result = generateMajorTicks(result, data, businessDelta, screenDelta, tickInterval, forceTickInterval, customTicks, breaks || []);\n\n        if (!options.skipTickGeneration && businessDelta > 0) {\n          result = generateMinorTicks(result, data, businessDelta, screenDelta, minorTickInterval, minorTickCount, customTicks);\n        }\n      }\n    }\n\n    return result;\n  };\n}\n\nfunction getBaseTick(breakValue, _ref, interval, getValue) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      tick = _ref2[0],\n      insideTick = _ref2[1];\n\n  if (!(0, _type.isDefined)(tick) || mathAbs(getValue(breakValue) - getValue(tick)) / interval > .25) {\n    if ((0, _type.isDefined)(insideTick)) {\n      tick = insideTick;\n    } else {\n      if (!(0, _type.isDefined)(tick)) {\n        tick = breakValue;\n      }\n    }\n  }\n\n  return tick;\n}\n\nfunction getScaleBreaksProcessor(convertTickInterval, getValue, addCorrection) {\n  return function (breaks, ticks, tickInterval) {\n    var interval = convertTickInterval(tickInterval);\n    var correction = .5 * interval;\n    return breaks.reduce(function (result, b) {\n      var breakTicks = ticks.filter(function (tick) {\n        return tick <= b.from;\n      });\n      var from = addCorrection(getBaseTick(b.from, [].concat(breakTicks[breakTicks.length - 1], ticks[breakTicks.length]), interval, getValue), correction);\n      breakTicks = ticks.filter(function (tick) {\n        return tick >= b.to;\n      });\n      var to = addCorrection(getBaseTick(b.to, [].concat(breakTicks[0], ticks[ticks.length - breakTicks.length - 1]), interval, getValue), -correction);\n\n      if (getValue(to) - getValue(from) < interval && !b.gapSize) {\n        return result;\n      }\n\n      if (b.gapSize) {\n        return result.concat([b]);\n      }\n\n      return result.concat([{\n        from: from,\n        to: to,\n        cumulativeWidth: b.cumulativeWidth\n      }]);\n    }, []);\n  };\n}\n\nfunction numericGenerator(options) {\n  var floor = correctValueByInterval(getValue, mathFloor, getValue);\n  var ceil = correctValueByInterval(getValue, mathCeil, getValue);\n  var calculateTickIntervalByCustomTicks = getTickIntervalByCustomTicks(getValue, getValue);\n  return generator(options, getBusinessDelta, calculateTickInterval, calculateMinorTickInterval, calculateTickIntervalByCustomTicks, calculateTickIntervalByCustomTicks, getValue, calculateTicks(addInterval, correctMinValueByEndOnTick(floor, ceil, resolveEndOnTick, options.endOnTick), adjustInterval, resolveEndOnTick), calculateMinorTicks(getValue, addInterval, floor, addInterval, getValue), getScaleBreaksProcessor(getValue, getValue, function (value, correction) {\n    return value + correction;\n  }));\n}\n\nvar correctValueByIntervalLog = function correctValueByIntervalLog(post, getRound, getValue) {\n  return function (value, interval) {\n    return (0, _math.sign)(value) * (0, _math.adjust)(post(getRound(value)((0, _math.adjust)(getValue(value) / interval)) * interval));\n  };\n};\n\nfunction logarithmicGenerator(options) {\n  var base = options.logBase;\n  var raise = raiseTo(base, options.allowNegatives, options.linearThreshold);\n  var log = getLogValue(base, options.allowNegatives, options.linearThreshold);\n  var absLog = logAbsValue(base);\n  var absRaise = mathRaiseTo(base);\n\n  var absFloor = function absFloor(value) {\n    return value < 0 ? mathCeil : mathFloor;\n  };\n\n  var absCeil = function absCeil(value) {\n    return value < 0 ? mathFloor : mathCeil;\n  };\n\n  var floor = correctValueByIntervalLog(absRaise, absFloor, absLog);\n  var ceil = correctValueByIntervalLog(absRaise, absCeil, absLog);\n  var ceilNumber = correctValueByInterval(getValue, mathCeil, getValue);\n  return generator(options, getBusinessDeltaLog(base, options.allowNegatives, options.linearThreshold), getCalculateTickIntervalLog(options.skipCalculationLimits), calculateMinorTickInterval, getTickIntervalByCustomTicks(log, getValue), getTickIntervalByCustomTicks(getValue, getValue), getValue, calculateTicks(addIntervalLog(log, raise), correctMinValueByEndOnTick(floor, ceil, resolveEndOnTickLog(base), options.endOnTick), getAdjustIntervalLog(options.skipCalculationLimits), resolveEndOnTickLog(base)), calculateMinorTicks(function (_, tick, prevTick, factor) {\n    return Math.max(Math.abs(tick), Math.abs(prevTick)) / factor;\n  }, addInterval, floor, ceilNumber, ceil), getScaleBreaksProcessor(getValue, log, function (value, correction) {\n    return raise(log(value) + correction);\n  }));\n}\n\nfunction dateGenerator(options) {\n  function floor(value, interval) {\n    var floorNumber = correctValueByInterval(getValue, mathFloor, getValue);\n    var intervalObject = (0, _type.isString)(interval) ? _date.default.getDateIntervalByString(interval.toLowerCase()) : interval;\n    var divider = dateToMilliseconds(interval);\n\n    if (intervalObject.days % 7 === 0 || interval.quarters) {\n      intervalObject = adjustIntervalDateTime(divider);\n    }\n\n    var correctDateWithUnitBeginning = function correctDateWithUnitBeginning(v) {\n      return _date.default.correctDateWithUnitBeginning(v, intervalObject, null, options.firstDayOfWeek);\n    };\n\n    var floorAtStartDate = function floorAtStartDate(v) {\n      return new Date(mathFloor((v.getTime() - v.getTimezoneOffset() * MINUTE) / divider) * divider + v.getTimezoneOffset() * MINUTE);\n    };\n\n    value = correctDateWithUnitBeginning(value);\n\n    if (\"years\" in intervalObject) {\n      value.setFullYear(floorNumber(value.getFullYear(), intervalObject.years, 0));\n    } else {\n      if (\"quarters\" in intervalObject) {\n        value = correctDateWithUnitBeginning(floorAtStartDate(value));\n      } else {\n        if (\"months\" in intervalObject) {\n          value.setMonth(floorNumber(value.getMonth(), intervalObject.months, 0));\n        } else {\n          if (\"weeks\" in intervalObject || \"days\" in intervalObject) {\n            value = correctDateWithUnitBeginning(floorAtStartDate(value));\n          } else {\n            if (\"hours\" in intervalObject) {\n              value.setHours(floorNumber(value.getHours(), intervalObject.hours, 0));\n            } else {\n              if (\"minutes\" in intervalObject) {\n                value.setMinutes(floorNumber(value.getMinutes(), intervalObject.minutes, 0));\n              } else {\n                if (\"seconds\" in intervalObject) {\n                  value.setSeconds(floorNumber(value.getSeconds(), intervalObject.seconds, 0));\n                } else {\n                  if (\"milliseconds\" in intervalObject) {\n                    value = floorAtStartDate(value);\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return value;\n  }\n\n  function ceil(value, interval) {\n    var newValue = floor(value, interval);\n\n    while (value - newValue > 0) {\n      newValue = addIntervalDate(newValue, interval);\n    }\n\n    return newValue;\n  }\n\n  var calculateTickIntervalByCustomTicks = getTickIntervalByCustomTicks(getValue, _date.default.convertMillisecondsToDateUnits);\n  return generator(options, getBusinessDelta, calculateTickIntervalDateTime, calculateMinorTickIntervalDateTime, calculateTickIntervalByCustomTicks, calculateTickIntervalByCustomTicks, dateToMilliseconds, calculateTicks(addIntervalDate, correctMinValueByEndOnTick(floor, ceil, resolveEndOnTickDate, options.endOnTick), adjustIntervalDateTime, resolveEndOnTickDate), calculateMinorTicks(getValue, addIntervalDate, floor, addIntervalDate, getValue), getScaleBreaksProcessor(dateToMilliseconds, getValue, function (value, correction) {\n    return new Date(value.getTime() + correction);\n  }));\n}\n\nvar tickGenerator = function tickGenerator(options) {\n  var result;\n\n  if (options.rangeIsEmpty) {\n    result = dummyGenerator(options);\n  } else {\n    if (\"discrete\" === options.axisType) {\n      result = discreteGenerator(options);\n    } else {\n      if (\"logarithmic\" === options.axisType) {\n        result = logarithmicGenerator(options);\n      } else {\n        if (\"datetime\" === options.dataType) {\n          result = dateGenerator(options);\n        } else {\n          result = numericGenerator(options);\n        }\n      }\n    }\n  }\n\n  return result;\n};\n\nexports.tickGenerator = tickGenerator;","map":{"version":3,"sources":["E:/Monday.com/quickstart-react/node_modules/devextreme/viz/axes/tick_generator.js"],"names":["exports","tickGenerator","_utils","require","_date","_interopRequireDefault","_type","_math","_extend","obj","__esModule","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","len","length","arr2","Symbol","iterator","_arr","_n","_d","_e","_s","_i","next","done","push","value","err","return","isArray","convertDateUnitToMilliseconds","default","dateToMilliseconds","math","Math","mathAbs","abs","mathFloor","floor","mathCeil","ceil","mathPow","pow","NUMBER_MULTIPLIERS","LOGARITHMIC_MULTIPLIERS","DATETIME_MULTIPLIERS","millisecond","second","minute","hour","day","week","month","DATETIME_MULTIPLIERS_WITH_BIG_WEEKEND","extend","DATETIME_MINOR_MULTIPLIERS","MINOR_DELIMITERS","VISIBILITY_DELIMITER","MINUTE","dummyGenerator","options","data","screenDelta","tickInterval","forceTickInterval","count","axisDivisionFactor","interval","ticks","apply","map","_","discreteGenerator","categories","getCategoriesInfo","min","max","getValue","getLogValue","base","allowNegatives","linearThreshold","getLogExt","raiseTo","raiseToExt","mathRaiseTo","logAbsValue","getLog","correctValueByInterval","post","round","adjust","correctMinValueByEndOnTick","floorFunc","ceilFunc","resolveEndOnTick","endOnTick","isDefined","businessViewInfo","forceEndOnTick","floorTickValue","curValue","tickValue","prevTickDataDiff","intervalCount","businessDelta","businessRatio","potentialTickScreenDiff","delimiterFactor","delimiterMultiplier","isSpacedMargin","screenDelimiter","resolveEndOnTickLog","resolveEndOnTickDate","valueOf","getBusinessDelta","breaks","spacing","reduce","prev","item","to","getBusinessDeltaLog","getIntervalByFactor","addTickCount","getMultiplierFactor","factorDelta","calculateTickInterval","multipliers","allowDecimals","minTickInterval","result","onlyIntegers","adjustInterval","factor","concat","m","r","calculateMinorTickInterval","d","cur","getCalculateTickIntervalLog","skipCalculationLimits","__","getAdjustIntervalLog","getDataTimeMultipliers","gapSize","numbersReducer","key","yearsReducer","years","calculateTickIntervalDateTime","adjustIntervalDateTime","calculateMinorTickIntervalDateTime","getTickIntervalByCustomTicks","postProcess","addInterval","isNegative","addIntervalLog","log","raise","addIntervalDate","addIntervalWithBreaks","correctValue","filter","b","breakSize","every","calculateTicks","correctMinValue","gaps","generateExtraTick","correctTickValue","correctTickValueOnGapSize","calculateMinorTicks","updateTickInterval","majorTicks","minorTickInterval","maxCount","lastMajor","firstMajor","tickBalance","middleTicks","tick","prevTick","minors","maxValue","filterTicks","tmpTicks","generator","getMajorTickIntervalByCustomTicks","getMinorTickIntervalByCustomTicks","convertTickInterval","processScaleBreaks","processCustomTicks","customTicks","majors","minorTicks","correctUserTickInterval","limit","incidentOccurred","generateMajorTicks","numberMultipliers","days","skipTickGeneration","generateMinorTicks","minorTickCount","calculateMinors","minorBusinessDelta","minorScreenDelta","minorAxisDivisionFactor","isNaN","getBaseTick","breakValue","_ref","_ref2","insideTick","getScaleBreaksProcessor","addCorrection","correction","breakTicks","cumulativeWidth","numericGenerator","calculateTickIntervalByCustomTicks","correctValueByIntervalLog","getRound","sign","logarithmicGenerator","logBase","absLog","absRaise","absFloor","absCeil","ceilNumber","dateGenerator","floorNumber","intervalObject","isString","getDateIntervalByString","toLowerCase","divider","quarters","correctDateWithUnitBeginning","v","firstDayOfWeek","floorAtStartDate","Date","getTime","getTimezoneOffset","setFullYear","getFullYear","setMonth","getMonth","months","setHours","getHours","hours","setMinutes","getMinutes","minutes","setSeconds","getSeconds","seconds","newValue","convertMillisecondsToDateUnits","rangeIsEmpty","axisType","dataType"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/axes/tick_generator.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.tickGenerator = void 0;\r\nvar _utils = require(\"../core/utils\");\r\nvar _date = _interopRequireDefault(require(\"../../core/utils/date\"));\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _math = require(\"../../core/utils/math\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _slicedToArray(arr, i) {\r\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest()\r\n}\r\n\r\nfunction _nonIterableRest() {\r\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")\r\n}\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) {\r\n    if (!o) {\r\n        return\r\n    }\r\n    if (\"string\" === typeof o) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n    var n = Object.prototype.toString.call(o).slice(8, -1);\r\n    if (\"Object\" === n && o.constructor) {\r\n        n = o.constructor.name\r\n    }\r\n    if (\"Map\" === n || \"Set\" === n) {\r\n        return Array.from(o)\r\n    }\r\n    if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) {\r\n        return _arrayLikeToArray(o, minLen)\r\n    }\r\n}\r\n\r\nfunction _arrayLikeToArray(arr, len) {\r\n    if (null == len || len > arr.length) {\r\n        len = arr.length\r\n    }\r\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\r\n        arr2[i] = arr[i]\r\n    }\r\n    return arr2\r\n}\r\n\r\nfunction _iterableToArrayLimit(arr, i) {\r\n    if (\"undefined\" === typeof Symbol || !(Symbol.iterator in Object(arr))) {\r\n        return\r\n    }\r\n    var _arr = [];\r\n    var _n = true;\r\n    var _d = false;\r\n    var _e = void 0;\r\n    try {\r\n        for (var _s, _i = arr[Symbol.iterator](); !(_n = (_s = _i.next()).done); _n = true) {\r\n            _arr.push(_s.value);\r\n            if (i && _arr.length === i) {\r\n                break\r\n            }\r\n        }\r\n    } catch (err) {\r\n        _d = true;\r\n        _e = err\r\n    } finally {\r\n        try {\r\n            if (!_n && null != _i.return) {\r\n                _i.return()\r\n            }\r\n        } finally {\r\n            if (_d) {\r\n                throw _e\r\n            }\r\n        }\r\n    }\r\n    return _arr\r\n}\r\n\r\nfunction _arrayWithHoles(arr) {\r\n    if (Array.isArray(arr)) {\r\n        return arr\r\n    }\r\n}\r\nvar convertDateUnitToMilliseconds = _date.default.convertDateUnitToMilliseconds;\r\nvar dateToMilliseconds = _date.default.dateToMilliseconds;\r\nvar math = Math;\r\nvar mathAbs = math.abs;\r\nvar mathFloor = math.floor;\r\nvar mathCeil = math.ceil;\r\nvar mathPow = math.pow;\r\nvar NUMBER_MULTIPLIERS = [1, 2, 2.5, 5];\r\nvar LOGARITHMIC_MULTIPLIERS = [1, 2, 3, 5];\r\nvar DATETIME_MULTIPLIERS = {\r\n    millisecond: [1, 2, 5, 10, 25, 50, 100, 250, 500],\r\n    second: [1, 2, 3, 5, 10, 15, 20, 30],\r\n    minute: [1, 2, 3, 5, 10, 15, 20, 30],\r\n    hour: [1, 2, 3, 4, 6, 8, 12],\r\n    day: [1, 2],\r\n    week: [1, 2],\r\n    month: [1, 2, 3, 6]\r\n};\r\nvar DATETIME_MULTIPLIERS_WITH_BIG_WEEKEND = (0, _extend.extend)({}, DATETIME_MULTIPLIERS, {\r\n    day: [1]\r\n});\r\nvar DATETIME_MINOR_MULTIPLIERS = {\r\n    millisecond: [1, 2, 5, 10, 25, 50, 100, 250, 500],\r\n    second: [1, 2, 3, 5, 10, 15, 20, 30],\r\n    minute: [1, 2, 3, 5, 10, 15, 20, 30],\r\n    hour: [1, 2, 3, 4, 6, 8, 12],\r\n    day: [1, 2, 3, 7, 14],\r\n    month: [1, 2, 3, 6]\r\n};\r\nvar MINOR_DELIMITERS = [2, 4, 5, 8, 10];\r\nvar VISIBILITY_DELIMITER = 3;\r\nvar MINUTE = 6e4;\r\n\r\nfunction dummyGenerator(options) {\r\n    return function(data, screenDelta, tickInterval, forceTickInterval) {\r\n        var count = mathFloor(screenDelta / options.axisDivisionFactor);\r\n        count = count < 1 ? 1 : count;\r\n        var interval = screenDelta / count;\r\n        return {\r\n            ticks: interval > 0 ? Array.apply(null, new Array(count + 1)).map(function(_, i) {\r\n                return interval * i\r\n            }) : [],\r\n            tickInterval: interval\r\n        }\r\n    }\r\n}\r\n\r\nfunction discreteGenerator(options) {\r\n    return function(data, screenDelta, tickInterval, forceTickInterval) {\r\n        var categories = (0, _utils.getCategoriesInfo)(data.categories, data.min, data.max).categories;\r\n        return {\r\n            ticks: categories,\r\n            tickInterval: mathCeil(categories.length * options.axisDivisionFactor / screenDelta)\r\n        }\r\n    }\r\n}\r\nvar getValue = function(value) {\r\n    return value\r\n};\r\nvar getLogValue = function(base, allowNegatives, linearThreshold) {\r\n    return function(value) {\r\n        return (0, _utils.getLogExt)(value, base, allowNegatives, linearThreshold)\r\n    }\r\n};\r\nvar raiseTo = function(base, allowNegatives, linearThreshold) {\r\n    return function(value) {\r\n        return (0, _utils.raiseToExt)(value, base, allowNegatives, linearThreshold)\r\n    }\r\n};\r\nvar mathRaiseTo = function(base) {\r\n    return function(value) {\r\n        return (0, _utils.raiseTo)(value, base)\r\n    }\r\n};\r\nvar logAbsValue = function(base) {\r\n    return function(value) {\r\n        return 0 === value ? 0 : (0, _utils.getLog)(mathAbs(value), base)\r\n    }\r\n};\r\nvar correctValueByInterval = function(post, round, getValue) {\r\n    return function(value, interval) {\r\n        return (0, _math.adjust)(post(round((0, _math.adjust)(getValue(value) / interval)) * interval))\r\n    }\r\n};\r\n\r\nfunction correctMinValueByEndOnTick(floorFunc, ceilFunc, resolveEndOnTick, endOnTick) {\r\n    if ((0, _type.isDefined)(endOnTick)) {\r\n        return endOnTick ? floorFunc : ceilFunc\r\n    }\r\n    return function(value, interval, businessViewInfo, forceEndOnTick) {\r\n        var floorTickValue = floorFunc(value, interval);\r\n        if (value - floorTickValue === 0 || !(0, _type.isDefined)(businessViewInfo) || resolveEndOnTick(value, floorTickValue, interval, businessViewInfo) || forceEndOnTick) {\r\n            return floorTickValue\r\n        }\r\n        return ceilFunc(value, interval)\r\n    }\r\n}\r\n\r\nfunction resolveEndOnTick(curValue, tickValue, interval, businessViewInfo) {\r\n    var prevTickDataDiff = interval - mathAbs(tickValue - curValue);\r\n    var intervalCount = math.max(mathCeil(businessViewInfo.businessDelta / interval), 2);\r\n    var businessRatio = businessViewInfo.screenDelta / (intervalCount * interval);\r\n    var potentialTickScreenDiff = math.round(businessRatio * prevTickDataDiff);\r\n    var delimiterFactor = (0, _utils.getLogExt)(businessRatio * interval / businessViewInfo.axisDivisionFactor, 2) + 1;\r\n    var delimiterMultiplier = (businessViewInfo.isSpacedMargin ? 2 : 1) * delimiterFactor;\r\n    var screenDelimiter = math.round(VISIBILITY_DELIMITER * delimiterMultiplier);\r\n    return businessViewInfo.businessDelta > businessViewInfo.interval && potentialTickScreenDiff >= screenDelimiter\r\n}\r\n\r\nfunction resolveEndOnTickLog(base) {\r\n    return function(curValue, tickValue, interval, businessViewInfo) {\r\n        return resolveEndOnTick((0, _utils.getLogExt)(curValue, base), (0, _utils.getLogExt)(tickValue, base), interval, businessViewInfo)\r\n    }\r\n}\r\n\r\nfunction resolveEndOnTickDate(curValue, tickValue, interval, businessViewInfo) {\r\n    return resolveEndOnTick(curValue.valueOf(), tickValue.valueOf(), dateToMilliseconds(interval), businessViewInfo)\r\n}\r\n\r\nfunction getBusinessDelta(data, breaks) {\r\n    var spacing = 0;\r\n    if (breaks) {\r\n        spacing = breaks.reduce(function(prev, item) {\r\n            return prev + (item.to - item.from)\r\n        }, 0)\r\n    }\r\n    return mathAbs(data.max - data.min - spacing)\r\n}\r\n\r\nfunction getBusinessDeltaLog(base, allowNegatives, linearThreshold) {\r\n    var getLog = getLogValue(base, allowNegatives, linearThreshold);\r\n    return function(data, breaks) {\r\n        var spacing = 0;\r\n        if (breaks) {\r\n            spacing = breaks.reduce(function(prev, item) {\r\n                return prev + mathAbs(getLog(item.to / item.from))\r\n            }, 0)\r\n        }\r\n        return mathCeil(mathAbs(getLog(data.max) - getLog(data.min)) - spacing)\r\n    }\r\n}\r\n\r\nfunction getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor, addTickCount) {\r\n    var count = screenDelta / axisDivisionFactor - (addTickCount || 0);\r\n    count = count < 1 ? 1 : count;\r\n    return businessDelta / count\r\n}\r\n\r\nfunction getMultiplierFactor(interval, factorDelta) {\r\n    return mathPow(10, mathFloor((0, _utils.getLogExt)(interval, 10)) + (factorDelta || 0))\r\n}\r\n\r\nfunction calculateTickInterval(businessDelta, screenDelta, tickInterval, forceTickInterval, axisDivisionFactor, multipliers, allowDecimals, addTickCount, _, minTickInterval) {\r\n    var interval = getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor, addTickCount);\r\n    var result = 1;\r\n    var onlyIntegers = false === allowDecimals;\r\n    if (!forceTickInterval || !tickInterval) {\r\n        if (interval >= 1 || !onlyIntegers && interval > 0) {\r\n            result = adjustInterval(interval, multipliers, onlyIntegers)\r\n        }\r\n        if (!tickInterval || !forceTickInterval && tickInterval < result) {\r\n            tickInterval = result\r\n        }\r\n    }\r\n    if (!forceTickInterval && minTickInterval) {\r\n        minTickInterval = adjustInterval(minTickInterval, multipliers, onlyIntegers);\r\n        if (minTickInterval > tickInterval) {\r\n            tickInterval = minTickInterval\r\n        }\r\n    }\r\n    return tickInterval\r\n}\r\n\r\nfunction adjustInterval(interval, multipliers, onlyIntegers) {\r\n    var factor = getMultiplierFactor(interval, -1);\r\n    var result = 1;\r\n    multipliers = multipliers || NUMBER_MULTIPLIERS;\r\n    if (interval > 0) {\r\n        interval /= factor;\r\n        result = multipliers.concat(10 * multipliers[0]).map(function(m) {\r\n            return 10 * m\r\n        }).reduce(function(r, m) {\r\n            if (.1 === factor && onlyIntegers && 25 === m) {\r\n                return r\r\n            }\r\n            return r < interval ? m : r\r\n        }, 0);\r\n        result = (0, _math.adjust)(result * factor, factor)\r\n    }\r\n    return result\r\n}\r\n\r\nfunction calculateMinorTickInterval(businessDelta, screenDelta, tickInterval, axisDivisionFactor) {\r\n    var interval = getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor);\r\n    return tickInterval || MINOR_DELIMITERS.reduce(function(r, d) {\r\n        var cur = businessDelta / d;\r\n        return cur >= interval ? cur : r\r\n    }, 0)\r\n}\r\n\r\nfunction getCalculateTickIntervalLog(skipCalculationLimits) {\r\n    return function(businessDelta, screenDelta, tickInterval, forceTickInterval, axisDivisionFactor, multipliers, allowDecimals, _, __, minTickInterval) {\r\n        var interval = getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor);\r\n        var result = 0;\r\n        var adjustInterval = getAdjustIntervalLog(skipCalculationLimits);\r\n        if (!forceTickInterval || !tickInterval) {\r\n            if (interval > 0) {\r\n                result = adjustInterval(interval, multipliers)\r\n            }\r\n            if (!tickInterval || !forceTickInterval && tickInterval < result) {\r\n                tickInterval = result\r\n            }\r\n        }\r\n        if (!forceTickInterval && minTickInterval) {\r\n            minTickInterval = adjustInterval(minTickInterval, multipliers);\r\n            if (minTickInterval > tickInterval) {\r\n                tickInterval = minTickInterval\r\n            }\r\n        }\r\n        return tickInterval\r\n    }\r\n}\r\n\r\nfunction getAdjustIntervalLog(skipCalculationLimits) {\r\n    return function(interval, multipliers) {\r\n        var factor = getMultiplierFactor(interval);\r\n        multipliers = multipliers || LOGARITHMIC_MULTIPLIERS;\r\n        if (!skipCalculationLimits && factor < 1) {\r\n            factor = 1\r\n        }\r\n        return multipliers.concat(10 * multipliers[0]).reduce(function(r, m) {\r\n            return r < interval ? m * factor : r\r\n        }, 0)\r\n    }\r\n}\r\n\r\nfunction getDataTimeMultipliers(gapSize) {\r\n    if (gapSize && gapSize > 2) {\r\n        return DATETIME_MULTIPLIERS_WITH_BIG_WEEKEND\r\n    } else {\r\n        return DATETIME_MULTIPLIERS\r\n    }\r\n}\r\n\r\nfunction numbersReducer(interval, key) {\r\n    return function(r, m) {\r\n        if (!r && interval <= convertDateUnitToMilliseconds(key, m)) {\r\n            r = {};\r\n            r[key + \"s\"] = m\r\n        }\r\n        return r\r\n    }\r\n}\r\n\r\nfunction yearsReducer(interval, factor) {\r\n    return function(r, m) {\r\n        var years = factor * m;\r\n        if (!r && interval <= convertDateUnitToMilliseconds(\"year\", years) && 2.5 !== years) {\r\n            r = {\r\n                years: years\r\n            }\r\n        }\r\n        return r\r\n    }\r\n}\r\n\r\nfunction calculateTickIntervalDateTime(businessDelta, screenDelta, tickInterval, forceTickInterval, axisDivisionFactor, multipliers, allowDecimals, addTickCount, gapSize, minTickInterval) {\r\n    if (!forceTickInterval || !tickInterval) {\r\n        var result = adjustIntervalDateTime(getIntervalByFactor(businessDelta, screenDelta, axisDivisionFactor), multipliers, null, gapSize);\r\n        if (!tickInterval || !forceTickInterval && dateToMilliseconds(tickInterval) <= dateToMilliseconds(result)) {\r\n            tickInterval = result\r\n        }\r\n    }\r\n    if (!forceTickInterval && minTickInterval) {\r\n        minTickInterval = adjustIntervalDateTime(minTickInterval, multipliers, null, gapSize);\r\n        if (dateToMilliseconds(minTickInterval) > dateToMilliseconds(tickInterval)) {\r\n            tickInterval = minTickInterval\r\n        }\r\n    }\r\n    return tickInterval\r\n}\r\n\r\nfunction adjustIntervalDateTime(interval, multipliers, _, gapSize) {\r\n    var result;\r\n    multipliers = multipliers || getDataTimeMultipliers(gapSize);\r\n    for (var key in multipliers) {\r\n        result = multipliers[key].reduce(numbersReducer(interval, key), result);\r\n        if (result) {\r\n            break\r\n        }\r\n    }\r\n    if (!result) {\r\n        for (var factor = 1;; factor *= 10) {\r\n            result = NUMBER_MULTIPLIERS.reduce(yearsReducer(interval, factor), result);\r\n            if (result) {\r\n                break\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction calculateMinorTickIntervalDateTime(businessDelta, screenDelta, tickInterval, axisDivisionFactor) {\r\n    return calculateTickIntervalDateTime(businessDelta, screenDelta, tickInterval, true, axisDivisionFactor, DATETIME_MINOR_MULTIPLIERS)\r\n}\r\n\r\nfunction getTickIntervalByCustomTicks(getValue, postProcess) {\r\n    return function(ticks) {\r\n        return ticks ? postProcess(mathAbs((0, _math.adjust)(getValue(ticks[1]) - getValue(ticks[0])))) || void 0 : void 0\r\n    }\r\n}\r\n\r\nfunction addInterval(value, interval, isNegative) {\r\n    return _date.default.addInterval(value, interval, isNegative)\r\n}\r\n\r\nfunction addIntervalLog(log, raise) {\r\n    return function(value, interval, isNegative) {\r\n        return raise(addInterval(log(value), interval, isNegative))\r\n    }\r\n}\r\n\r\nfunction addIntervalDate(value, interval, isNegative) {\r\n    return addInterval(value, interval, isNegative)\r\n}\r\n\r\nfunction addIntervalWithBreaks(addInterval, breaks, correctValue) {\r\n    breaks = breaks.filter(function(b) {\r\n        return !b.gapSize\r\n    });\r\n    return function(value, interval, isNegative) {\r\n        var breakSize;\r\n        value = addInterval(value, interval, isNegative);\r\n        if (!breaks.every(function(item) {\r\n                if (value >= addInterval(item.from, interval) && addInterval(value, interval) < item.to) {\r\n                    breakSize = item.to - item.from - 2 * (addInterval(item.from, interval) - item.from)\r\n                }\r\n                return !breakSize\r\n            })) {\r\n            value = correctValue(addInterval(value, breakSize), interval)\r\n        }\r\n        return value\r\n    }\r\n}\r\n\r\nfunction calculateTicks(addInterval, correctMinValue, adjustInterval, resolveEndOnTick) {\r\n    return function(data, tickInterval, endOnTick, gaps, breaks, businessDelta, screenDelta, axisDivisionFactor, generateExtraTick) {\r\n        var correctTickValue = correctTickValueOnGapSize(addInterval, gaps);\r\n        var min = data.min;\r\n        var max = data.max;\r\n        var businessViewInfo = {\r\n            screenDelta: screenDelta,\r\n            businessDelta: businessDelta,\r\n            axisDivisionFactor: axisDivisionFactor,\r\n            isSpacedMargin: data.isSpacedMargin,\r\n            interval: tickInterval\r\n        };\r\n        var cur = correctMinValue(min, tickInterval, businessViewInfo);\r\n        var ticks = [];\r\n        if (null === breaks || void 0 === breaks ? void 0 : breaks.length) {\r\n            addInterval = addIntervalWithBreaks(addInterval, breaks, correctMinValue)\r\n        }\r\n        if (cur > max) {\r\n            cur = correctMinValue(min, adjustInterval(businessDelta / 2), businessViewInfo);\r\n            if (cur > max) {\r\n                endOnTick = true;\r\n                cur = correctMinValue(min, tickInterval, businessViewInfo, endOnTick)\r\n            }\r\n        }\r\n        cur = correctTickValue(cur);\r\n        var prev;\r\n        while (cur < max && cur !== prev || generateExtraTick && cur <= max) {\r\n            ticks.push(cur);\r\n            prev = cur;\r\n            cur = correctTickValue(addInterval(cur, tickInterval))\r\n        }\r\n        if (endOnTick || cur - max === 0 || !(0, _type.isDefined)(endOnTick) && resolveEndOnTick(max, cur, tickInterval, businessViewInfo)) {\r\n            ticks.push(cur)\r\n        }\r\n        return ticks\r\n    }\r\n}\r\n\r\nfunction calculateMinorTicks(updateTickInterval, addInterval, correctMinValue, correctTickValue, ceil) {\r\n    return function(min, max, majorTicks, minorTickInterval, tickInterval, breaks, maxCount) {\r\n        var factor = tickInterval / minorTickInterval;\r\n        var lastMajor = majorTicks[majorTicks.length - 1];\r\n        var firstMajor = majorTicks[0];\r\n        var tickBalance = maxCount - 1;\r\n        if (null === breaks || void 0 === breaks ? void 0 : breaks.length) {\r\n            addInterval = addIntervalWithBreaks(addInterval, breaks, correctMinValue)\r\n        }\r\n        minorTickInterval = updateTickInterval(minorTickInterval, firstMajor, firstMajor, factor);\r\n        if (0 === minorTickInterval) {\r\n            return []\r\n        }\r\n        var cur = correctTickValue(correctMinValue(min, tickInterval, min), minorTickInterval);\r\n        minorTickInterval = updateTickInterval(minorTickInterval, firstMajor, cur, factor);\r\n        var ticks = [];\r\n        while (cur < firstMajor && (!tickBalance || tickBalance > 0)) {\r\n            cur >= min && ticks.push(cur);\r\n            tickBalance--;\r\n            cur = addInterval(cur, minorTickInterval)\r\n        }\r\n        var middleTicks = majorTicks.reduce(function(r, tick) {\r\n            tickBalance = maxCount - 1;\r\n            if (null === r.prevTick) {\r\n                r.prevTick = tick;\r\n                return r\r\n            }\r\n            minorTickInterval = updateTickInterval(minorTickInterval, tick, r.prevTick, factor);\r\n            var cur = correctTickValue(r.prevTick, minorTickInterval);\r\n            while (cur < tick && (!tickBalance || tickBalance > 0)) {\r\n                cur !== r.prevTick && r.minors.push(cur);\r\n                tickBalance--;\r\n                cur = addInterval(cur, minorTickInterval)\r\n            }\r\n            r.prevTick = tick;\r\n            return r\r\n        }, {\r\n            prevTick: null,\r\n            minors: []\r\n        });\r\n        ticks = ticks.concat(middleTicks.minors);\r\n        var maxValue = ceil(max, tickInterval, min);\r\n        minorTickInterval = updateTickInterval(minorTickInterval, maxValue, maxValue, factor);\r\n        cur = correctTickValue(lastMajor, minorTickInterval);\r\n        var prev;\r\n        while (cur < max && cur !== prev) {\r\n            ticks.push(cur);\r\n            prev = cur;\r\n            cur = addInterval(cur, minorTickInterval)\r\n        }\r\n        if (lastMajor - max !== 0 && cur - max === 0) {\r\n            ticks.push(cur)\r\n        }\r\n        return ticks\r\n    }\r\n}\r\n\r\nfunction filterTicks(ticks, breaks) {\r\n    if (breaks.length) {\r\n        var result = breaks.reduce(function(result, b) {\r\n            var tmpTicks = [];\r\n            var i;\r\n            for (i = result[1]; i < ticks.length; i++) {\r\n                var tickValue = ticks[i];\r\n                if (tickValue < b.from) {\r\n                    tmpTicks.push(tickValue)\r\n                }\r\n                if (tickValue >= b.to) {\r\n                    break\r\n                }\r\n            }\r\n            return [result[0].concat(tmpTicks), i]\r\n        }, [\r\n            [], 0\r\n        ]);\r\n        return result[0].concat(ticks.slice(result[1]))\r\n    }\r\n    return ticks\r\n}\r\n\r\nfunction correctTickValueOnGapSize(addInterval, breaks) {\r\n    return function(value) {\r\n        var gapSize;\r\n        if (!breaks.every(function(item) {\r\n                if (value >= item.from && value < item.to) {\r\n                    gapSize = item.gapSize\r\n                }\r\n                return !gapSize\r\n            })) {\r\n            value = addInterval(value, gapSize)\r\n        }\r\n        return value\r\n    }\r\n}\r\n\r\nfunction generator(options, getBusinessDelta, calculateTickInterval, calculateMinorTickInterval, getMajorTickIntervalByCustomTicks, getMinorTickIntervalByCustomTicks, convertTickInterval, calculateTicks, calculateMinorTicks, processScaleBreaks) {\r\n    function processCustomTicks(customTicks) {\r\n        return {\r\n            tickInterval: getMajorTickIntervalByCustomTicks(customTicks.majors),\r\n            ticks: customTicks.majors || [],\r\n            minorTickInterval: getMinorTickIntervalByCustomTicks(customTicks.minors),\r\n            minorTicks: customTicks.minors || []\r\n        }\r\n    }\r\n\r\n    function correctUserTickInterval(tickInterval, businessDelta, limit) {\r\n        if (tickInterval && businessDelta / convertTickInterval(tickInterval) >= limit + 1) {\r\n            options.incidentOccurred(\"W2003\");\r\n            tickInterval = void 0\r\n        }\r\n        return tickInterval\r\n    }\r\n\r\n    function generateMajorTicks(ticks, data, businessDelta, screenDelta, tickInterval, forceTickInterval, customTicks, breaks) {\r\n        if (customTicks.majors) {\r\n            ticks.breaks = breaks;\r\n            return ticks\r\n        }\r\n        var gaps = breaks.filter(function(b) {\r\n            return b.gapSize\r\n        });\r\n        var majorTicks;\r\n        tickInterval = options.skipCalculationLimits ? tickInterval : correctUserTickInterval(tickInterval, businessDelta, screenDelta);\r\n        tickInterval = calculateTickInterval(businessDelta, screenDelta, tickInterval, forceTickInterval, options.axisDivisionFactor, options.numberMultipliers, options.allowDecimals, breaks.length, gaps[0] && gaps[0].gapSize.days, options.minTickInterval);\r\n        if (!options.skipTickGeneration) {\r\n            majorTicks = calculateTicks(data, tickInterval, options.endOnTick, gaps, breaks, businessDelta, screenDelta, options.axisDivisionFactor, options.generateExtraTick);\r\n            breaks = processScaleBreaks(breaks, majorTicks, tickInterval);\r\n            majorTicks = filterTicks(majorTicks, breaks);\r\n            ticks.breaks = breaks;\r\n            ticks.ticks = ticks.ticks.concat(majorTicks)\r\n        }\r\n        ticks.tickInterval = tickInterval;\r\n        return ticks\r\n    }\r\n\r\n    function generateMinorTicks(ticks, data, businessDelta, screenDelta, minorTickInterval, minorTickCount, customTicks) {\r\n        if (!options.calculateMinors) {\r\n            return ticks\r\n        }\r\n        if (customTicks.minors) {\r\n            return ticks\r\n        }\r\n        var minorBusinessDelta = convertTickInterval(ticks.tickInterval);\r\n        var minorScreenDelta = screenDelta * minorBusinessDelta / businessDelta;\r\n        var breaks = ticks.breaks;\r\n        if (!minorTickInterval && minorTickCount) {\r\n            minorTickInterval = getMinorTickIntervalByCustomTicks([minorBusinessDelta / (minorTickCount + 1), minorBusinessDelta / (minorTickCount + 1) * 2])\r\n        } else {\r\n            minorTickCount = void 0\r\n        }\r\n        minorTickInterval = correctUserTickInterval(minorTickInterval, minorBusinessDelta, minorScreenDelta);\r\n        minorTickInterval = calculateMinorTickInterval(minorBusinessDelta, minorScreenDelta, minorTickInterval, options.minorAxisDivisionFactor);\r\n        ticks.minorTicks = filterTicks(ticks.minorTicks.concat(calculateMinorTicks(data.min, data.max, ticks.ticks, minorTickInterval, ticks.tickInterval, breaks, minorTickCount)), breaks);\r\n        ticks.minorTickInterval = minorTickInterval;\r\n        return ticks\r\n    }\r\n    return function(data, screenDelta, tickInterval, forceTickInterval, customTicks, minorTickInterval, minorTickCount, breaks) {\r\n        customTicks = customTicks || {};\r\n        var businessDelta = getBusinessDelta(data, breaks);\r\n        var result = processCustomTicks(customTicks);\r\n        if (!isNaN(businessDelta)) {\r\n            if (0 === businessDelta && !customTicks.majors) {\r\n                result.ticks = [data.min]\r\n            } else {\r\n                result = generateMajorTicks(result, data, businessDelta, screenDelta, tickInterval, forceTickInterval, customTicks, breaks || []);\r\n                if (!options.skipTickGeneration && businessDelta > 0) {\r\n                    result = generateMinorTicks(result, data, businessDelta, screenDelta, minorTickInterval, minorTickCount, customTicks)\r\n                }\r\n            }\r\n        }\r\n        return result\r\n    }\r\n}\r\n\r\nfunction getBaseTick(breakValue, _ref, interval, getValue) {\r\n    var _ref2 = _slicedToArray(_ref, 2),\r\n        tick = _ref2[0],\r\n        insideTick = _ref2[1];\r\n    if (!(0, _type.isDefined)(tick) || mathAbs(getValue(breakValue) - getValue(tick)) / interval > .25) {\r\n        if ((0, _type.isDefined)(insideTick)) {\r\n            tick = insideTick\r\n        } else {\r\n            if (!(0, _type.isDefined)(tick)) {\r\n                tick = breakValue\r\n            }\r\n        }\r\n    }\r\n    return tick\r\n}\r\n\r\nfunction getScaleBreaksProcessor(convertTickInterval, getValue, addCorrection) {\r\n    return function(breaks, ticks, tickInterval) {\r\n        var interval = convertTickInterval(tickInterval);\r\n        var correction = .5 * interval;\r\n        return breaks.reduce(function(result, b) {\r\n            var breakTicks = ticks.filter(function(tick) {\r\n                return tick <= b.from\r\n            });\r\n            var from = addCorrection(getBaseTick(b.from, [].concat(breakTicks[breakTicks.length - 1], ticks[breakTicks.length]), interval, getValue), correction);\r\n            breakTicks = ticks.filter(function(tick) {\r\n                return tick >= b.to\r\n            });\r\n            var to = addCorrection(getBaseTick(b.to, [].concat(breakTicks[0], ticks[ticks.length - breakTicks.length - 1]), interval, getValue), -correction);\r\n            if (getValue(to) - getValue(from) < interval && !b.gapSize) {\r\n                return result\r\n            }\r\n            if (b.gapSize) {\r\n                return result.concat([b])\r\n            }\r\n            return result.concat([{\r\n                from: from,\r\n                to: to,\r\n                cumulativeWidth: b.cumulativeWidth\r\n            }])\r\n        }, [])\r\n    }\r\n}\r\n\r\nfunction numericGenerator(options) {\r\n    var floor = correctValueByInterval(getValue, mathFloor, getValue);\r\n    var ceil = correctValueByInterval(getValue, mathCeil, getValue);\r\n    var calculateTickIntervalByCustomTicks = getTickIntervalByCustomTicks(getValue, getValue);\r\n    return generator(options, getBusinessDelta, calculateTickInterval, calculateMinorTickInterval, calculateTickIntervalByCustomTicks, calculateTickIntervalByCustomTicks, getValue, calculateTicks(addInterval, correctMinValueByEndOnTick(floor, ceil, resolveEndOnTick, options.endOnTick), adjustInterval, resolveEndOnTick), calculateMinorTicks(getValue, addInterval, floor, addInterval, getValue), getScaleBreaksProcessor(getValue, getValue, function(value, correction) {\r\n        return value + correction\r\n    }))\r\n}\r\nvar correctValueByIntervalLog = function(post, getRound, getValue) {\r\n    return function(value, interval) {\r\n        return (0, _math.sign)(value) * (0, _math.adjust)(post(getRound(value)((0, _math.adjust)(getValue(value) / interval)) * interval))\r\n    }\r\n};\r\n\r\nfunction logarithmicGenerator(options) {\r\n    var base = options.logBase;\r\n    var raise = raiseTo(base, options.allowNegatives, options.linearThreshold);\r\n    var log = getLogValue(base, options.allowNegatives, options.linearThreshold);\r\n    var absLog = logAbsValue(base);\r\n    var absRaise = mathRaiseTo(base);\r\n    var absFloor = function(value) {\r\n        return value < 0 ? mathCeil : mathFloor\r\n    };\r\n    var absCeil = function(value) {\r\n        return value < 0 ? mathFloor : mathCeil\r\n    };\r\n    var floor = correctValueByIntervalLog(absRaise, absFloor, absLog);\r\n    var ceil = correctValueByIntervalLog(absRaise, absCeil, absLog);\r\n    var ceilNumber = correctValueByInterval(getValue, mathCeil, getValue);\r\n    return generator(options, getBusinessDeltaLog(base, options.allowNegatives, options.linearThreshold), getCalculateTickIntervalLog(options.skipCalculationLimits), calculateMinorTickInterval, getTickIntervalByCustomTicks(log, getValue), getTickIntervalByCustomTicks(getValue, getValue), getValue, calculateTicks(addIntervalLog(log, raise), correctMinValueByEndOnTick(floor, ceil, resolveEndOnTickLog(base), options.endOnTick), getAdjustIntervalLog(options.skipCalculationLimits), resolveEndOnTickLog(base)), calculateMinorTicks(function(_, tick, prevTick, factor) {\r\n        return Math.max(Math.abs(tick), Math.abs(prevTick)) / factor\r\n    }, addInterval, floor, ceilNumber, ceil), getScaleBreaksProcessor(getValue, log, function(value, correction) {\r\n        return raise(log(value) + correction)\r\n    }))\r\n}\r\n\r\nfunction dateGenerator(options) {\r\n    function floor(value, interval) {\r\n        var floorNumber = correctValueByInterval(getValue, mathFloor, getValue);\r\n        var intervalObject = (0, _type.isString)(interval) ? _date.default.getDateIntervalByString(interval.toLowerCase()) : interval;\r\n        var divider = dateToMilliseconds(interval);\r\n        if (intervalObject.days % 7 === 0 || interval.quarters) {\r\n            intervalObject = adjustIntervalDateTime(divider)\r\n        }\r\n        var correctDateWithUnitBeginning = function(v) {\r\n            return _date.default.correctDateWithUnitBeginning(v, intervalObject, null, options.firstDayOfWeek)\r\n        };\r\n        var floorAtStartDate = function(v) {\r\n            return new Date(mathFloor((v.getTime() - v.getTimezoneOffset() * MINUTE) / divider) * divider + v.getTimezoneOffset() * MINUTE)\r\n        };\r\n        value = correctDateWithUnitBeginning(value);\r\n        if (\"years\" in intervalObject) {\r\n            value.setFullYear(floorNumber(value.getFullYear(), intervalObject.years, 0))\r\n        } else {\r\n            if (\"quarters\" in intervalObject) {\r\n                value = correctDateWithUnitBeginning(floorAtStartDate(value))\r\n            } else {\r\n                if (\"months\" in intervalObject) {\r\n                    value.setMonth(floorNumber(value.getMonth(), intervalObject.months, 0))\r\n                } else {\r\n                    if (\"weeks\" in intervalObject || \"days\" in intervalObject) {\r\n                        value = correctDateWithUnitBeginning(floorAtStartDate(value))\r\n                    } else {\r\n                        if (\"hours\" in intervalObject) {\r\n                            value.setHours(floorNumber(value.getHours(), intervalObject.hours, 0))\r\n                        } else {\r\n                            if (\"minutes\" in intervalObject) {\r\n                                value.setMinutes(floorNumber(value.getMinutes(), intervalObject.minutes, 0))\r\n                            } else {\r\n                                if (\"seconds\" in intervalObject) {\r\n                                    value.setSeconds(floorNumber(value.getSeconds(), intervalObject.seconds, 0))\r\n                                } else {\r\n                                    if (\"milliseconds\" in intervalObject) {\r\n                                        value = floorAtStartDate(value)\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return value\r\n    }\r\n\r\n    function ceil(value, interval) {\r\n        var newValue = floor(value, interval);\r\n        while (value - newValue > 0) {\r\n            newValue = addIntervalDate(newValue, interval)\r\n        }\r\n        return newValue\r\n    }\r\n    var calculateTickIntervalByCustomTicks = getTickIntervalByCustomTicks(getValue, _date.default.convertMillisecondsToDateUnits);\r\n    return generator(options, getBusinessDelta, calculateTickIntervalDateTime, calculateMinorTickIntervalDateTime, calculateTickIntervalByCustomTicks, calculateTickIntervalByCustomTicks, dateToMilliseconds, calculateTicks(addIntervalDate, correctMinValueByEndOnTick(floor, ceil, resolveEndOnTickDate, options.endOnTick), adjustIntervalDateTime, resolveEndOnTickDate), calculateMinorTicks(getValue, addIntervalDate, floor, addIntervalDate, getValue), getScaleBreaksProcessor(dateToMilliseconds, getValue, function(value, correction) {\r\n        return new Date(value.getTime() + correction)\r\n    }))\r\n}\r\nvar tickGenerator = function(options) {\r\n    var result;\r\n    if (options.rangeIsEmpty) {\r\n        result = dummyGenerator(options)\r\n    } else {\r\n        if (\"discrete\" === options.axisType) {\r\n            result = discreteGenerator(options)\r\n        } else {\r\n            if (\"logarithmic\" === options.axisType) {\r\n                result = logarithmicGenerator(options)\r\n            } else {\r\n                if (\"datetime\" === options.dataType) {\r\n                    result = dateGenerator(options)\r\n                } else {\r\n                    result = numericGenerator(options)\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result\r\n};\r\nexports.tickGenerator = tickGenerator;\r\n"]},"metadata":{},"sourceType":"script"}