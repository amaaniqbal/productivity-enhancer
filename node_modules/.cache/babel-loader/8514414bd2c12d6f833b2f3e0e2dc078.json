{"ast":null,"code":"/**\r\n * DevExtreme (viz/core/helpers.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.expand = expand;\nexports.changes = changes;\nexports.replaceInherit = void 0;\n\nvar _extend2 = require(\"../../core/utils/extend\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar isServerSide = !(0, _window.hasWindow)();\n\nfunction Flags() {\n  this.reset();\n}\n\nFlags.prototype = {\n  constructor: Flags,\n  add: function (codes) {\n    var i;\n    var ii = codes.length;\n    var flags = this._flags;\n\n    for (i = 0; i < ii; ++i) {\n      flags[codes[i]] = 1;\n    }\n\n    this._k += ii;\n  },\n  has: function (code) {\n    return this._flags[code] > 0;\n  },\n  count: function () {\n    return this._k;\n  },\n  reset: function () {\n    this._flags = {};\n    this._k = 0;\n  }\n};\n\nfunction combineMaps(baseMap, thisMap) {\n  return baseMap !== thisMap ? (0, _extend2.extend)({}, baseMap, thisMap) : (0, _extend2.extend)({}, baseMap);\n}\n\nfunction combineLists(baseList, thisList) {\n  return baseList !== thisList ? baseList.concat(thisList) : baseList.slice();\n}\n\nfunction buildTotalChanges(proto) {\n  proto._totalChangesOrder = proto._optionChangesOrder.concat(proto._layoutChangesOrder, proto._customChangesOrder);\n}\n\nfunction addChange(settings) {\n  var proto = this.prototype;\n  var code = settings.code;\n  proto[\"_change_\" + code] = settings.handler;\n\n  if (settings.isThemeDependent) {\n    proto._themeDependentChanges.push(code);\n  }\n\n  if (settings.option) {\n    proto._optionChangesMap[settings.option] = code;\n  }\n\n  (settings.isOptionChange ? proto._optionChangesOrder : proto._customChangesOrder).push(code);\n  buildTotalChanges(proto);\n}\n\nfunction createChainExecutor() {\n  var executeChain = function executeChain() {\n    var i;\n    var ii = executeChain._chain.length;\n    var result;\n\n    for (i = 0; i < ii; ++i) {\n      result = executeChain._chain[i].apply(this, arguments);\n    }\n\n    return result;\n  };\n\n  executeChain._chain = [];\n\n  executeChain.add = function (item) {\n    executeChain._chain.push(item);\n  };\n\n  executeChain.copy = function (executor) {\n    executeChain._chain = executor._chain.slice();\n  };\n\n  return executeChain;\n}\n\nfunction expand(target, name, expander) {\n  var current = target[name];\n\n  if (!current) {\n    current = expander;\n  } else {\n    if (!current.add) {\n      current = createChainExecutor();\n      current.add(target[name]);\n      current.add(expander);\n    } else {\n      if (false === Object.prototype.hasOwnProperty.call(target, name)) {\n        current = createChainExecutor();\n        current.copy(target[name]);\n      }\n\n      current.add(expander);\n    }\n  }\n\n  target[name] = current;\n}\n\nfunction addPlugin(plugin) {\n  var proto = this.prototype;\n\n  proto._plugins.push(plugin);\n\n  plugin.fontFields && proto._fontFields.push.apply(proto._fontFields, plugin.fontFields);\n\n  if (plugin.members) {\n    (0, _extend2.extend)(this.prototype, plugin.members);\n  }\n\n  if (plugin.customize) {\n    plugin.customize(this);\n  }\n\n  if (plugin.extenders) {\n    Object.keys(plugin.extenders).forEach(function (key) {\n      var func = plugin.extenders[key];\n      expand(proto, key, func);\n    }, this);\n  }\n}\n\nvar replaceInherit = isServerSide ? function (widget) {\n  var _inherit = widget.inherit;\n\n  widget.inherit = function () {\n    var result = _inherit.apply(this, arguments);\n\n    var proto = result.prototype;\n    [\"_plugins\", \"_eventsMap\", \"_initialChanges\", \"_themeDependentChanges\", \"_optionChangesMap\", \"_optionChangesOrder\", \"_layoutChangesOrder\", \"_customChangesOrder\", \"_totalChangesOrder\"].forEach(function (key) {\n      proto[key] = {};\n    });\n    result.addPlugin = _common.noop;\n    return result;\n  };\n\n  widget.addChange = _common.noop;\n  widget.addPlugin = _common.noop;\n} : function (widget) {\n  var _inherit = widget.inherit;\n\n  widget.inherit = function () {\n    var proto = this.prototype;\n    var plugins = proto._plugins;\n    var fontFields = proto._fontFields;\n    var eventsMap = proto._eventsMap;\n    var initialChanges = proto._initialChanges;\n    var themeDependentChanges = proto._themeDependentChanges;\n    var optionChangesMap = proto._optionChangesMap;\n    var partialOptionChangesMap = proto._partialOptionChangesMap;\n    var partialOptionChangesPath = proto._partialOptionChangesPath;\n    var optionChangesOrder = proto._optionChangesOrder;\n    var layoutChangesOrder = proto._layoutChangesOrder;\n    var customChangesOrder = proto._customChangesOrder;\n\n    var result = _inherit.apply(this, arguments);\n\n    proto = result.prototype;\n    proto._plugins = combineLists(plugins, proto._plugins);\n    proto._fontFields = combineLists(fontFields, proto._fontFields);\n    proto._eventsMap = combineMaps(eventsMap, proto._eventsMap);\n    proto._initialChanges = combineLists(initialChanges, proto._initialChanges);\n    proto._themeDependentChanges = combineLists(themeDependentChanges, proto._themeDependentChanges);\n    proto._optionChangesMap = combineMaps(optionChangesMap, proto._optionChangesMap);\n    proto._partialOptionChangesMap = combineMaps(partialOptionChangesMap, proto._partialOptionChangesMap);\n    proto._partialOptionChangesPath = combineMaps(partialOptionChangesPath, proto._partialOptionChangesPath);\n    proto._optionChangesOrder = combineLists(optionChangesOrder, proto._optionChangesOrder);\n    proto._layoutChangesOrder = combineLists(layoutChangesOrder, proto._layoutChangesOrder);\n    proto._customChangesOrder = combineLists(customChangesOrder, proto._customChangesOrder);\n    buildTotalChanges(proto);\n    result.addPlugin = addPlugin;\n    return result;\n  };\n\n  widget.prototype._plugins = [];\n  widget.prototype._fontFields = [];\n  widget.addChange = addChange;\n  widget.addPlugin = addPlugin;\n};\nexports.replaceInherit = replaceInherit;\n\nfunction changes() {\n  return new Flags();\n}","map":{"version":3,"sources":["E:/Monday.com/quickstart-react/node_modules/devextreme/viz/core/helpers.js"],"names":["exports","expand","changes","replaceInherit","_extend2","require","_window","_common","isServerSide","hasWindow","Flags","reset","prototype","constructor","add","codes","i","ii","length","flags","_flags","_k","has","code","count","combineMaps","baseMap","thisMap","extend","combineLists","baseList","thisList","concat","slice","buildTotalChanges","proto","_totalChangesOrder","_optionChangesOrder","_layoutChangesOrder","_customChangesOrder","addChange","settings","handler","isThemeDependent","_themeDependentChanges","push","option","_optionChangesMap","isOptionChange","createChainExecutor","executeChain","_chain","result","apply","arguments","item","copy","executor","target","name","expander","current","Object","hasOwnProperty","call","addPlugin","plugin","_plugins","fontFields","_fontFields","members","customize","extenders","keys","forEach","key","func","widget","_inherit","inherit","noop","plugins","eventsMap","_eventsMap","initialChanges","_initialChanges","themeDependentChanges","optionChangesMap","partialOptionChangesMap","_partialOptionChangesMap","partialOptionChangesPath","_partialOptionChangesPath","optionChangesOrder","layoutChangesOrder","customChangesOrder"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (viz/core/helpers.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.expand = expand;\r\nexports.changes = changes;\r\nexports.replaceInherit = void 0;\r\nvar _extend2 = require(\"../../core/utils/extend\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar isServerSide = !(0, _window.hasWindow)();\r\n\r\nfunction Flags() {\r\n    this.reset()\r\n}\r\nFlags.prototype = {\r\n    constructor: Flags,\r\n    add: function(codes) {\r\n        var i;\r\n        var ii = codes.length;\r\n        var flags = this._flags;\r\n        for (i = 0; i < ii; ++i) {\r\n            flags[codes[i]] = 1\r\n        }\r\n        this._k += ii\r\n    },\r\n    has: function(code) {\r\n        return this._flags[code] > 0\r\n    },\r\n    count: function() {\r\n        return this._k\r\n    },\r\n    reset: function() {\r\n        this._flags = {};\r\n        this._k = 0\r\n    }\r\n};\r\n\r\nfunction combineMaps(baseMap, thisMap) {\r\n    return baseMap !== thisMap ? (0, _extend2.extend)({}, baseMap, thisMap) : (0, _extend2.extend)({}, baseMap)\r\n}\r\n\r\nfunction combineLists(baseList, thisList) {\r\n    return baseList !== thisList ? baseList.concat(thisList) : baseList.slice()\r\n}\r\n\r\nfunction buildTotalChanges(proto) {\r\n    proto._totalChangesOrder = proto._optionChangesOrder.concat(proto._layoutChangesOrder, proto._customChangesOrder)\r\n}\r\n\r\nfunction addChange(settings) {\r\n    var proto = this.prototype;\r\n    var code = settings.code;\r\n    proto[\"_change_\" + code] = settings.handler;\r\n    if (settings.isThemeDependent) {\r\n        proto._themeDependentChanges.push(code)\r\n    }\r\n    if (settings.option) {\r\n        proto._optionChangesMap[settings.option] = code\r\n    }(settings.isOptionChange ? proto._optionChangesOrder : proto._customChangesOrder).push(code);\r\n    buildTotalChanges(proto)\r\n}\r\n\r\nfunction createChainExecutor() {\r\n    var executeChain = function executeChain() {\r\n        var i;\r\n        var ii = executeChain._chain.length;\r\n        var result;\r\n        for (i = 0; i < ii; ++i) {\r\n            result = executeChain._chain[i].apply(this, arguments)\r\n        }\r\n        return result\r\n    };\r\n    executeChain._chain = [];\r\n    executeChain.add = function(item) {\r\n        executeChain._chain.push(item)\r\n    };\r\n    executeChain.copy = function(executor) {\r\n        executeChain._chain = executor._chain.slice()\r\n    };\r\n    return executeChain\r\n}\r\n\r\nfunction expand(target, name, expander) {\r\n    var current = target[name];\r\n    if (!current) {\r\n        current = expander\r\n    } else {\r\n        if (!current.add) {\r\n            current = createChainExecutor();\r\n            current.add(target[name]);\r\n            current.add(expander)\r\n        } else {\r\n            if (false === Object.prototype.hasOwnProperty.call(target, name)) {\r\n                current = createChainExecutor();\r\n                current.copy(target[name])\r\n            }\r\n            current.add(expander)\r\n        }\r\n    }\r\n    target[name] = current\r\n}\r\n\r\nfunction addPlugin(plugin) {\r\n    var proto = this.prototype;\r\n    proto._plugins.push(plugin);\r\n    plugin.fontFields && proto._fontFields.push.apply(proto._fontFields, plugin.fontFields);\r\n    if (plugin.members) {\r\n        (0, _extend2.extend)(this.prototype, plugin.members)\r\n    }\r\n    if (plugin.customize) {\r\n        plugin.customize(this)\r\n    }\r\n    if (plugin.extenders) {\r\n        Object.keys(plugin.extenders).forEach(function(key) {\r\n            var func = plugin.extenders[key];\r\n            expand(proto, key, func)\r\n        }, this)\r\n    }\r\n}\r\nvar replaceInherit = isServerSide ? function(widget) {\r\n    var _inherit = widget.inherit;\r\n    widget.inherit = function() {\r\n        var result = _inherit.apply(this, arguments);\r\n        var proto = result.prototype;\r\n        [\"_plugins\", \"_eventsMap\", \"_initialChanges\", \"_themeDependentChanges\", \"_optionChangesMap\", \"_optionChangesOrder\", \"_layoutChangesOrder\", \"_customChangesOrder\", \"_totalChangesOrder\"].forEach(function(key) {\r\n            proto[key] = {}\r\n        });\r\n        result.addPlugin = _common.noop;\r\n        return result\r\n    };\r\n    widget.addChange = _common.noop;\r\n    widget.addPlugin = _common.noop\r\n} : function(widget) {\r\n    var _inherit = widget.inherit;\r\n    widget.inherit = function() {\r\n        var proto = this.prototype;\r\n        var plugins = proto._plugins;\r\n        var fontFields = proto._fontFields;\r\n        var eventsMap = proto._eventsMap;\r\n        var initialChanges = proto._initialChanges;\r\n        var themeDependentChanges = proto._themeDependentChanges;\r\n        var optionChangesMap = proto._optionChangesMap;\r\n        var partialOptionChangesMap = proto._partialOptionChangesMap;\r\n        var partialOptionChangesPath = proto._partialOptionChangesPath;\r\n        var optionChangesOrder = proto._optionChangesOrder;\r\n        var layoutChangesOrder = proto._layoutChangesOrder;\r\n        var customChangesOrder = proto._customChangesOrder;\r\n        var result = _inherit.apply(this, arguments);\r\n        proto = result.prototype;\r\n        proto._plugins = combineLists(plugins, proto._plugins);\r\n        proto._fontFields = combineLists(fontFields, proto._fontFields);\r\n        proto._eventsMap = combineMaps(eventsMap, proto._eventsMap);\r\n        proto._initialChanges = combineLists(initialChanges, proto._initialChanges);\r\n        proto._themeDependentChanges = combineLists(themeDependentChanges, proto._themeDependentChanges);\r\n        proto._optionChangesMap = combineMaps(optionChangesMap, proto._optionChangesMap);\r\n        proto._partialOptionChangesMap = combineMaps(partialOptionChangesMap, proto._partialOptionChangesMap);\r\n        proto._partialOptionChangesPath = combineMaps(partialOptionChangesPath, proto._partialOptionChangesPath);\r\n        proto._optionChangesOrder = combineLists(optionChangesOrder, proto._optionChangesOrder);\r\n        proto._layoutChangesOrder = combineLists(layoutChangesOrder, proto._layoutChangesOrder);\r\n        proto._customChangesOrder = combineLists(customChangesOrder, proto._customChangesOrder);\r\n        buildTotalChanges(proto);\r\n        result.addPlugin = addPlugin;\r\n        return result\r\n    };\r\n    widget.prototype._plugins = [];\r\n    widget.prototype._fontFields = [];\r\n    widget.addChange = addChange;\r\n    widget.addPlugin = addPlugin\r\n};\r\nexports.replaceInherit = replaceInherit;\r\n\r\nfunction changes() {\r\n    return new Flags\r\n}\r\n"]},"metadata":{},"sourceType":"script"}