{"ast":null,"code":"/*!\n * devextreme-react\n * Version: 20.2.3\n * Build date: Tue Oct 20 2020\n *\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-react\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OptionsManager = void 0;\n\nvar comparer_1 = require(\"./configuration/comparer\");\n\nvar tree_1 = require(\"./configuration/tree\");\n\nvar utils_1 = require(\"./configuration/utils\");\n\nvar helpers_1 = require(\"./helpers\");\n\nvar OptionsManager =\n/** @class */\nfunction () {\n  function OptionsManager(templatesManager) {\n    this._guards = {};\n    this._isUpdating = false;\n    this._templatesManager = templatesManager;\n    this.onOptionChanged = this.onOptionChanged.bind(this);\n    this._wrapOptionValue = this._wrapOptionValue.bind(this);\n  }\n\n  OptionsManager.prototype.setInstance = function (instance, config) {\n    this._instance = instance;\n    this._currentConfig = config;\n  };\n\n  OptionsManager.prototype.getInitialOptions = function (rootNode) {\n    var config = tree_1.buildConfig(rootNode, false);\n\n    for (var _i = 0, _a = Object.keys(config.templates); _i < _a.length; _i++) {\n      var key = _a[_i];\n\n      this._templatesManager.add(key, config.templates[key]);\n    }\n\n    var options = {};\n\n    for (var _b = 0, _c = Object.keys(config.options); _b < _c.length; _b++) {\n      var key = _c[_b];\n      options[key] = this._wrapOptionValue(key, config.options[key]);\n    }\n\n    if (this._templatesManager.templatesCount > 0) {\n      options.integrationOptions = {\n        templates: this._templatesManager.templates\n      };\n    }\n\n    return options;\n  };\n\n  OptionsManager.prototype.update = function (config) {\n    var _this = this;\n\n    var changes = comparer_1.getChanges(config, this._currentConfig);\n\n    if (!changes.options && !changes.templates && !changes.removedOptions.length) {\n      return;\n    }\n\n    this._instance.beginUpdate();\n\n    this._isUpdating = true;\n    changes.removedOptions.forEach(function (optionName) {\n      _this._resetOption(optionName);\n    });\n\n    for (var _i = 0, _a = Object.keys(changes.templates); _i < _a.length; _i++) {\n      var key = _a[_i];\n\n      this._templatesManager.add(key, changes.templates[key]);\n    }\n\n    if (this._templatesManager.templatesCount > 0) {\n      this._setValue('integrationOptions', {\n        templates: this._templatesManager.templates\n      });\n    }\n\n    for (var _b = 0, _c = Object.keys(changes.options); _b < _c.length; _b++) {\n      var key = _c[_b];\n\n      this._setValue(key, changes.options[key]);\n    }\n\n    this._isUpdating = false;\n\n    this._instance.endUpdate();\n\n    this._currentConfig = config;\n  };\n\n  OptionsManager.prototype.onOptionChanged = function (e) {\n    if (this._isUpdating) {\n      return;\n    }\n\n    this._callOptionChangeHandler(e.fullName, e.value);\n\n    var valueDescriptor = tree_1.findValue(this._currentConfig, e.fullName.split('.'));\n\n    if (!valueDescriptor) {\n      return;\n    }\n\n    var value = valueDescriptor.value,\n        type = valueDescriptor.type;\n\n    if (type === tree_1.ValueType.Complex) {\n      for (var _i = 0, _a = Object.keys(value); _i < _a.length; _i++) {\n        var key = _a[_i];\n\n        if (value[key] === null || value[key] === undefined || value[key] === e.value[key]) {\n          continue;\n        }\n\n        this._setGuard(utils_1.mergeNameParts(e.fullName, key), value[key]);\n      }\n    } else {\n      if (value === null || value === undefined || value === e.value) {\n        return;\n      }\n\n      this._setGuard(e.fullName, value);\n    }\n  };\n\n  OptionsManager.prototype.dispose = function () {\n    for (var _i = 0, _a = Object.keys(this._guards); _i < _a.length; _i++) {\n      var optionName = _a[_i];\n      window.clearTimeout(this._guards[optionName]);\n      delete this._guards[optionName];\n    }\n  };\n\n  OptionsManager.prototype._callOptionChangeHandler = function (optionName, optionValue) {\n    var parts = optionName.split('.');\n    var propName = parts[parts.length - 1];\n\n    if (propName.startsWith('on')) {\n      return;\n    }\n\n    var eventName = \"on\" + helpers_1.capitalizeFirstLetter(propName) + \"Change\";\n    parts[parts.length - 1] = eventName;\n    var changeEvent = tree_1.findValue(this._currentConfig, parts);\n\n    if (!changeEvent) {\n      return;\n    }\n\n    if (typeof changeEvent.value !== 'function') {\n      throw new Error(\"Invalid value for the \" + eventName + \" property.\\n                \" + eventName + \" must be a function.\");\n    }\n\n    changeEvent.value(optionValue);\n  };\n\n  OptionsManager.prototype._wrapOptionValue = function (name, value) {\n    var _this = this;\n\n    if (name.substr(0, 2) === 'on' && typeof value === 'function') {\n      return function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        if (!_this._isUpdating) {\n          value.apply(void 0, args);\n        }\n      };\n    }\n\n    return value;\n  };\n\n  OptionsManager.prototype._setGuard = function (optionName, optionValue) {\n    var _this = this;\n\n    if (this._guards[optionName] !== undefined) {\n      return;\n    }\n\n    var guardId = window.setTimeout(function () {\n      _this._setValue(optionName, optionValue);\n\n      window.clearTimeout(guardId);\n      delete _this._guards[optionName];\n    });\n    this._guards[optionName] = guardId;\n  };\n\n  OptionsManager.prototype._resetOption = function (name) {\n    this._instance.resetOption(name);\n  };\n\n  OptionsManager.prototype._setValue = function (name, value) {\n    if (this._guards[name]) {\n      window.clearTimeout(this._guards[name]);\n      delete this._guards[name];\n    }\n\n    this._instance.option(name, this._wrapOptionValue(name, value));\n  };\n\n  return OptionsManager;\n}();\n\nexports.OptionsManager = OptionsManager;","map":{"version":3,"sources":["E:/Monday.com/quickstart-react/node_modules/devextreme-react/core/options-manager.js"],"names":["Object","defineProperty","exports","value","OptionsManager","comparer_1","require","tree_1","utils_1","helpers_1","templatesManager","_guards","_isUpdating","_templatesManager","onOptionChanged","bind","_wrapOptionValue","prototype","setInstance","instance","config","_instance","_currentConfig","getInitialOptions","rootNode","buildConfig","_i","_a","keys","templates","length","key","add","options","_b","_c","templatesCount","integrationOptions","update","_this","changes","getChanges","removedOptions","beginUpdate","forEach","optionName","_resetOption","_setValue","endUpdate","e","_callOptionChangeHandler","fullName","valueDescriptor","findValue","split","type","ValueType","Complex","undefined","_setGuard","mergeNameParts","dispose","window","clearTimeout","optionValue","parts","propName","startsWith","eventName","capitalizeFirstLetter","changeEvent","Error","name","substr","args","arguments","apply","guardId","setTimeout","resetOption","option"],"mappings":"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","sourcesContent":["/*!\n * devextreme-react\n * Version: 20.2.3\n * Build date: Tue Oct 20 2020\n *\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-react\n */\n\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OptionsManager = void 0;\nvar comparer_1 = require(\"./configuration/comparer\");\nvar tree_1 = require(\"./configuration/tree\");\nvar utils_1 = require(\"./configuration/utils\");\nvar helpers_1 = require(\"./helpers\");\nvar OptionsManager = /** @class */ (function () {\n    function OptionsManager(templatesManager) {\n        this._guards = {};\n        this._isUpdating = false;\n        this._templatesManager = templatesManager;\n        this.onOptionChanged = this.onOptionChanged.bind(this);\n        this._wrapOptionValue = this._wrapOptionValue.bind(this);\n    }\n    OptionsManager.prototype.setInstance = function (instance, config) {\n        this._instance = instance;\n        this._currentConfig = config;\n    };\n    OptionsManager.prototype.getInitialOptions = function (rootNode) {\n        var config = tree_1.buildConfig(rootNode, false);\n        for (var _i = 0, _a = Object.keys(config.templates); _i < _a.length; _i++) {\n            var key = _a[_i];\n            this._templatesManager.add(key, config.templates[key]);\n        }\n        var options = {};\n        for (var _b = 0, _c = Object.keys(config.options); _b < _c.length; _b++) {\n            var key = _c[_b];\n            options[key] = this._wrapOptionValue(key, config.options[key]);\n        }\n        if (this._templatesManager.templatesCount > 0) {\n            options.integrationOptions = {\n                templates: this._templatesManager.templates,\n            };\n        }\n        return options;\n    };\n    OptionsManager.prototype.update = function (config) {\n        var _this = this;\n        var changes = comparer_1.getChanges(config, this._currentConfig);\n        if (!changes.options && !changes.templates && !changes.removedOptions.length) {\n            return;\n        }\n        this._instance.beginUpdate();\n        this._isUpdating = true;\n        changes.removedOptions.forEach(function (optionName) {\n            _this._resetOption(optionName);\n        });\n        for (var _i = 0, _a = Object.keys(changes.templates); _i < _a.length; _i++) {\n            var key = _a[_i];\n            this._templatesManager.add(key, changes.templates[key]);\n        }\n        if (this._templatesManager.templatesCount > 0) {\n            this._setValue('integrationOptions', {\n                templates: this._templatesManager.templates,\n            });\n        }\n        for (var _b = 0, _c = Object.keys(changes.options); _b < _c.length; _b++) {\n            var key = _c[_b];\n            this._setValue(key, changes.options[key]);\n        }\n        this._isUpdating = false;\n        this._instance.endUpdate();\n        this._currentConfig = config;\n    };\n    OptionsManager.prototype.onOptionChanged = function (e) {\n        if (this._isUpdating) {\n            return;\n        }\n        this._callOptionChangeHandler(e.fullName, e.value);\n        var valueDescriptor = tree_1.findValue(this._currentConfig, e.fullName.split('.'));\n        if (!valueDescriptor) {\n            return;\n        }\n        var value = valueDescriptor.value, type = valueDescriptor.type;\n        if (type === tree_1.ValueType.Complex) {\n            for (var _i = 0, _a = Object.keys(value); _i < _a.length; _i++) {\n                var key = _a[_i];\n                if (value[key] === null ||\n                    value[key] === undefined ||\n                    value[key] === e.value[key]) {\n                    continue;\n                }\n                this._setGuard(utils_1.mergeNameParts(e.fullName, key), value[key]);\n            }\n        }\n        else {\n            if (value === null ||\n                value === undefined ||\n                value === e.value) {\n                return;\n            }\n            this._setGuard(e.fullName, value);\n        }\n    };\n    OptionsManager.prototype.dispose = function () {\n        for (var _i = 0, _a = Object.keys(this._guards); _i < _a.length; _i++) {\n            var optionName = _a[_i];\n            window.clearTimeout(this._guards[optionName]);\n            delete this._guards[optionName];\n        }\n    };\n    OptionsManager.prototype._callOptionChangeHandler = function (optionName, optionValue) {\n        var parts = optionName.split('.');\n        var propName = parts[parts.length - 1];\n        if (propName.startsWith('on')) {\n            return;\n        }\n        var eventName = \"on\" + helpers_1.capitalizeFirstLetter(propName) + \"Change\";\n        parts[parts.length - 1] = eventName;\n        var changeEvent = tree_1.findValue(this._currentConfig, parts);\n        if (!changeEvent) {\n            return;\n        }\n        if (typeof changeEvent.value !== 'function') {\n            throw new Error(\"Invalid value for the \" + eventName + \" property.\\n                \" + eventName + \" must be a function.\");\n        }\n        changeEvent.value(optionValue);\n    };\n    OptionsManager.prototype._wrapOptionValue = function (name, value) {\n        var _this = this;\n        if (name.substr(0, 2) === 'on' && typeof value === 'function') {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                if (!_this._isUpdating) {\n                    value.apply(void 0, args);\n                }\n            };\n        }\n        return value;\n    };\n    OptionsManager.prototype._setGuard = function (optionName, optionValue) {\n        var _this = this;\n        if (this._guards[optionName] !== undefined) {\n            return;\n        }\n        var guardId = window.setTimeout(function () {\n            _this._setValue(optionName, optionValue);\n            window.clearTimeout(guardId);\n            delete _this._guards[optionName];\n        });\n        this._guards[optionName] = guardId;\n    };\n    OptionsManager.prototype._resetOption = function (name) {\n        this._instance.resetOption(name);\n    };\n    OptionsManager.prototype._setValue = function (name, value) {\n        if (this._guards[name]) {\n            window.clearTimeout(this._guards[name]);\n            delete this._guards[name];\n        }\n        this._instance.option(name, this._wrapOptionValue(name, value));\n    };\n    return OptionsManager;\n}());\nexports.OptionsManager = OptionsManager;\n"]},"metadata":{},"sourceType":"script"}