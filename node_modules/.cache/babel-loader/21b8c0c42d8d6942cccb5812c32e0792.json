{"ast":null,"code":"const mondayApiClient = require(\"./monday-api-client\");\n\nconst {\n  oauthToken\n} = require(\"./services/oauth-service.js\");\n\nconst TOKEN_MISSING_ERROR = \"Should send 'token' as an option or call mondaySdk.setToken(TOKEN)\";\n\nclass MondayServerSdk {\n  constructor(options = {}) {\n    this._token = options.token;\n    this.setToken = this.setToken.bind(this);\n    this.api = this.api.bind(this);\n  }\n\n  setToken(token) {\n    this._token = token;\n  }\n\n  async api(query, options = {}) {\n    const params = {\n      query,\n      variables: options.variables\n    };\n    const token = options.token || this._token;\n    if (!token) throw new Error(TOKEN_MISSING_ERROR);\n    return await mondayApiClient.execute(params, token);\n  }\n\n  oauthToken(code, clientId, clientSecret) {\n    return oauthToken(code, clientId, clientSecret);\n  }\n\n}\n\nfunction init(options = {}) {\n  return new MondayServerSdk(options);\n}\n\nmodule.exports = init;","map":{"version":3,"sources":["E:/Monday.com/quickstart-react/node_modules/monday-sdk-js/src/server.js"],"names":["mondayApiClient","require","oauthToken","TOKEN_MISSING_ERROR","MondayServerSdk","constructor","options","_token","token","setToken","bind","api","query","params","variables","Error","execute","code","clientId","clientSecret","init","module","exports"],"mappings":"AAAA,MAAMA,eAAe,GAAGC,OAAO,CAAC,qBAAD,CAA/B;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAiBD,OAAO,CAAC,6BAAD,CAA9B;;AAEA,MAAME,mBAAmB,GAAG,oEAA5B;;AAEA,MAAMC,eAAN,CAAsB;AACpBC,EAAAA,WAAW,CAACC,OAAO,GAAG,EAAX,EAAe;AACxB,SAAKC,MAAL,GAAcD,OAAO,CAACE,KAAtB;AAEA,SAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKC,GAAL,GAAW,KAAKA,GAAL,CAASD,IAAT,CAAc,IAAd,CAAX;AACD;;AAEDD,EAAAA,QAAQ,CAACD,KAAD,EAAQ;AACd,SAAKD,MAAL,GAAcC,KAAd;AACD;;AAED,QAAMG,GAAN,CAAUC,KAAV,EAAiBN,OAAO,GAAG,EAA3B,EAA+B;AAC7B,UAAMO,MAAM,GAAG;AAAED,MAAAA,KAAF;AAASE,MAAAA,SAAS,EAAER,OAAO,CAACQ;AAA5B,KAAf;AACA,UAAMN,KAAK,GAAGF,OAAO,CAACE,KAAR,IAAiB,KAAKD,MAApC;AAEA,QAAI,CAACC,KAAL,EAAY,MAAM,IAAIO,KAAJ,CAAUZ,mBAAV,CAAN;AAEZ,WAAO,MAAMH,eAAe,CAACgB,OAAhB,CAAwBH,MAAxB,EAAgCL,KAAhC,CAAb;AACD;;AAEDN,EAAAA,UAAU,CAACe,IAAD,EAAOC,QAAP,EAAiBC,YAAjB,EAA+B;AACvC,WAAOjB,UAAU,CAACe,IAAD,EAAOC,QAAP,EAAiBC,YAAjB,CAAjB;AACD;;AAvBmB;;AA0BtB,SAASC,IAAT,CAAcd,OAAO,GAAG,EAAxB,EAA4B;AAC1B,SAAO,IAAIF,eAAJ,CAAoBE,OAApB,CAAP;AACD;;AAEDe,MAAM,CAACC,OAAP,GAAiBF,IAAjB","sourcesContent":["const mondayApiClient = require(\"./monday-api-client\");\nconst { oauthToken } = require(\"./services/oauth-service.js\");\n\nconst TOKEN_MISSING_ERROR = \"Should send 'token' as an option or call mondaySdk.setToken(TOKEN)\";\n\nclass MondayServerSdk {\n  constructor(options = {}) {\n    this._token = options.token;\n\n    this.setToken = this.setToken.bind(this);\n    this.api = this.api.bind(this);\n  }\n\n  setToken(token) {\n    this._token = token;\n  }\n\n  async api(query, options = {}) {\n    const params = { query, variables: options.variables };\n    const token = options.token || this._token;\n\n    if (!token) throw new Error(TOKEN_MISSING_ERROR);\n\n    return await mondayApiClient.execute(params, token);\n  }\n\n  oauthToken(code, clientId, clientSecret) {\n    return oauthToken(code, clientId, clientSecret);\n  }\n}\n\nfunction init(options = {}) {\n  return new MondayServerSdk(options);\n}\n\nmodule.exports = init;\n"]},"metadata":{},"sourceType":"script"}