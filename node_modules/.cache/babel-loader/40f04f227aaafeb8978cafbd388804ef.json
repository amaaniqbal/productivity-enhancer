{"ast":null,"code":"/**\r\n * DevExtreme (viz/core/base_widget.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _resize_callbacks = _interopRequireDefault(require(\"../../core/utils/resize_callbacks\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _base_theme_manager = require(\"../core/base_theme_manager\");\n\nvar _dom_component = _interopRequireDefault(require(\"../../core/dom_component\"));\n\nvar _helpers = require(\"./helpers\");\n\nvar _utils = require(\"./utils\");\n\nvar _errors_warnings = _interopRequireDefault(require(\"./errors_warnings\"));\n\nvar _renderer2 = require(\"./renderers/renderer\");\n\nvar _layout = _interopRequireDefault(require(\"./layout\"));\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _base_widget = require(\"./base_widget.utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar _floor = Math.floor;\nvar _log = _errors_warnings.default.log;\nvar OPTION_RTL_ENABLED = \"rtlEnabled\";\nvar SIZED_ELEMENT_CLASS = \"dx-sized-element\";\nvar _option = _dom_component.default.prototype.option;\n\nfunction getTrue() {\n  return true;\n}\n\nfunction getFalse() {\n  return false;\n}\n\nfunction areCanvasesDifferent(canvas1, canvas2) {\n  return !(canvas1.width === canvas2.width && canvas1.height === canvas2.height && canvas1.left === canvas2.left && canvas1.top === canvas2.top && canvas1.right === canvas2.right && canvas1.bottom === canvas2.bottom);\n}\n\nfunction defaultOnIncidentOccurred(e) {\n  if (!e.component._eventsStrategy.hasEvent(\"incidentOccurred\")) {\n    _log.apply(null, [e.target.id].concat(e.target.args || []));\n  }\n}\n\nfunction pickPositiveValue(values) {\n  return values.reduce(function (result, value) {\n    return value > 0 && !result ? value : result;\n  }, 0);\n}\n\nvar getEmptyComponent = function () {\n  var emptyComponentConfig = {\n    _initTemplates: function () {},\n    ctor: function (element, options) {\n      this.callBase(element, options);\n\n      var sizedElement = _dom_adapter.default.createElement(\"div\");\n\n      var width = options && (0, _type.isNumeric)(options.width) ? options.width + \"px\" : \"100%\";\n      var height = options && (0, _type.isNumeric)(options.height) ? options.height + \"px\" : this._getDefaultSize().height + \"px\";\n\n      _dom_adapter.default.setStyle(sizedElement, \"width\", width);\n\n      _dom_adapter.default.setStyle(sizedElement, \"height\", height);\n\n      _dom_adapter.default.setClass(sizedElement, SIZED_ELEMENT_CLASS);\n\n      _dom_adapter.default.insertElement(element, sizedElement);\n    }\n  };\n\n  var EmptyComponent = _dom_component.default.inherit(emptyComponentConfig);\n\n  var originalInherit = EmptyComponent.inherit;\n\n  EmptyComponent.inherit = function (config) {\n    for (var field in config) {\n      if ((0, _type.isFunction)(config[field]) && \"_\" !== field.substr(0, 1) && \"option\" !== field || \"_dispose\" === field || \"_optionChanged\" === field) {\n        config[field] = _common.noop;\n      }\n    }\n\n    return originalInherit.call(this, config);\n  };\n\n  return EmptyComponent;\n};\n\nfunction callForEach(functions) {\n  functions.forEach(function (c) {\n    return c();\n  });\n}\n\nvar isServerSide = !(0, _window.hasWindow)();\n\nfunction sizeIsValid(value) {\n  return (0, _type.isDefined)(value) && value > 0;\n}\n\nvar baseWidget = isServerSide ? getEmptyComponent() : _dom_component.default.inherit({\n  _eventsMap: {\n    onIncidentOccurred: {\n      name: \"incidentOccurred\"\n    },\n    onDrawn: {\n      name: \"drawn\"\n    }\n  },\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      onIncidentOccurred: defaultOnIncidentOccurred\n    });\n  },\n  _useLinks: true,\n  _init: function () {\n    var that = this;\n\n    that._$element.children(\".\" + SIZED_ELEMENT_CLASS).remove();\n\n    that.callBase.apply(that, arguments);\n    that._changesLocker = 0;\n    that._optionChangedLocker = 0;\n    that._asyncFirstDrawing = true;\n    that._changes = (0, _helpers.changes)();\n\n    that._suspendChanges();\n\n    that._themeManager = that._createThemeManager();\n\n    that._themeManager.setCallback(function () {\n      that._requestChange(that._themeDependentChanges);\n    });\n\n    that._renderElementAttributes();\n\n    that._initRenderer();\n\n    var linkTarget = that._useLinks && that._renderer.root;\n    linkTarget && linkTarget.enableLinks().virtualLink(\"core\").virtualLink(\"peripheral\");\n\n    that._renderVisibilityChange();\n\n    that._attachVisibilityChangeHandlers();\n\n    that._toggleParentsScrollSubscription(this._isVisible());\n\n    that._initEventTrigger();\n\n    that._incidentOccurred = (0, _base_widget.createIncidentOccurred)(that.NAME, that._eventTrigger);\n    that._layout = new _layout.default();\n    linkTarget && linkTarget.linkAfter(\"core\");\n\n    that._initPlugins();\n\n    that._initCore();\n\n    linkTarget && linkTarget.linkAfter();\n\n    that._change(that._initialChanges);\n  },\n  _createThemeManager: function () {\n    return new _base_theme_manager.BaseThemeManager(this._getThemeManagerOptions());\n  },\n  _getThemeManagerOptions: function () {\n    return {\n      themeSection: this._themeSection,\n      fontFields: this._fontFields\n    };\n  },\n  _initialChanges: [\"LAYOUT\", \"RESIZE_HANDLER\", \"THEME\", \"DISABLED\"],\n  _initPlugins: function () {\n    var that = this;\n    (0, _iterator.each)(that._plugins, function (_, plugin) {\n      plugin.init.call(that);\n    });\n  },\n  _disposePlugins: function () {\n    var that = this;\n    (0, _iterator.each)(that._plugins.slice().reverse(), function (_, plugin) {\n      plugin.dispose.call(that);\n    });\n  },\n  _change: function (codes) {\n    this._changes.add(codes);\n  },\n  _suspendChanges: function () {\n    ++this._changesLocker;\n  },\n  _resumeChanges: function () {\n    var that = this;\n\n    if (0 === --that._changesLocker && that._changes.count() > 0 && !that._applyingChanges) {\n      that._renderer.lock();\n\n      that._applyingChanges = true;\n\n      that._applyChanges();\n\n      that._changes.reset();\n\n      that._applyingChanges = false;\n\n      that._renderer.unlock();\n\n      if (that._optionsQueue) {\n        that._applyQueuedOptions();\n      }\n\n      that.resolveItemsDeferred(that._legend ? [that._legend] : []);\n      that._optionChangedLocker++;\n\n      that._notify();\n\n      that._optionChangedLocker--;\n    }\n  },\n  resolveItemsDeferred: function (items) {\n    this._resolveDeferred(this._getTemplatesItems(items));\n  },\n  _collectTemplatesFromItems: function (items) {\n    return items.reduce(function (prev, i) {\n      return {\n        items: prev.items.concat(i.getTemplatesDef()),\n        groups: prev.groups.concat(i.getTemplatesGroups())\n      };\n    }, {\n      items: [],\n      groups: []\n    });\n  },\n  _getTemplatesItems: function (items) {\n    var elements = this._collectTemplatesFromItems(items);\n\n    var extraItems = this._getExtraTemplatesItems();\n\n    return {\n      items: extraItems.items.concat(elements.items),\n      groups: extraItems.groups.concat(elements.groups),\n      launchRequest: [extraItems.launchRequest],\n      doneRequest: [extraItems.doneRequest]\n    };\n  },\n  _getExtraTemplatesItems: function () {\n    return {\n      items: [],\n      groups: [],\n      launchRequest: function () {},\n      doneRequest: function () {}\n    };\n  },\n  _resolveDeferred: function (_ref) {\n    var items = _ref.items,\n        launchRequest = _ref.launchRequest,\n        doneRequest = _ref.doneRequest,\n        groups = _ref.groups;\n    var that = this;\n\n    that._setGroupsVisibility(groups, \"hidden\");\n\n    if (that._changesApplying) {\n      that._changesApplying = false;\n      callForEach(doneRequest);\n      return;\n    }\n\n    var syncRendering = true;\n\n    _deferred.when.apply(that, items).done(function () {\n      if (syncRendering) {\n        that._setGroupsVisibility(groups, \"visible\");\n\n        return;\n      }\n\n      callForEach(launchRequest);\n      that._changesApplying = true;\n      var changes = [\"LAYOUT\", \"FULL_RENDER\"];\n\n      if (that._asyncFirstDrawing) {\n        changes.push(\"FORCE_FIRST_DRAWING\");\n        that._asyncFirstDrawing = false;\n      } else {\n        changes.push(\"FORCE_DRAWING\");\n      }\n\n      that._requestChange(changes);\n\n      that._setGroupsVisibility(groups, \"visible\");\n    });\n\n    syncRendering = false;\n  },\n  _setGroupsVisibility: function (groups, visibility) {\n    groups.forEach(function (g) {\n      return g.attr({\n        visibility: visibility\n      });\n    });\n  },\n  _applyQueuedOptions: function () {\n    var that = this;\n    var queue = that._optionsQueue;\n    that._optionsQueue = null;\n    that.beginUpdate();\n    (0, _iterator.each)(queue, function (_, action) {\n      action();\n    });\n    that.endUpdate();\n  },\n  _requestChange: function (codes) {\n    this._suspendChanges();\n\n    this._change(codes);\n\n    this._resumeChanges();\n  },\n  _applyChanges: function () {\n    var that = this;\n    var changes = that._changes;\n    var order = that._totalChangesOrder;\n    var i;\n    var ii = order.length;\n\n    for (i = 0; i < ii; ++i) {\n      if (changes.has(order[i])) {\n        that[\"_change_\" + order[i]]();\n      }\n    }\n  },\n  _optionChangesOrder: [\"EVENTS\", \"THEME\", \"RENDERER\", \"RESIZE_HANDLER\"],\n  _layoutChangesOrder: [\"ELEMENT_ATTR\", \"CONTAINER_SIZE\", \"LAYOUT\"],\n  _customChangesOrder: [\"DISABLED\"],\n  _change_EVENTS: function () {\n    this._eventTrigger.applyChanges();\n  },\n  _change_THEME: function () {\n    this._setThemeAndRtl();\n  },\n  _change_RENDERER: function () {\n    this._setRendererOptions();\n  },\n  _change_RESIZE_HANDLER: function () {\n    this._setupResizeHandler();\n  },\n  _change_ELEMENT_ATTR: function () {\n    this._renderElementAttributes();\n\n    this._change([\"CONTAINER_SIZE\"]);\n  },\n  _change_CONTAINER_SIZE: function () {\n    this._updateSize();\n  },\n  _change_LAYOUT: function () {\n    this._setContentSize();\n  },\n  _change_DISABLED: function () {\n    var renderer = this._renderer;\n    var root = renderer.root;\n\n    if (this.option(\"disabled\")) {\n      this._initDisabledState = root.attr(\"pointer-events\");\n      root.attr({\n        \"pointer-events\": \"none\",\n        filter: renderer.getGrayScaleFilter().id\n      });\n    } else {\n      if (\"none\" === root.attr(\"pointer-events\")) {\n        root.attr({\n          \"pointer-events\": (0, _type.isDefined)(this._initDisabledState) ? this._initDisabledState : null,\n          filter: null\n        });\n      }\n    }\n  },\n  _themeDependentChanges: [\"RENDERER\"],\n  _initRenderer: function () {\n    var that = this;\n    that._canvas = that._calculateCanvas();\n    that._renderer = new _renderer2.Renderer({\n      cssClass: that._rootClassPrefix + \" \" + that._rootClass,\n      pathModified: that.option(\"pathModified\"),\n      container: that._$element[0]\n    });\n\n    that._renderer.resize(that._canvas.width, that._canvas.height);\n  },\n  _disposeRenderer: function () {\n    this._renderer.dispose();\n  },\n  _getAnimationOptions: _common.noop,\n  render: function () {\n    this._requestChange([\"CONTAINER_SIZE\"]);\n\n    var visible = this._isVisible();\n\n    this._toggleParentsScrollSubscription(visible);\n\n    !visible && this._stopCurrentHandling();\n  },\n  _toggleParentsScrollSubscription: function (subscribe) {\n    var $parents = (0, _renderer.default)(this._renderer.root.element).parents();\n    var scrollEvents = \"scroll.viz_widgets\";\n\n    if (\"generic\" === _devices.default.real().platform) {\n      $parents = $parents.add((0, _window.getWindow)());\n    }\n\n    this._proxiedTargetParentsScrollHandler = this._proxiedTargetParentsScrollHandler || function () {\n      this._stopCurrentHandling();\n    }.bind(this);\n\n    _events_engine.default.off((0, _renderer.default)().add(this._$prevRootParents), scrollEvents, this._proxiedTargetParentsScrollHandler);\n\n    if (subscribe) {\n      _events_engine.default.on($parents, scrollEvents, this._proxiedTargetParentsScrollHandler);\n\n      this._$prevRootParents = $parents;\n    }\n  },\n  _stopCurrentHandling: _common.noop,\n  _dispose: function () {\n    var that = this;\n    that.callBase.apply(that, arguments);\n\n    that._toggleParentsScrollSubscription(false);\n\n    that._removeResizeHandler();\n\n    that._layout.dispose();\n\n    that._eventTrigger.dispose();\n\n    that._disposeCore();\n\n    that._disposePlugins();\n\n    that._disposeRenderer();\n\n    that._themeManager.dispose();\n\n    that._themeManager = that._renderer = that._eventTrigger = null;\n  },\n  _initEventTrigger: function () {\n    var that = this;\n    that._eventTrigger = (0, _base_widget.createEventTrigger)(that._eventsMap, function (name) {\n      return that._createActionByOption(name);\n    });\n  },\n  _calculateCanvas: function () {\n    var that = this;\n    var size = that.option(\"size\") || {};\n    var margin = that.option(\"margin\") || {};\n    var defaultCanvas = that._getDefaultSize() || {};\n\n    var getSizeOfSide = function (size, side) {\n      if (sizeIsValid(size[side]) || !(0, _window.hasWindow)()) {\n        return 0;\n      }\n\n      var elementSize = that._$element[side]();\n\n      return elementSize <= 1 ? 0 : elementSize;\n    };\n\n    var elementWidth = getSizeOfSide(size, \"width\");\n    var elementHeight = getSizeOfSide(size, \"height\");\n    var canvas = {\n      width: size.width <= 0 ? 0 : _floor(pickPositiveValue([size.width, elementWidth, defaultCanvas.width])),\n      height: size.height <= 0 ? 0 : _floor(pickPositiveValue([size.height, elementHeight, defaultCanvas.height])),\n      left: pickPositiveValue([margin.left, defaultCanvas.left]),\n      top: pickPositiveValue([margin.top, defaultCanvas.top]),\n      right: pickPositiveValue([margin.right, defaultCanvas.right]),\n      bottom: pickPositiveValue([margin.bottom, defaultCanvas.bottom])\n    };\n\n    if (canvas.width - canvas.left - canvas.right <= 0 || canvas.height - canvas.top - canvas.bottom <= 0) {\n      canvas = {\n        width: 0,\n        height: 0\n      };\n    }\n\n    return canvas;\n  },\n  _updateSize: function () {\n    var that = this;\n\n    var canvas = that._calculateCanvas();\n\n    that._renderer.fixPlacement();\n\n    if (areCanvasesDifferent(that._canvas, canvas) || that.__forceRender) {\n      that._canvas = canvas;\n\n      that._recreateSizeDependentObjects(true);\n\n      that._renderer.resize(canvas.width, canvas.height);\n\n      that._change([\"LAYOUT\"]);\n    }\n  },\n  _recreateSizeDependentObjects: _common.noop,\n  _getMinSize: function () {\n    return [0, 0];\n  },\n  _getAlignmentRect: _common.noop,\n  _setContentSize: function () {\n    var canvas = this._canvas;\n    var layout = this._layout;\n    var rect = canvas.width > 0 && canvas.height > 0 ? [canvas.left, canvas.top, canvas.width - canvas.right, canvas.height - canvas.bottom] : [0, 0, 0, 0];\n    rect = layout.forward(rect, this._getMinSize());\n    var nextRect = this._applySize(rect) || rect;\n    layout.backward(nextRect, this._getAlignmentRect() || nextRect);\n  },\n  _getOption: function (name, isScalar) {\n    var theme = this._themeManager.theme(name);\n\n    var option = this.option(name);\n    return isScalar ? void 0 !== option ? option : theme : (0, _extend.extend)(true, {}, theme, option);\n  },\n  _setupResizeHandler: function () {\n    var that = this;\n    var redrawOnResize = (0, _utils.parseScalar)(this._getOption(\"redrawOnResize\", true), true);\n\n    if (that._resizeHandler) {\n      that._removeResizeHandler();\n    }\n\n    that._resizeHandler = (0, _base_widget.createResizeHandler)(function () {\n      if (redrawOnResize) {\n        that._requestChange([\"CONTAINER_SIZE\"]);\n      } else {\n        that._renderer.fixPlacement();\n      }\n    });\n\n    _resize_callbacks.default.add(that._resizeHandler);\n  },\n  _removeResizeHandler: function () {\n    if (this._resizeHandler) {\n      _resize_callbacks.default.remove(this._resizeHandler);\n\n      this._resizeHandler.dispose();\n\n      this._resizeHandler = null;\n    }\n  },\n  _onBeginUpdate: _common.noop,\n  beginUpdate: function () {\n    var that = this;\n\n    if (that._initialized && that._isUpdateAllowed()) {\n      that._onBeginUpdate();\n\n      that._suspendChanges();\n    }\n\n    that.callBase.apply(that, arguments);\n    return that;\n  },\n  endUpdate: function () {\n    this.callBase();\n    this._isUpdateAllowed() && this._resumeChanges();\n    return this;\n  },\n  option: function (name) {\n    var that = this;\n\n    if (that._initialized && that._applyingChanges && (arguments.length > 1 || (0, _type.isObject)(name))) {\n      that._optionsQueue = that._optionsQueue || [];\n\n      that._optionsQueue.push(that._getActionForUpdating(arguments));\n    } else {\n      return _option.apply(that, arguments);\n    }\n  },\n  _getActionForUpdating: function (args) {\n    var that = this;\n    return function () {\n      _option.apply(that, args);\n    };\n  },\n  _clean: _common.noop,\n  _render: _common.noop,\n  _optionChanged: function (arg) {\n    var that = this;\n\n    if (that._optionChangedLocker) {\n      return;\n    }\n\n    var partialChanges = that.getPartialChangeOptionsName(arg);\n    var changes = [];\n\n    if (partialChanges.length > 0) {\n      partialChanges.forEach(function (pc) {\n        return changes.push(that._partialOptionChangesMap[pc]);\n      });\n    } else {\n      changes.push(that._optionChangesMap[arg.name]);\n    }\n\n    changes = changes.filter(function (c) {\n      return !!c;\n    });\n\n    if (that._eventTrigger.change(arg.name)) {\n      that._change([\"EVENTS\"]);\n    } else {\n      if (changes.length > 0) {\n        that._change(changes);\n      } else {\n        that.callBase.apply(that, arguments);\n      }\n    }\n  },\n  _notify: _common.noop,\n  _optionChangesMap: {\n    size: \"CONTAINER_SIZE\",\n    margin: \"CONTAINER_SIZE\",\n    redrawOnResize: \"RESIZE_HANDLER\",\n    theme: \"THEME\",\n    rtlEnabled: \"THEME\",\n    encodeHtml: \"THEME\",\n    elementAttr: \"ELEMENT_ATTR\",\n    disabled: \"DISABLED\"\n  },\n  _partialOptionChangesMap: {},\n  _partialOptionChangesPath: {},\n  getPartialChangeOptionsName: function (changedOption) {\n    var that = this;\n    var fullName = changedOption.fullName;\n    var sections = fullName.split(/[.]/);\n    var name = changedOption.name;\n    var value = changedOption.value;\n    var options = this._partialOptionChangesPath[name];\n    var partialChangeOptionsName = [];\n\n    if (options) {\n      if (true === options) {\n        partialChangeOptionsName.push(name);\n      } else {\n        options.forEach(function (op) {\n          fullName.indexOf(op) >= 0 && partialChangeOptionsName.push(op);\n        });\n\n        if (1 === sections.length) {\n          if (\"object\" === (0, _type.type)(value)) {\n            that._addOptionsNameForPartialUpdate(value, options, partialChangeOptionsName);\n          } else {\n            if (\"array\" === (0, _type.type)(value)) {\n              if (value.length > 0 && value.every(function (item) {\n                return that._checkOptionsForPartialUpdate(item, options);\n              })) {\n                value.forEach(function (item) {\n                  return that._addOptionsNameForPartialUpdate(item, options, partialChangeOptionsName);\n                });\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return partialChangeOptionsName.filter(function (value, index, self) {\n      return self.indexOf(value) === index;\n    });\n  },\n  _checkOptionsForPartialUpdate: function (optionObject, options) {\n    return !Object.keys(optionObject).some(function (key) {\n      return options.indexOf(key) === -1;\n    });\n  },\n  _addOptionsNameForPartialUpdate: function (optionObject, options, partialChangeOptionsName) {\n    var optionKeys = Object.keys(optionObject);\n\n    if (this._checkOptionsForPartialUpdate(optionObject, options)) {\n      optionKeys.forEach(function (key) {\n        return options.indexOf(key) > -1 && partialChangeOptionsName.push(key);\n      });\n    }\n  },\n  _visibilityChanged: function () {\n    this.render();\n  },\n  _setThemeAndRtl: function () {\n    this._themeManager.setTheme(this.option(\"theme\"), this.option(OPTION_RTL_ENABLED));\n  },\n  _getRendererOptions: function () {\n    return {\n      rtl: this.option(OPTION_RTL_ENABLED),\n      encodeHtml: this.option(\"encodeHtml\"),\n      animation: this._getAnimationOptions()\n    };\n  },\n  _setRendererOptions: function () {\n    this._renderer.setOptions(this._getRendererOptions());\n  },\n  svg: function () {\n    return this._renderer.svg();\n  },\n  getSize: function () {\n    var canvas = this._canvas || {};\n    return {\n      width: canvas.width,\n      height: canvas.height\n    };\n  },\n  isReady: getFalse,\n  _dataIsReady: getTrue,\n  _resetIsReady: function () {\n    this.isReady = getFalse;\n  },\n  _drawn: function () {\n    var that = this;\n    that.isReady = getFalse;\n\n    if (that._dataIsReady()) {\n      that._renderer.onEndAnimation(function () {\n        that.isReady = getTrue;\n      });\n    }\n\n    that._eventTrigger(\"drawn\", {});\n  }\n});\nvar _default = baseWidget;\nexports.default = _default;\n(0, _helpers.replaceInherit)(baseWidget);\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/Monday.com/quickstart-react/node_modules/devextreme/viz/core/base_widget.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_common","_window","_dom_adapter","_type","_iterator","_resize_callbacks","_extend","_base_theme_manager","_dom_component","_helpers","_utils","_errors_warnings","_renderer2","_layout","_devices","_events_engine","_deferred","_base_widget","obj","__esModule","_floor","Math","floor","_log","log","OPTION_RTL_ENABLED","SIZED_ELEMENT_CLASS","_option","prototype","option","getTrue","getFalse","areCanvasesDifferent","canvas1","canvas2","width","height","left","top","right","bottom","defaultOnIncidentOccurred","e","component","_eventsStrategy","hasEvent","apply","target","id","concat","args","pickPositiveValue","values","reduce","result","value","getEmptyComponent","emptyComponentConfig","_initTemplates","ctor","element","options","callBase","sizedElement","createElement","isNumeric","_getDefaultSize","setStyle","setClass","insertElement","EmptyComponent","inherit","originalInherit","config","field","isFunction","substr","noop","call","callForEach","functions","forEach","c","isServerSide","hasWindow","sizeIsValid","isDefined","baseWidget","_eventsMap","onIncidentOccurred","name","onDrawn","_getDefaultOptions","extend","_useLinks","_init","that","_$element","children","remove","arguments","_changesLocker","_optionChangedLocker","_asyncFirstDrawing","_changes","changes","_suspendChanges","_themeManager","_createThemeManager","setCallback","_requestChange","_themeDependentChanges","_renderElementAttributes","_initRenderer","linkTarget","root","enableLinks","virtualLink","_renderVisibilityChange","_attachVisibilityChangeHandlers","_toggleParentsScrollSubscription","_isVisible","_initEventTrigger","_incidentOccurred","createIncidentOccurred","NAME","_eventTrigger","linkAfter","_initPlugins","_initCore","_change","_initialChanges","BaseThemeManager","_getThemeManagerOptions","themeSection","_themeSection","fontFields","_fontFields","each","_plugins","_","plugin","init","_disposePlugins","slice","reverse","dispose","codes","add","_resumeChanges","count","_applyingChanges","lock","_applyChanges","reset","unlock","_optionsQueue","_applyQueuedOptions","resolveItemsDeferred","_legend","_notify","items","_resolveDeferred","_getTemplatesItems","_collectTemplatesFromItems","prev","i","getTemplatesDef","groups","getTemplatesGroups","elements","extraItems","_getExtraTemplatesItems","launchRequest","doneRequest","_ref","_setGroupsVisibility","_changesApplying","syncRendering","when","done","push","visibility","g","attr","queue","beginUpdate","action","endUpdate","order","_totalChangesOrder","ii","length","has","_optionChangesOrder","_layoutChangesOrder","_customChangesOrder","_change_EVENTS","applyChanges","_change_THEME","_setThemeAndRtl","_change_RENDERER","_setRendererOptions","_change_RESIZE_HANDLER","_setupResizeHandler","_change_ELEMENT_ATTR","_change_CONTAINER_SIZE","_updateSize","_change_LAYOUT","_setContentSize","_change_DISABLED","renderer","_initDisabledState","filter","getGrayScaleFilter","_canvas","_calculateCanvas","Renderer","cssClass","_rootClassPrefix","_rootClass","pathModified","container","resize","_disposeRenderer","_getAnimationOptions","render","visible","_stopCurrentHandling","subscribe","$parents","parents","scrollEvents","real","platform","getWindow","_proxiedTargetParentsScrollHandler","bind","off","_$prevRootParents","on","_dispose","_removeResizeHandler","_disposeCore","createEventTrigger","_createActionByOption","size","margin","defaultCanvas","getSizeOfSide","side","elementSize","elementWidth","elementHeight","canvas","fixPlacement","__forceRender","_recreateSizeDependentObjects","_getMinSize","_getAlignmentRect","layout","rect","forward","nextRect","_applySize","backward","_getOption","isScalar","theme","redrawOnResize","parseScalar","_resizeHandler","createResizeHandler","_onBeginUpdate","_initialized","_isUpdateAllowed","isObject","_getActionForUpdating","_clean","_render","_optionChanged","arg","partialChanges","getPartialChangeOptionsName","pc","_partialOptionChangesMap","_optionChangesMap","change","rtlEnabled","encodeHtml","elementAttr","disabled","_partialOptionChangesPath","changedOption","fullName","sections","split","partialChangeOptionsName","op","indexOf","type","_addOptionsNameForPartialUpdate","every","item","_checkOptionsForPartialUpdate","index","self","optionObject","Object","keys","some","key","optionKeys","_visibilityChanged","setTheme","_getRendererOptions","rtl","animation","setOptions","svg","getSize","isReady","_dataIsReady","_resetIsReady","_drawn","onEndAnimation","_default","replaceInherit","module"],"mappings":"AAAA;;;;;;;;AAQA;;AACAA,OAAO,CAACC,OAAR,GAAkB,KAAK,CAAvB;;AACA,IAAIC,SAAS,GAAGC,sBAAsB,CAACC,OAAO,CAAC,qBAAD,CAAR,CAAtC;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIE,OAAO,GAAGF,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIG,YAAY,GAAGJ,sBAAsB,CAACC,OAAO,CAAC,wBAAD,CAAR,CAAzC;;AACA,IAAII,KAAK,GAAGJ,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIK,SAAS,GAAGL,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIM,iBAAiB,GAAGP,sBAAsB,CAACC,OAAO,CAAC,mCAAD,CAAR,CAA9C;;AACA,IAAIO,OAAO,GAAGP,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIQ,mBAAmB,GAAGR,OAAO,CAAC,4BAAD,CAAjC;;AACA,IAAIS,cAAc,GAAGV,sBAAsB,CAACC,OAAO,CAAC,0BAAD,CAAR,CAA3C;;AACA,IAAIU,QAAQ,GAAGV,OAAO,CAAC,WAAD,CAAtB;;AACA,IAAIW,MAAM,GAAGX,OAAO,CAAC,SAAD,CAApB;;AACA,IAAIY,gBAAgB,GAAGb,sBAAsB,CAACC,OAAO,CAAC,mBAAD,CAAR,CAA7C;;AACA,IAAIa,UAAU,GAAGb,OAAO,CAAC,sBAAD,CAAxB;;AACA,IAAIc,OAAO,GAAGf,sBAAsB,CAACC,OAAO,CAAC,UAAD,CAAR,CAApC;;AACA,IAAIe,QAAQ,GAAGhB,sBAAsB,CAACC,OAAO,CAAC,oBAAD,CAAR,CAArC;;AACA,IAAIgB,cAAc,GAAGjB,sBAAsB,CAACC,OAAO,CAAC,iCAAD,CAAR,CAA3C;;AACA,IAAIiB,SAAS,GAAGjB,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIkB,YAAY,GAAGlB,OAAO,CAAC,qBAAD,CAA1B;;AAEA,SAASD,sBAAT,CAAgCoB,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AACD,IAAIE,MAAM,GAAGC,IAAI,CAACC,KAAlB;AACA,IAAIC,IAAI,GAAGZ,gBAAgB,CAACf,OAAjB,CAAyB4B,GAApC;AACA,IAAIC,kBAAkB,GAAG,YAAzB;AACA,IAAIC,mBAAmB,GAAG,kBAA1B;AACA,IAAIC,OAAO,GAAGnB,cAAc,CAACZ,OAAf,CAAuBgC,SAAvB,CAAiCC,MAA/C;;AAEA,SAASC,OAAT,GAAmB;AACf,SAAO,IAAP;AACH;;AAED,SAASC,QAAT,GAAoB;AAChB,SAAO,KAAP;AACH;;AAED,SAASC,oBAAT,CAA8BC,OAA9B,EAAuCC,OAAvC,EAAgD;AAC5C,SAAO,EAAED,OAAO,CAACE,KAAR,KAAkBD,OAAO,CAACC,KAA1B,IAAmCF,OAAO,CAACG,MAAR,KAAmBF,OAAO,CAACE,MAA9D,IAAwEH,OAAO,CAACI,IAAR,KAAiBH,OAAO,CAACG,IAAjG,IAAyGJ,OAAO,CAACK,GAAR,KAAgBJ,OAAO,CAACI,GAAjI,IAAwIL,OAAO,CAACM,KAAR,KAAkBL,OAAO,CAACK,KAAlK,IAA2KN,OAAO,CAACO,MAAR,KAAmBN,OAAO,CAACM,MAAxM,CAAP;AACH;;AAED,SAASC,yBAAT,CAAmCC,CAAnC,EAAsC;AAClC,MAAI,CAACA,CAAC,CAACC,SAAF,CAAYC,eAAZ,CAA4BC,QAA5B,CAAqC,kBAArC,CAAL,EAA+D;AAC3DtB,IAAAA,IAAI,CAACuB,KAAL,CAAW,IAAX,EAAiB,CAACJ,CAAC,CAACK,MAAF,CAASC,EAAV,EAAcC,MAAd,CAAqBP,CAAC,CAACK,MAAF,CAASG,IAAT,IAAiB,EAAtC,CAAjB;AACH;AACJ;;AAED,SAASC,iBAAT,CAA2BC,MAA3B,EAAmC;AAC/B,SAAOA,MAAM,CAACC,MAAP,CAAc,UAASC,MAAT,EAAiBC,KAAjB,EAAwB;AACzC,WAAOA,KAAK,GAAG,CAAR,IAAa,CAACD,MAAd,GAAuBC,KAAvB,GAA+BD,MAAtC;AACH,GAFM,EAEJ,CAFI,CAAP;AAGH;;AACD,IAAIE,iBAAiB,GAAG,YAAW;AAC/B,MAAIC,oBAAoB,GAAG;AACvBC,IAAAA,cAAc,EAAE,YAAW,CAAE,CADN;AAEvBC,IAAAA,IAAI,EAAE,UAASC,OAAT,EAAkBC,OAAlB,EAA2B;AAC7B,WAAKC,QAAL,CAAcF,OAAd,EAAuBC,OAAvB;;AACA,UAAIE,YAAY,GAAG7D,YAAY,CAACN,OAAb,CAAqBoE,aAArB,CAAmC,KAAnC,CAAnB;;AACA,UAAI7B,KAAK,GAAG0B,OAAO,IAAI,CAAC,GAAG1D,KAAK,CAAC8D,SAAV,EAAqBJ,OAAO,CAAC1B,KAA7B,CAAX,GAAiD0B,OAAO,CAAC1B,KAAR,GAAgB,IAAjE,GAAwE,MAApF;AACA,UAAIC,MAAM,GAAGyB,OAAO,IAAI,CAAC,GAAG1D,KAAK,CAAC8D,SAAV,EAAqBJ,OAAO,CAACzB,MAA7B,CAAX,GAAkDyB,OAAO,CAACzB,MAAR,GAAiB,IAAnE,GAA0E,KAAK8B,eAAL,GAAuB9B,MAAvB,GAAgC,IAAvH;;AACAlC,MAAAA,YAAY,CAACN,OAAb,CAAqBuE,QAArB,CAA8BJ,YAA9B,EAA4C,OAA5C,EAAqD5B,KAArD;;AACAjC,MAAAA,YAAY,CAACN,OAAb,CAAqBuE,QAArB,CAA8BJ,YAA9B,EAA4C,QAA5C,EAAsD3B,MAAtD;;AACAlC,MAAAA,YAAY,CAACN,OAAb,CAAqBwE,QAArB,CAA8BL,YAA9B,EAA4CrC,mBAA5C;;AACAxB,MAAAA,YAAY,CAACN,OAAb,CAAqByE,aAArB,CAAmCT,OAAnC,EAA4CG,YAA5C;AACH;AAXsB,GAA3B;;AAaA,MAAIO,cAAc,GAAG9D,cAAc,CAACZ,OAAf,CAAuB2E,OAAvB,CAA+Bd,oBAA/B,CAArB;;AACA,MAAIe,eAAe,GAAGF,cAAc,CAACC,OAArC;;AACAD,EAAAA,cAAc,CAACC,OAAf,GAAyB,UAASE,MAAT,EAAiB;AACtC,SAAK,IAAIC,KAAT,IAAkBD,MAAlB,EAA0B;AACtB,UAAI,CAAC,GAAGtE,KAAK,CAACwE,UAAV,EAAsBF,MAAM,CAACC,KAAD,CAA5B,KAAwC,QAAQA,KAAK,CAACE,MAAN,CAAa,CAAb,EAAgB,CAAhB,CAAhD,IAAsE,aAAaF,KAAnF,IAA4F,eAAeA,KAA3G,IAAoH,qBAAqBA,KAA7I,EAAoJ;AAChJD,QAAAA,MAAM,CAACC,KAAD,CAAN,GAAgB1E,OAAO,CAAC6E,IAAxB;AACH;AACJ;;AACD,WAAOL,eAAe,CAACM,IAAhB,CAAqB,IAArB,EAA2BL,MAA3B,CAAP;AACH,GAPD;;AAQA,SAAOH,cAAP;AACH,CAzBD;;AA2BA,SAASS,WAAT,CAAqBC,SAArB,EAAgC;AAC5BA,EAAAA,SAAS,CAACC,OAAV,CAAkB,UAASC,CAAT,EAAY;AAC1B,WAAOA,CAAC,EAAR;AACH,GAFD;AAGH;;AACD,IAAIC,YAAY,GAAG,CAAC,CAAC,GAAGlF,OAAO,CAACmF,SAAZ,GAApB;;AAEA,SAASC,WAAT,CAAqB9B,KAArB,EAA4B;AACxB,SAAO,CAAC,GAAGpD,KAAK,CAACmF,SAAV,EAAqB/B,KAArB,KAA+BA,KAAK,GAAG,CAA9C;AACH;;AACD,IAAIgC,UAAU,GAAGJ,YAAY,GAAG3B,iBAAiB,EAApB,GAAyBhD,cAAc,CAACZ,OAAf,CAAuB2E,OAAvB,CAA+B;AACjFiB,EAAAA,UAAU,EAAE;AACRC,IAAAA,kBAAkB,EAAE;AAChBC,MAAAA,IAAI,EAAE;AADU,KADZ;AAIRC,IAAAA,OAAO,EAAE;AACLD,MAAAA,IAAI,EAAE;AADD;AAJD,GADqE;AASjFE,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,WAAO,CAAC,GAAGtF,OAAO,CAACuF,MAAZ,EAAoB,KAAK/B,QAAL,EAApB,EAAqC;AACxC2B,MAAAA,kBAAkB,EAAEhD;AADoB,KAArC,CAAP;AAGH,GAbgF;AAcjFqD,EAAAA,SAAS,EAAE,IAdsE;AAejFC,EAAAA,KAAK,EAAE,YAAW;AACd,QAAIC,IAAI,GAAG,IAAX;;AACAA,IAAAA,IAAI,CAACC,SAAL,CAAeC,QAAf,CAAwB,MAAMxE,mBAA9B,EAAmDyE,MAAnD;;AACAH,IAAAA,IAAI,CAAClC,QAAL,CAAchB,KAAd,CAAoBkD,IAApB,EAA0BI,SAA1B;AACAJ,IAAAA,IAAI,CAACK,cAAL,GAAsB,CAAtB;AACAL,IAAAA,IAAI,CAACM,oBAAL,GAA4B,CAA5B;AACAN,IAAAA,IAAI,CAACO,kBAAL,GAA0B,IAA1B;AACAP,IAAAA,IAAI,CAACQ,QAAL,GAAgB,CAAC,GAAG/F,QAAQ,CAACgG,OAAb,GAAhB;;AACAT,IAAAA,IAAI,CAACU,eAAL;;AACAV,IAAAA,IAAI,CAACW,aAAL,GAAqBX,IAAI,CAACY,mBAAL,EAArB;;AACAZ,IAAAA,IAAI,CAACW,aAAL,CAAmBE,WAAnB,CAA+B,YAAW;AACtCb,MAAAA,IAAI,CAACc,cAAL,CAAoBd,IAAI,CAACe,sBAAzB;AACH,KAFD;;AAGAf,IAAAA,IAAI,CAACgB,wBAAL;;AACAhB,IAAAA,IAAI,CAACiB,aAAL;;AACA,QAAIC,UAAU,GAAGlB,IAAI,CAACF,SAAL,IAAkBE,IAAI,CAACnG,SAAL,CAAesH,IAAlD;AACAD,IAAAA,UAAU,IAAIA,UAAU,CAACE,WAAX,GAAyBC,WAAzB,CAAqC,MAArC,EAA6CA,WAA7C,CAAyD,YAAzD,CAAd;;AACArB,IAAAA,IAAI,CAACsB,uBAAL;;AACAtB,IAAAA,IAAI,CAACuB,+BAAL;;AACAvB,IAAAA,IAAI,CAACwB,gCAAL,CAAsC,KAAKC,UAAL,EAAtC;;AACAzB,IAAAA,IAAI,CAAC0B,iBAAL;;AACA1B,IAAAA,IAAI,CAAC2B,iBAAL,GAAyB,CAAC,GAAG1G,YAAY,CAAC2G,sBAAjB,EAAyC5B,IAAI,CAAC6B,IAA9C,EAAoD7B,IAAI,CAAC8B,aAAzD,CAAzB;AACA9B,IAAAA,IAAI,CAACnF,OAAL,GAAe,IAAIA,OAAO,CAACjB,OAAZ,EAAf;AACAsH,IAAAA,UAAU,IAAIA,UAAU,CAACa,SAAX,CAAqB,MAArB,CAAd;;AACA/B,IAAAA,IAAI,CAACgC,YAAL;;AACAhC,IAAAA,IAAI,CAACiC,SAAL;;AACAf,IAAAA,UAAU,IAAIA,UAAU,CAACa,SAAX,EAAd;;AACA/B,IAAAA,IAAI,CAACkC,OAAL,CAAalC,IAAI,CAACmC,eAAlB;AACH,GA3CgF;AA4CjFvB,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,WAAO,IAAIrG,mBAAmB,CAAC6H,gBAAxB,CAAyC,KAAKC,uBAAL,EAAzC,CAAP;AACH,GA9CgF;AA+CjFA,EAAAA,uBAAuB,EAAE,YAAW;AAChC,WAAO;AACHC,MAAAA,YAAY,EAAE,KAAKC,aADhB;AAEHC,MAAAA,UAAU,EAAE,KAAKC;AAFd,KAAP;AAIH,GApDgF;AAqDjFN,EAAAA,eAAe,EAAE,CAAC,QAAD,EAAW,gBAAX,EAA6B,OAA7B,EAAsC,UAAtC,CArDgE;AAsDjFH,EAAAA,YAAY,EAAE,YAAW;AACrB,QAAIhC,IAAI,GAAG,IAAX;AACA,KAAC,GAAG5F,SAAS,CAACsI,IAAd,EAAoB1C,IAAI,CAAC2C,QAAzB,EAAmC,UAASC,CAAT,EAAYC,MAAZ,EAAoB;AACnDA,MAAAA,MAAM,CAACC,IAAP,CAAYhE,IAAZ,CAAiBkB,IAAjB;AACH,KAFD;AAGH,GA3DgF;AA4DjF+C,EAAAA,eAAe,EAAE,YAAW;AACxB,QAAI/C,IAAI,GAAG,IAAX;AACA,KAAC,GAAG5F,SAAS,CAACsI,IAAd,EAAoB1C,IAAI,CAAC2C,QAAL,CAAcK,KAAd,GAAsBC,OAAtB,EAApB,EAAqD,UAASL,CAAT,EAAYC,MAAZ,EAAoB;AACrEA,MAAAA,MAAM,CAACK,OAAP,CAAepE,IAAf,CAAoBkB,IAApB;AACH,KAFD;AAGH,GAjEgF;AAkEjFkC,EAAAA,OAAO,EAAE,UAASiB,KAAT,EAAgB;AACrB,SAAK3C,QAAL,CAAc4C,GAAd,CAAkBD,KAAlB;AACH,GApEgF;AAqEjFzC,EAAAA,eAAe,EAAE,YAAW;AACxB,MAAE,KAAKL,cAAP;AACH,GAvEgF;AAwEjFgD,EAAAA,cAAc,EAAE,YAAW;AACvB,QAAIrD,IAAI,GAAG,IAAX;;AACA,QAAI,MAAM,EAAEA,IAAI,CAACK,cAAb,IAA+BL,IAAI,CAACQ,QAAL,CAAc8C,KAAd,KAAwB,CAAvD,IAA4D,CAACtD,IAAI,CAACuD,gBAAtE,EAAwF;AACpFvD,MAAAA,IAAI,CAACnG,SAAL,CAAe2J,IAAf;;AACAxD,MAAAA,IAAI,CAACuD,gBAAL,GAAwB,IAAxB;;AACAvD,MAAAA,IAAI,CAACyD,aAAL;;AACAzD,MAAAA,IAAI,CAACQ,QAAL,CAAckD,KAAd;;AACA1D,MAAAA,IAAI,CAACuD,gBAAL,GAAwB,KAAxB;;AACAvD,MAAAA,IAAI,CAACnG,SAAL,CAAe8J,MAAf;;AACA,UAAI3D,IAAI,CAAC4D,aAAT,EAAwB;AACpB5D,QAAAA,IAAI,CAAC6D,mBAAL;AACH;;AACD7D,MAAAA,IAAI,CAAC8D,oBAAL,CAA0B9D,IAAI,CAAC+D,OAAL,GAAe,CAAC/D,IAAI,CAAC+D,OAAN,CAAf,GAAgC,EAA1D;AACA/D,MAAAA,IAAI,CAACM,oBAAL;;AACAN,MAAAA,IAAI,CAACgE,OAAL;;AACAhE,MAAAA,IAAI,CAACM,oBAAL;AACH;AACJ,GAzFgF;AA0FjFwD,EAAAA,oBAAoB,EAAE,UAASG,KAAT,EAAgB;AAClC,SAAKC,gBAAL,CAAsB,KAAKC,kBAAL,CAAwBF,KAAxB,CAAtB;AACH,GA5FgF;AA6FjFG,EAAAA,0BAA0B,EAAE,UAASH,KAAT,EAAgB;AACxC,WAAOA,KAAK,CAAC5G,MAAN,CAAa,UAASgH,IAAT,EAAeC,CAAf,EAAkB;AAClC,aAAO;AACHL,QAAAA,KAAK,EAAEI,IAAI,CAACJ,KAAL,CAAWhH,MAAX,CAAkBqH,CAAC,CAACC,eAAF,EAAlB,CADJ;AAEHC,QAAAA,MAAM,EAAEH,IAAI,CAACG,MAAL,CAAYvH,MAAZ,CAAmBqH,CAAC,CAACG,kBAAF,EAAnB;AAFL,OAAP;AAIH,KALM,EAKJ;AACCR,MAAAA,KAAK,EAAE,EADR;AAECO,MAAAA,MAAM,EAAE;AAFT,KALI,CAAP;AASH,GAvGgF;AAwGjFL,EAAAA,kBAAkB,EAAE,UAASF,KAAT,EAAgB;AAChC,QAAIS,QAAQ,GAAG,KAAKN,0BAAL,CAAgCH,KAAhC,CAAf;;AACA,QAAIU,UAAU,GAAG,KAAKC,uBAAL,EAAjB;;AACA,WAAO;AACHX,MAAAA,KAAK,EAAEU,UAAU,CAACV,KAAX,CAAiBhH,MAAjB,CAAwByH,QAAQ,CAACT,KAAjC,CADJ;AAEHO,MAAAA,MAAM,EAAEG,UAAU,CAACH,MAAX,CAAkBvH,MAAlB,CAAyByH,QAAQ,CAACF,MAAlC,CAFL;AAGHK,MAAAA,aAAa,EAAE,CAACF,UAAU,CAACE,aAAZ,CAHZ;AAIHC,MAAAA,WAAW,EAAE,CAACH,UAAU,CAACG,WAAZ;AAJV,KAAP;AAMH,GAjHgF;AAkHjFF,EAAAA,uBAAuB,EAAE,YAAW;AAChC,WAAO;AACHX,MAAAA,KAAK,EAAE,EADJ;AAEHO,MAAAA,MAAM,EAAE,EAFL;AAGHK,MAAAA,aAAa,EAAE,YAAW,CAAE,CAHzB;AAIHC,MAAAA,WAAW,EAAE,YAAW,CAAE;AAJvB,KAAP;AAMH,GAzHgF;AA0HjFZ,EAAAA,gBAAgB,EAAE,UAASa,IAAT,EAAe;AAC7B,QAAId,KAAK,GAAGc,IAAI,CAACd,KAAjB;AAAA,QACIY,aAAa,GAAGE,IAAI,CAACF,aADzB;AAAA,QAEIC,WAAW,GAAGC,IAAI,CAACD,WAFvB;AAAA,QAGIN,MAAM,GAAGO,IAAI,CAACP,MAHlB;AAIA,QAAIxE,IAAI,GAAG,IAAX;;AACAA,IAAAA,IAAI,CAACgF,oBAAL,CAA0BR,MAA1B,EAAkC,QAAlC;;AACA,QAAIxE,IAAI,CAACiF,gBAAT,EAA2B;AACvBjF,MAAAA,IAAI,CAACiF,gBAAL,GAAwB,KAAxB;AACAlG,MAAAA,WAAW,CAAC+F,WAAD,CAAX;AACA;AACH;;AACD,QAAII,aAAa,GAAG,IAApB;;AACAlK,IAAAA,SAAS,CAACmK,IAAV,CAAerI,KAAf,CAAqBkD,IAArB,EAA2BiE,KAA3B,EAAkCmB,IAAlC,CAAuC,YAAW;AAC9C,UAAIF,aAAJ,EAAmB;AACflF,QAAAA,IAAI,CAACgF,oBAAL,CAA0BR,MAA1B,EAAkC,SAAlC;;AACA;AACH;;AACDzF,MAAAA,WAAW,CAAC8F,aAAD,CAAX;AACA7E,MAAAA,IAAI,CAACiF,gBAAL,GAAwB,IAAxB;AACA,UAAIxE,OAAO,GAAG,CAAC,QAAD,EAAW,aAAX,CAAd;;AACA,UAAIT,IAAI,CAACO,kBAAT,EAA6B;AACzBE,QAAAA,OAAO,CAAC4E,IAAR,CAAa,qBAAb;AACArF,QAAAA,IAAI,CAACO,kBAAL,GAA0B,KAA1B;AACH,OAHD,MAGO;AACHE,QAAAA,OAAO,CAAC4E,IAAR,CAAa,eAAb;AACH;;AACDrF,MAAAA,IAAI,CAACc,cAAL,CAAoBL,OAApB;;AACAT,MAAAA,IAAI,CAACgF,oBAAL,CAA0BR,MAA1B,EAAkC,SAAlC;AACH,KAhBD;;AAiBAU,IAAAA,aAAa,GAAG,KAAhB;AACH,GAzJgF;AA0JjFF,EAAAA,oBAAoB,EAAE,UAASR,MAAT,EAAiBc,UAAjB,EAA6B;AAC/Cd,IAAAA,MAAM,CAACvF,OAAP,CAAe,UAASsG,CAAT,EAAY;AACvB,aAAOA,CAAC,CAACC,IAAF,CAAO;AACVF,QAAAA,UAAU,EAAEA;AADF,OAAP,CAAP;AAGH,KAJD;AAKH,GAhKgF;AAiKjFzB,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,QAAI7D,IAAI,GAAG,IAAX;AACA,QAAIyF,KAAK,GAAGzF,IAAI,CAAC4D,aAAjB;AACA5D,IAAAA,IAAI,CAAC4D,aAAL,GAAqB,IAArB;AACA5D,IAAAA,IAAI,CAAC0F,WAAL;AACA,KAAC,GAAGtL,SAAS,CAACsI,IAAd,EAAoB+C,KAApB,EAA2B,UAAS7C,CAAT,EAAY+C,MAAZ,EAAoB;AAC3CA,MAAAA,MAAM;AACT,KAFD;AAGA3F,IAAAA,IAAI,CAAC4F,SAAL;AACH,GA1KgF;AA2KjF9E,EAAAA,cAAc,EAAE,UAASqC,KAAT,EAAgB;AAC5B,SAAKzC,eAAL;;AACA,SAAKwB,OAAL,CAAaiB,KAAb;;AACA,SAAKE,cAAL;AACH,GA/KgF;AAgLjFI,EAAAA,aAAa,EAAE,YAAW;AACtB,QAAIzD,IAAI,GAAG,IAAX;AACA,QAAIS,OAAO,GAAGT,IAAI,CAACQ,QAAnB;AACA,QAAIqF,KAAK,GAAG7F,IAAI,CAAC8F,kBAAjB;AACA,QAAIxB,CAAJ;AACA,QAAIyB,EAAE,GAAGF,KAAK,CAACG,MAAf;;AACA,SAAK1B,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGyB,EAAhB,EAAoB,EAAEzB,CAAtB,EAAyB;AACrB,UAAI7D,OAAO,CAACwF,GAAR,CAAYJ,KAAK,CAACvB,CAAD,CAAjB,CAAJ,EAA2B;AACvBtE,QAAAA,IAAI,CAAC,aAAa6F,KAAK,CAACvB,CAAD,CAAnB,CAAJ;AACH;AACJ;AACJ,GA3LgF;AA4LjF4B,EAAAA,mBAAmB,EAAE,CAAC,QAAD,EAAW,OAAX,EAAoB,UAApB,EAAgC,gBAAhC,CA5L4D;AA6LjFC,EAAAA,mBAAmB,EAAE,CAAC,cAAD,EAAiB,gBAAjB,EAAmC,QAAnC,CA7L4D;AA8LjFC,EAAAA,mBAAmB,EAAE,CAAC,UAAD,CA9L4D;AA+LjFC,EAAAA,cAAc,EAAE,YAAW;AACvB,SAAKvE,aAAL,CAAmBwE,YAAnB;AACH,GAjMgF;AAkMjFC,EAAAA,aAAa,EAAE,YAAW;AACtB,SAAKC,eAAL;AACH,GApMgF;AAqMjFC,EAAAA,gBAAgB,EAAE,YAAW;AACzB,SAAKC,mBAAL;AACH,GAvMgF;AAwMjFC,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,SAAKC,mBAAL;AACH,GA1MgF;AA2MjFC,EAAAA,oBAAoB,EAAE,YAAW;AAC7B,SAAK7F,wBAAL;;AACA,SAAKkB,OAAL,CAAa,CAAC,gBAAD,CAAb;AACH,GA9MgF;AA+MjF4E,EAAAA,sBAAsB,EAAE,YAAW;AAC/B,SAAKC,WAAL;AACH,GAjNgF;AAkNjFC,EAAAA,cAAc,EAAE,YAAW;AACvB,SAAKC,eAAL;AACH,GApNgF;AAqNjFC,EAAAA,gBAAgB,EAAE,YAAW;AACzB,QAAIC,QAAQ,GAAG,KAAKtN,SAApB;AACA,QAAIsH,IAAI,GAAGgG,QAAQ,CAAChG,IAApB;;AACA,QAAI,KAAKtF,MAAL,CAAY,UAAZ,CAAJ,EAA6B;AACzB,WAAKuL,kBAAL,GAA0BjG,IAAI,CAACqE,IAAL,CAAU,gBAAV,CAA1B;AACArE,MAAAA,IAAI,CAACqE,IAAL,CAAU;AACN,0BAAkB,MADZ;AAEN6B,QAAAA,MAAM,EAAEF,QAAQ,CAACG,kBAAT,GAA8BtK;AAFhC,OAAV;AAIH,KAND,MAMO;AACH,UAAI,WAAWmE,IAAI,CAACqE,IAAL,CAAU,gBAAV,CAAf,EAA4C;AACxCrE,QAAAA,IAAI,CAACqE,IAAL,CAAU;AACN,4BAAkB,CAAC,GAAGrL,KAAK,CAACmF,SAAV,EAAqB,KAAK8H,kBAA1B,IAAgD,KAAKA,kBAArD,GAA0E,IADtF;AAENC,UAAAA,MAAM,EAAE;AAFF,SAAV;AAIH;AACJ;AACJ,GAtOgF;AAuOjFtG,EAAAA,sBAAsB,EAAE,CAAC,UAAD,CAvOyD;AAwOjFE,EAAAA,aAAa,EAAE,YAAW;AACtB,QAAIjB,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACuH,OAAL,GAAevH,IAAI,CAACwH,gBAAL,EAAf;AACAxH,IAAAA,IAAI,CAACnG,SAAL,GAAiB,IAAIe,UAAU,CAAC6M,QAAf,CAAwB;AACrCC,MAAAA,QAAQ,EAAE1H,IAAI,CAAC2H,gBAAL,GAAwB,GAAxB,GAA8B3H,IAAI,CAAC4H,UADR;AAErCC,MAAAA,YAAY,EAAE7H,IAAI,CAACnE,MAAL,CAAY,cAAZ,CAFuB;AAGrCiM,MAAAA,SAAS,EAAE9H,IAAI,CAACC,SAAL,CAAe,CAAf;AAH0B,KAAxB,CAAjB;;AAKAD,IAAAA,IAAI,CAACnG,SAAL,CAAekO,MAAf,CAAsB/H,IAAI,CAACuH,OAAL,CAAapL,KAAnC,EAA0C6D,IAAI,CAACuH,OAAL,CAAanL,MAAvD;AACH,GAjPgF;AAkPjF4L,EAAAA,gBAAgB,EAAE,YAAW;AACzB,SAAKnO,SAAL,CAAeqJ,OAAf;AACH,GApPgF;AAqPjF+E,EAAAA,oBAAoB,EAAEjO,OAAO,CAAC6E,IArPmD;AAsPjFqJ,EAAAA,MAAM,EAAE,YAAW;AACf,SAAKpH,cAAL,CAAoB,CAAC,gBAAD,CAApB;;AACA,QAAIqH,OAAO,GAAG,KAAK1G,UAAL,EAAd;;AACA,SAAKD,gCAAL,CAAsC2G,OAAtC;;AACA,KAACA,OAAD,IAAY,KAAKC,oBAAL,EAAZ;AACH,GA3PgF;AA4PjF5G,EAAAA,gCAAgC,EAAE,UAAS6G,SAAT,EAAoB;AAClD,QAAIC,QAAQ,GAAG,CAAC,GAAGzO,SAAS,CAACD,OAAd,EAAuB,KAAKC,SAAL,CAAesH,IAAf,CAAoBvD,OAA3C,EAAoD2K,OAApD,EAAf;AACA,QAAIC,YAAY,GAAG,oBAAnB;;AACA,QAAI,cAAc1N,QAAQ,CAAClB,OAAT,CAAiB6O,IAAjB,GAAwBC,QAA1C,EAAoD;AAChDJ,MAAAA,QAAQ,GAAGA,QAAQ,CAAClF,GAAT,CAAa,CAAC,GAAGnJ,OAAO,CAAC0O,SAAZ,GAAb,CAAX;AACH;;AACD,SAAKC,kCAAL,GAA0C,KAAKA,kCAAL,IAA2C,YAAW;AAC5F,WAAKR,oBAAL;AACH,KAFoF,CAEnFS,IAFmF,CAE9E,IAF8E,CAArF;;AAGA9N,IAAAA,cAAc,CAACnB,OAAf,CAAuBkP,GAAvB,CAA2B,CAAC,GAAGjP,SAAS,CAACD,OAAd,IAAyBwJ,GAAzB,CAA6B,KAAK2F,iBAAlC,CAA3B,EAAiFP,YAAjF,EAA+F,KAAKI,kCAApG;;AACA,QAAIP,SAAJ,EAAe;AACXtN,MAAAA,cAAc,CAACnB,OAAf,CAAuBoP,EAAvB,CAA0BV,QAA1B,EAAoCE,YAApC,EAAkD,KAAKI,kCAAvD;;AACA,WAAKG,iBAAL,GAAyBT,QAAzB;AACH;AACJ,GA1QgF;AA2QjFF,EAAAA,oBAAoB,EAAEpO,OAAO,CAAC6E,IA3QmD;AA4QjFoK,EAAAA,QAAQ,EAAE,YAAW;AACjB,QAAIjJ,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAClC,QAAL,CAAchB,KAAd,CAAoBkD,IAApB,EAA0BI,SAA1B;;AACAJ,IAAAA,IAAI,CAACwB,gCAAL,CAAsC,KAAtC;;AACAxB,IAAAA,IAAI,CAACkJ,oBAAL;;AACAlJ,IAAAA,IAAI,CAACnF,OAAL,CAAaqI,OAAb;;AACAlD,IAAAA,IAAI,CAAC8B,aAAL,CAAmBoB,OAAnB;;AACAlD,IAAAA,IAAI,CAACmJ,YAAL;;AACAnJ,IAAAA,IAAI,CAAC+C,eAAL;;AACA/C,IAAAA,IAAI,CAACgI,gBAAL;;AACAhI,IAAAA,IAAI,CAACW,aAAL,CAAmBuC,OAAnB;;AACAlD,IAAAA,IAAI,CAACW,aAAL,GAAqBX,IAAI,CAACnG,SAAL,GAAiBmG,IAAI,CAAC8B,aAAL,GAAqB,IAA3D;AACH,GAxRgF;AAyRjFJ,EAAAA,iBAAiB,EAAE,YAAW;AAC1B,QAAI1B,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAAC8B,aAAL,GAAqB,CAAC,GAAG7G,YAAY,CAACmO,kBAAjB,EAAqCpJ,IAAI,CAACR,UAA1C,EAAsD,UAASE,IAAT,EAAe;AACtF,aAAOM,IAAI,CAACqJ,qBAAL,CAA2B3J,IAA3B,CAAP;AACH,KAFoB,CAArB;AAGH,GA9RgF;AA+RjF8H,EAAAA,gBAAgB,EAAE,YAAW;AACzB,QAAIxH,IAAI,GAAG,IAAX;AACA,QAAIsJ,IAAI,GAAGtJ,IAAI,CAACnE,MAAL,CAAY,MAAZ,KAAuB,EAAlC;AACA,QAAI0N,MAAM,GAAGvJ,IAAI,CAACnE,MAAL,CAAY,QAAZ,KAAyB,EAAtC;AACA,QAAI2N,aAAa,GAAGxJ,IAAI,CAAC9B,eAAL,MAA0B,EAA9C;;AACA,QAAIuL,aAAa,GAAG,UAASH,IAAT,EAAeI,IAAf,EAAqB;AACrC,UAAIrK,WAAW,CAACiK,IAAI,CAACI,IAAD,CAAL,CAAX,IAA2B,CAAC,CAAC,GAAGzP,OAAO,CAACmF,SAAZ,GAAhC,EAA0D;AACtD,eAAO,CAAP;AACH;;AACD,UAAIuK,WAAW,GAAG3J,IAAI,CAACC,SAAL,CAAeyJ,IAAf,GAAlB;;AACA,aAAOC,WAAW,IAAI,CAAf,GAAmB,CAAnB,GAAuBA,WAA9B;AACH,KAND;;AAOA,QAAIC,YAAY,GAAGH,aAAa,CAACH,IAAD,EAAO,OAAP,CAAhC;AACA,QAAIO,aAAa,GAAGJ,aAAa,CAACH,IAAD,EAAO,QAAP,CAAjC;AACA,QAAIQ,MAAM,GAAG;AACT3N,MAAAA,KAAK,EAAEmN,IAAI,CAACnN,KAAL,IAAc,CAAd,GAAkB,CAAlB,GAAsBf,MAAM,CAAC+B,iBAAiB,CAAC,CAACmM,IAAI,CAACnN,KAAN,EAAayN,YAAb,EAA2BJ,aAAa,CAACrN,KAAzC,CAAD,CAAlB,CAD1B;AAETC,MAAAA,MAAM,EAAEkN,IAAI,CAAClN,MAAL,IAAe,CAAf,GAAmB,CAAnB,GAAuBhB,MAAM,CAAC+B,iBAAiB,CAAC,CAACmM,IAAI,CAAClN,MAAN,EAAcyN,aAAd,EAA6BL,aAAa,CAACpN,MAA3C,CAAD,CAAlB,CAF5B;AAGTC,MAAAA,IAAI,EAAEc,iBAAiB,CAAC,CAACoM,MAAM,CAAClN,IAAR,EAAcmN,aAAa,CAACnN,IAA5B,CAAD,CAHd;AAITC,MAAAA,GAAG,EAAEa,iBAAiB,CAAC,CAACoM,MAAM,CAACjN,GAAR,EAAakN,aAAa,CAAClN,GAA3B,CAAD,CAJb;AAKTC,MAAAA,KAAK,EAAEY,iBAAiB,CAAC,CAACoM,MAAM,CAAChN,KAAR,EAAeiN,aAAa,CAACjN,KAA7B,CAAD,CALf;AAMTC,MAAAA,MAAM,EAAEW,iBAAiB,CAAC,CAACoM,MAAM,CAAC/M,MAAR,EAAgBgN,aAAa,CAAChN,MAA9B,CAAD;AANhB,KAAb;;AAQA,QAAIsN,MAAM,CAAC3N,KAAP,GAAe2N,MAAM,CAACzN,IAAtB,GAA6ByN,MAAM,CAACvN,KAApC,IAA6C,CAA7C,IAAkDuN,MAAM,CAAC1N,MAAP,GAAgB0N,MAAM,CAACxN,GAAvB,GAA6BwN,MAAM,CAACtN,MAApC,IAA8C,CAApG,EAAuG;AACnGsN,MAAAA,MAAM,GAAG;AACL3N,QAAAA,KAAK,EAAE,CADF;AAELC,QAAAA,MAAM,EAAE;AAFH,OAAT;AAIH;;AACD,WAAO0N,MAAP;AACH,GA5TgF;AA6TjF/C,EAAAA,WAAW,EAAE,YAAW;AACpB,QAAI/G,IAAI,GAAG,IAAX;;AACA,QAAI8J,MAAM,GAAG9J,IAAI,CAACwH,gBAAL,EAAb;;AACAxH,IAAAA,IAAI,CAACnG,SAAL,CAAekQ,YAAf;;AACA,QAAI/N,oBAAoB,CAACgE,IAAI,CAACuH,OAAN,EAAeuC,MAAf,CAApB,IAA8C9J,IAAI,CAACgK,aAAvD,EAAsE;AAClEhK,MAAAA,IAAI,CAACuH,OAAL,GAAeuC,MAAf;;AACA9J,MAAAA,IAAI,CAACiK,6BAAL,CAAmC,IAAnC;;AACAjK,MAAAA,IAAI,CAACnG,SAAL,CAAekO,MAAf,CAAsB+B,MAAM,CAAC3N,KAA7B,EAAoC2N,MAAM,CAAC1N,MAA3C;;AACA4D,MAAAA,IAAI,CAACkC,OAAL,CAAa,CAAC,QAAD,CAAb;AACH;AACJ,GAvUgF;AAwUjF+H,EAAAA,6BAA6B,EAAEjQ,OAAO,CAAC6E,IAxU0C;AAyUjFqL,EAAAA,WAAW,EAAE,YAAW;AACpB,WAAO,CAAC,CAAD,EAAI,CAAJ,CAAP;AACH,GA3UgF;AA4UjFC,EAAAA,iBAAiB,EAAEnQ,OAAO,CAAC6E,IA5UsD;AA6UjFoI,EAAAA,eAAe,EAAE,YAAW;AACxB,QAAI6C,MAAM,GAAG,KAAKvC,OAAlB;AACA,QAAI6C,MAAM,GAAG,KAAKvP,OAAlB;AACA,QAAIwP,IAAI,GAAGP,MAAM,CAAC3N,KAAP,GAAe,CAAf,IAAoB2N,MAAM,CAAC1N,MAAP,GAAgB,CAApC,GAAwC,CAAC0N,MAAM,CAACzN,IAAR,EAAcyN,MAAM,CAACxN,GAArB,EAA0BwN,MAAM,CAAC3N,KAAP,GAAe2N,MAAM,CAACvN,KAAhD,EAAuDuN,MAAM,CAAC1N,MAAP,GAAgB0N,MAAM,CAACtN,MAA9E,CAAxC,GAAgI,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAA3I;AACA6N,IAAAA,IAAI,GAAGD,MAAM,CAACE,OAAP,CAAeD,IAAf,EAAqB,KAAKH,WAAL,EAArB,CAAP;AACA,QAAIK,QAAQ,GAAG,KAAKC,UAAL,CAAgBH,IAAhB,KAAyBA,IAAxC;AACAD,IAAAA,MAAM,CAACK,QAAP,CAAgBF,QAAhB,EAA0B,KAAKJ,iBAAL,MAA4BI,QAAtD;AACH,GApVgF;AAqVjFG,EAAAA,UAAU,EAAE,UAAShL,IAAT,EAAeiL,QAAf,EAAyB;AACjC,QAAIC,KAAK,GAAG,KAAKjK,aAAL,CAAmBiK,KAAnB,CAAyBlL,IAAzB,CAAZ;;AACA,QAAI7D,MAAM,GAAG,KAAKA,MAAL,CAAY6D,IAAZ,CAAb;AACA,WAAOiL,QAAQ,GAAG,KAAK,CAAL,KAAW9O,MAAX,GAAoBA,MAApB,GAA6B+O,KAAhC,GAAwC,CAAC,GAAGtQ,OAAO,CAACuF,MAAZ,EAAoB,IAApB,EAA0B,EAA1B,EAA8B+K,KAA9B,EAAqC/O,MAArC,CAAvD;AACH,GAzVgF;AA0VjF+K,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,QAAI5G,IAAI,GAAG,IAAX;AACA,QAAI6K,cAAc,GAAG,CAAC,GAAGnQ,MAAM,CAACoQ,WAAX,EAAwB,KAAKJ,UAAL,CAAgB,gBAAhB,EAAkC,IAAlC,CAAxB,EAAiE,IAAjE,CAArB;;AACA,QAAI1K,IAAI,CAAC+K,cAAT,EAAyB;AACrB/K,MAAAA,IAAI,CAACkJ,oBAAL;AACH;;AACDlJ,IAAAA,IAAI,CAAC+K,cAAL,GAAsB,CAAC,GAAG9P,YAAY,CAAC+P,mBAAjB,EAAsC,YAAW;AACnE,UAAIH,cAAJ,EAAoB;AAChB7K,QAAAA,IAAI,CAACc,cAAL,CAAoB,CAAC,gBAAD,CAApB;AACH,OAFD,MAEO;AACHd,QAAAA,IAAI,CAACnG,SAAL,CAAekQ,YAAf;AACH;AACJ,KANqB,CAAtB;;AAOA1P,IAAAA,iBAAiB,CAACT,OAAlB,CAA0BwJ,GAA1B,CAA8BpD,IAAI,CAAC+K,cAAnC;AACH,GAxWgF;AAyWjF7B,EAAAA,oBAAoB,EAAE,YAAW;AAC7B,QAAI,KAAK6B,cAAT,EAAyB;AACrB1Q,MAAAA,iBAAiB,CAACT,OAAlB,CAA0BuG,MAA1B,CAAiC,KAAK4K,cAAtC;;AACA,WAAKA,cAAL,CAAoB7H,OAApB;;AACA,WAAK6H,cAAL,GAAsB,IAAtB;AACH;AACJ,GA/WgF;AAgXjFE,EAAAA,cAAc,EAAEjR,OAAO,CAAC6E,IAhXyD;AAiXjF6G,EAAAA,WAAW,EAAE,YAAW;AACpB,QAAI1F,IAAI,GAAG,IAAX;;AACA,QAAIA,IAAI,CAACkL,YAAL,IAAqBlL,IAAI,CAACmL,gBAAL,EAAzB,EAAkD;AAC9CnL,MAAAA,IAAI,CAACiL,cAAL;;AACAjL,MAAAA,IAAI,CAACU,eAAL;AACH;;AACDV,IAAAA,IAAI,CAAClC,QAAL,CAAchB,KAAd,CAAoBkD,IAApB,EAA0BI,SAA1B;AACA,WAAOJ,IAAP;AACH,GAzXgF;AA0XjF4F,EAAAA,SAAS,EAAE,YAAW;AAClB,SAAK9H,QAAL;AACA,SAAKqN,gBAAL,MAA2B,KAAK9H,cAAL,EAA3B;AACA,WAAO,IAAP;AACH,GA9XgF;AA+XjFxH,EAAAA,MAAM,EAAE,UAAS6D,IAAT,EAAe;AACnB,QAAIM,IAAI,GAAG,IAAX;;AACA,QAAIA,IAAI,CAACkL,YAAL,IAAqBlL,IAAI,CAACuD,gBAA1B,KAA+CnD,SAAS,CAAC4F,MAAV,GAAmB,CAAnB,IAAwB,CAAC,GAAG7L,KAAK,CAACiR,QAAV,EAAoB1L,IAApB,CAAvE,CAAJ,EAAuG;AACnGM,MAAAA,IAAI,CAAC4D,aAAL,GAAqB5D,IAAI,CAAC4D,aAAL,IAAsB,EAA3C;;AACA5D,MAAAA,IAAI,CAAC4D,aAAL,CAAmByB,IAAnB,CAAwBrF,IAAI,CAACqL,qBAAL,CAA2BjL,SAA3B,CAAxB;AACH,KAHD,MAGO;AACH,aAAOzE,OAAO,CAACmB,KAAR,CAAckD,IAAd,EAAoBI,SAApB,CAAP;AACH;AACJ,GAvYgF;AAwYjFiL,EAAAA,qBAAqB,EAAE,UAASnO,IAAT,EAAe;AAClC,QAAI8C,IAAI,GAAG,IAAX;AACA,WAAO,YAAW;AACdrE,MAAAA,OAAO,CAACmB,KAAR,CAAckD,IAAd,EAAoB9C,IAApB;AACH,KAFD;AAGH,GA7YgF;AA8YjFoO,EAAAA,MAAM,EAAEtR,OAAO,CAAC6E,IA9YiE;AA+YjF0M,EAAAA,OAAO,EAAEvR,OAAO,CAAC6E,IA/YgE;AAgZjF2M,EAAAA,cAAc,EAAE,UAASC,GAAT,EAAc;AAC1B,QAAIzL,IAAI,GAAG,IAAX;;AACA,QAAIA,IAAI,CAACM,oBAAT,EAA+B;AAC3B;AACH;;AACD,QAAIoL,cAAc,GAAG1L,IAAI,CAAC2L,2BAAL,CAAiCF,GAAjC,CAArB;AACA,QAAIhL,OAAO,GAAG,EAAd;;AACA,QAAIiL,cAAc,CAAC1F,MAAf,GAAwB,CAA5B,EAA+B;AAC3B0F,MAAAA,cAAc,CAACzM,OAAf,CAAuB,UAAS2M,EAAT,EAAa;AAChC,eAAOnL,OAAO,CAAC4E,IAAR,CAAarF,IAAI,CAAC6L,wBAAL,CAA8BD,EAA9B,CAAb,CAAP;AACH,OAFD;AAGH,KAJD,MAIO;AACHnL,MAAAA,OAAO,CAAC4E,IAAR,CAAarF,IAAI,CAAC8L,iBAAL,CAAuBL,GAAG,CAAC/L,IAA3B,CAAb;AACH;;AACDe,IAAAA,OAAO,GAAGA,OAAO,CAAC4G,MAAR,CAAe,UAASnI,CAAT,EAAY;AACjC,aAAO,CAAC,CAACA,CAAT;AACH,KAFS,CAAV;;AAGA,QAAIc,IAAI,CAAC8B,aAAL,CAAmBiK,MAAnB,CAA0BN,GAAG,CAAC/L,IAA9B,CAAJ,EAAyC;AACrCM,MAAAA,IAAI,CAACkC,OAAL,CAAa,CAAC,QAAD,CAAb;AACH,KAFD,MAEO;AACH,UAAIzB,OAAO,CAACuF,MAAR,GAAiB,CAArB,EAAwB;AACpBhG,QAAAA,IAAI,CAACkC,OAAL,CAAazB,OAAb;AACH,OAFD,MAEO;AACHT,QAAAA,IAAI,CAAClC,QAAL,CAAchB,KAAd,CAAoBkD,IAApB,EAA0BI,SAA1B;AACH;AACJ;AACJ,GA1agF;AA2ajF4D,EAAAA,OAAO,EAAEhK,OAAO,CAAC6E,IA3agE;AA4ajFiN,EAAAA,iBAAiB,EAAE;AACfxC,IAAAA,IAAI,EAAE,gBADS;AAEfC,IAAAA,MAAM,EAAE,gBAFO;AAGfsB,IAAAA,cAAc,EAAE,gBAHD;AAIfD,IAAAA,KAAK,EAAE,OAJQ;AAKfoB,IAAAA,UAAU,EAAE,OALG;AAMfC,IAAAA,UAAU,EAAE,OANG;AAOfC,IAAAA,WAAW,EAAE,cAPE;AAQfC,IAAAA,QAAQ,EAAE;AARK,GA5a8D;AAsbjFN,EAAAA,wBAAwB,EAAE,EAtbuD;AAubjFO,EAAAA,yBAAyB,EAAE,EAvbsD;AAwbjFT,EAAAA,2BAA2B,EAAE,UAASU,aAAT,EAAwB;AACjD,QAAIrM,IAAI,GAAG,IAAX;AACA,QAAIsM,QAAQ,GAAGD,aAAa,CAACC,QAA7B;AACA,QAAIC,QAAQ,GAAGD,QAAQ,CAACE,KAAT,CAAe,KAAf,CAAf;AACA,QAAI9M,IAAI,GAAG2M,aAAa,CAAC3M,IAAzB;AACA,QAAInC,KAAK,GAAG8O,aAAa,CAAC9O,KAA1B;AACA,QAAIM,OAAO,GAAG,KAAKuO,yBAAL,CAA+B1M,IAA/B,CAAd;AACA,QAAI+M,wBAAwB,GAAG,EAA/B;;AACA,QAAI5O,OAAJ,EAAa;AACT,UAAI,SAASA,OAAb,EAAsB;AAClB4O,QAAAA,wBAAwB,CAACpH,IAAzB,CAA8B3F,IAA9B;AACH,OAFD,MAEO;AACH7B,QAAAA,OAAO,CAACoB,OAAR,CAAgB,UAASyN,EAAT,EAAa;AACzBJ,UAAAA,QAAQ,CAACK,OAAT,CAAiBD,EAAjB,KAAwB,CAAxB,IAA6BD,wBAAwB,CAACpH,IAAzB,CAA8BqH,EAA9B,CAA7B;AACH,SAFD;;AAGA,YAAI,MAAMH,QAAQ,CAACvG,MAAnB,EAA2B;AACvB,cAAI,aAAa,CAAC,GAAG7L,KAAK,CAACyS,IAAV,EAAgBrP,KAAhB,CAAjB,EAAyC;AACrCyC,YAAAA,IAAI,CAAC6M,+BAAL,CAAqCtP,KAArC,EAA4CM,OAA5C,EAAqD4O,wBAArD;AACH,WAFD,MAEO;AACH,gBAAI,YAAY,CAAC,GAAGtS,KAAK,CAACyS,IAAV,EAAgBrP,KAAhB,CAAhB,EAAwC;AACpC,kBAAIA,KAAK,CAACyI,MAAN,GAAe,CAAf,IAAoBzI,KAAK,CAACuP,KAAN,CAAY,UAASC,IAAT,EAAe;AAC3C,uBAAO/M,IAAI,CAACgN,6BAAL,CAAmCD,IAAnC,EAAyClP,OAAzC,CAAP;AACH,eAFmB,CAAxB,EAEQ;AACJN,gBAAAA,KAAK,CAAC0B,OAAN,CAAc,UAAS8N,IAAT,EAAe;AACzB,yBAAO/M,IAAI,CAAC6M,+BAAL,CAAqCE,IAArC,EAA2ClP,OAA3C,EAAoD4O,wBAApD,CAAP;AACH,iBAFD;AAGH;AACJ;AACJ;AACJ;AACJ;AACJ;;AACD,WAAOA,wBAAwB,CAACpF,MAAzB,CAAgC,UAAS9J,KAAT,EAAgB0P,KAAhB,EAAuBC,IAAvB,EAA6B;AAChE,aAAOA,IAAI,CAACP,OAAL,CAAapP,KAAb,MAAwB0P,KAA/B;AACH,KAFM,CAAP;AAGH,GA3dgF;AA4djFD,EAAAA,6BAA6B,EAAE,UAASG,YAAT,EAAuBtP,OAAvB,EAAgC;AAC3D,WAAO,CAACuP,MAAM,CAACC,IAAP,CAAYF,YAAZ,EAA0BG,IAA1B,CAA+B,UAASC,GAAT,EAAc;AACjD,aAAO1P,OAAO,CAAC8O,OAAR,CAAgBY,GAAhB,MAAyB,CAAC,CAAjC;AACH,KAFO,CAAR;AAGH,GAhegF;AAiejFV,EAAAA,+BAA+B,EAAE,UAASM,YAAT,EAAuBtP,OAAvB,EAAgC4O,wBAAhC,EAA0D;AACvF,QAAIe,UAAU,GAAGJ,MAAM,CAACC,IAAP,CAAYF,YAAZ,CAAjB;;AACA,QAAI,KAAKH,6BAAL,CAAmCG,YAAnC,EAAiDtP,OAAjD,CAAJ,EAA+D;AAC3D2P,MAAAA,UAAU,CAACvO,OAAX,CAAmB,UAASsO,GAAT,EAAc;AAC7B,eAAO1P,OAAO,CAAC8O,OAAR,CAAgBY,GAAhB,IAAuB,CAAC,CAAxB,IAA6Bd,wBAAwB,CAACpH,IAAzB,CAA8BkI,GAA9B,CAApC;AACH,OAFD;AAGH;AACJ,GAxegF;AAyejFE,EAAAA,kBAAkB,EAAE,YAAW;AAC3B,SAAKvF,MAAL;AACH,GA3egF;AA4ejF1B,EAAAA,eAAe,EAAE,YAAW;AACxB,SAAK7F,aAAL,CAAmB+M,QAAnB,CAA4B,KAAK7R,MAAL,CAAY,OAAZ,CAA5B,EAAkD,KAAKA,MAAL,CAAYJ,kBAAZ,CAAlD;AACH,GA9egF;AA+ejFkS,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,WAAO;AACHC,MAAAA,GAAG,EAAE,KAAK/R,MAAL,CAAYJ,kBAAZ,CADF;AAEHwQ,MAAAA,UAAU,EAAE,KAAKpQ,MAAL,CAAY,YAAZ,CAFT;AAGHgS,MAAAA,SAAS,EAAE,KAAK5F,oBAAL;AAHR,KAAP;AAKH,GArfgF;AAsfjFvB,EAAAA,mBAAmB,EAAE,YAAW;AAC5B,SAAK7M,SAAL,CAAeiU,UAAf,CAA0B,KAAKH,mBAAL,EAA1B;AACH,GAxfgF;AAyfjFI,EAAAA,GAAG,EAAE,YAAW;AACZ,WAAO,KAAKlU,SAAL,CAAekU,GAAf,EAAP;AACH,GA3fgF;AA4fjFC,EAAAA,OAAO,EAAE,YAAW;AAChB,QAAIlE,MAAM,GAAG,KAAKvC,OAAL,IAAgB,EAA7B;AACA,WAAO;AACHpL,MAAAA,KAAK,EAAE2N,MAAM,CAAC3N,KADX;AAEHC,MAAAA,MAAM,EAAE0N,MAAM,CAAC1N;AAFZ,KAAP;AAIH,GAlgBgF;AAmgBjF6R,EAAAA,OAAO,EAAElS,QAngBwE;AAogBjFmS,EAAAA,YAAY,EAAEpS,OApgBmE;AAqgBjFqS,EAAAA,aAAa,EAAE,YAAW;AACtB,SAAKF,OAAL,GAAelS,QAAf;AACH,GAvgBgF;AAwgBjFqS,EAAAA,MAAM,EAAE,YAAW;AACf,QAAIpO,IAAI,GAAG,IAAX;AACAA,IAAAA,IAAI,CAACiO,OAAL,GAAelS,QAAf;;AACA,QAAIiE,IAAI,CAACkO,YAAL,EAAJ,EAAyB;AACrBlO,MAAAA,IAAI,CAACnG,SAAL,CAAewU,cAAf,CAA8B,YAAW;AACrCrO,QAAAA,IAAI,CAACiO,OAAL,GAAenS,OAAf;AACH,OAFD;AAGH;;AACDkE,IAAAA,IAAI,CAAC8B,aAAL,CAAmB,OAAnB,EAA4B,EAA5B;AACH;AAjhBgF,CAA/B,CAAtD;AAmhBA,IAAIwM,QAAQ,GAAG/O,UAAf;AACA5F,OAAO,CAACC,OAAR,GAAkB0U,QAAlB;AACA,CAAC,GAAG7T,QAAQ,CAAC8T,cAAb,EAA6BhP,UAA7B;AACAiP,MAAM,CAAC7U,OAAP,GAAiBA,OAAO,CAACC,OAAzB","sourcesContent":["/**\r\n * DevExtreme (viz/core/base_widget.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _resize_callbacks = _interopRequireDefault(require(\"../../core/utils/resize_callbacks\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _base_theme_manager = require(\"../core/base_theme_manager\");\r\nvar _dom_component = _interopRequireDefault(require(\"../../core/dom_component\"));\r\nvar _helpers = require(\"./helpers\");\r\nvar _utils = require(\"./utils\");\r\nvar _errors_warnings = _interopRequireDefault(require(\"./errors_warnings\"));\r\nvar _renderer2 = require(\"./renderers/renderer\");\r\nvar _layout = _interopRequireDefault(require(\"./layout\"));\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _base_widget = require(\"./base_widget.utils\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar _floor = Math.floor;\r\nvar _log = _errors_warnings.default.log;\r\nvar OPTION_RTL_ENABLED = \"rtlEnabled\";\r\nvar SIZED_ELEMENT_CLASS = \"dx-sized-element\";\r\nvar _option = _dom_component.default.prototype.option;\r\n\r\nfunction getTrue() {\r\n    return true\r\n}\r\n\r\nfunction getFalse() {\r\n    return false\r\n}\r\n\r\nfunction areCanvasesDifferent(canvas1, canvas2) {\r\n    return !(canvas1.width === canvas2.width && canvas1.height === canvas2.height && canvas1.left === canvas2.left && canvas1.top === canvas2.top && canvas1.right === canvas2.right && canvas1.bottom === canvas2.bottom)\r\n}\r\n\r\nfunction defaultOnIncidentOccurred(e) {\r\n    if (!e.component._eventsStrategy.hasEvent(\"incidentOccurred\")) {\r\n        _log.apply(null, [e.target.id].concat(e.target.args || []))\r\n    }\r\n}\r\n\r\nfunction pickPositiveValue(values) {\r\n    return values.reduce(function(result, value) {\r\n        return value > 0 && !result ? value : result\r\n    }, 0)\r\n}\r\nvar getEmptyComponent = function() {\r\n    var emptyComponentConfig = {\r\n        _initTemplates: function() {},\r\n        ctor: function(element, options) {\r\n            this.callBase(element, options);\r\n            var sizedElement = _dom_adapter.default.createElement(\"div\");\r\n            var width = options && (0, _type.isNumeric)(options.width) ? options.width + \"px\" : \"100%\";\r\n            var height = options && (0, _type.isNumeric)(options.height) ? options.height + \"px\" : this._getDefaultSize().height + \"px\";\r\n            _dom_adapter.default.setStyle(sizedElement, \"width\", width);\r\n            _dom_adapter.default.setStyle(sizedElement, \"height\", height);\r\n            _dom_adapter.default.setClass(sizedElement, SIZED_ELEMENT_CLASS);\r\n            _dom_adapter.default.insertElement(element, sizedElement)\r\n        }\r\n    };\r\n    var EmptyComponent = _dom_component.default.inherit(emptyComponentConfig);\r\n    var originalInherit = EmptyComponent.inherit;\r\n    EmptyComponent.inherit = function(config) {\r\n        for (var field in config) {\r\n            if ((0, _type.isFunction)(config[field]) && \"_\" !== field.substr(0, 1) && \"option\" !== field || \"_dispose\" === field || \"_optionChanged\" === field) {\r\n                config[field] = _common.noop\r\n            }\r\n        }\r\n        return originalInherit.call(this, config)\r\n    };\r\n    return EmptyComponent\r\n};\r\n\r\nfunction callForEach(functions) {\r\n    functions.forEach(function(c) {\r\n        return c()\r\n    })\r\n}\r\nvar isServerSide = !(0, _window.hasWindow)();\r\n\r\nfunction sizeIsValid(value) {\r\n    return (0, _type.isDefined)(value) && value > 0\r\n}\r\nvar baseWidget = isServerSide ? getEmptyComponent() : _dom_component.default.inherit({\r\n    _eventsMap: {\r\n        onIncidentOccurred: {\r\n            name: \"incidentOccurred\"\r\n        },\r\n        onDrawn: {\r\n            name: \"drawn\"\r\n        }\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            onIncidentOccurred: defaultOnIncidentOccurred\r\n        })\r\n    },\r\n    _useLinks: true,\r\n    _init: function() {\r\n        var that = this;\r\n        that._$element.children(\".\" + SIZED_ELEMENT_CLASS).remove();\r\n        that.callBase.apply(that, arguments);\r\n        that._changesLocker = 0;\r\n        that._optionChangedLocker = 0;\r\n        that._asyncFirstDrawing = true;\r\n        that._changes = (0, _helpers.changes)();\r\n        that._suspendChanges();\r\n        that._themeManager = that._createThemeManager();\r\n        that._themeManager.setCallback(function() {\r\n            that._requestChange(that._themeDependentChanges)\r\n        });\r\n        that._renderElementAttributes();\r\n        that._initRenderer();\r\n        var linkTarget = that._useLinks && that._renderer.root;\r\n        linkTarget && linkTarget.enableLinks().virtualLink(\"core\").virtualLink(\"peripheral\");\r\n        that._renderVisibilityChange();\r\n        that._attachVisibilityChangeHandlers();\r\n        that._toggleParentsScrollSubscription(this._isVisible());\r\n        that._initEventTrigger();\r\n        that._incidentOccurred = (0, _base_widget.createIncidentOccurred)(that.NAME, that._eventTrigger);\r\n        that._layout = new _layout.default;\r\n        linkTarget && linkTarget.linkAfter(\"core\");\r\n        that._initPlugins();\r\n        that._initCore();\r\n        linkTarget && linkTarget.linkAfter();\r\n        that._change(that._initialChanges)\r\n    },\r\n    _createThemeManager: function() {\r\n        return new _base_theme_manager.BaseThemeManager(this._getThemeManagerOptions())\r\n    },\r\n    _getThemeManagerOptions: function() {\r\n        return {\r\n            themeSection: this._themeSection,\r\n            fontFields: this._fontFields\r\n        }\r\n    },\r\n    _initialChanges: [\"LAYOUT\", \"RESIZE_HANDLER\", \"THEME\", \"DISABLED\"],\r\n    _initPlugins: function() {\r\n        var that = this;\r\n        (0, _iterator.each)(that._plugins, function(_, plugin) {\r\n            plugin.init.call(that)\r\n        })\r\n    },\r\n    _disposePlugins: function() {\r\n        var that = this;\r\n        (0, _iterator.each)(that._plugins.slice().reverse(), function(_, plugin) {\r\n            plugin.dispose.call(that)\r\n        })\r\n    },\r\n    _change: function(codes) {\r\n        this._changes.add(codes)\r\n    },\r\n    _suspendChanges: function() {\r\n        ++this._changesLocker\r\n    },\r\n    _resumeChanges: function() {\r\n        var that = this;\r\n        if (0 === --that._changesLocker && that._changes.count() > 0 && !that._applyingChanges) {\r\n            that._renderer.lock();\r\n            that._applyingChanges = true;\r\n            that._applyChanges();\r\n            that._changes.reset();\r\n            that._applyingChanges = false;\r\n            that._renderer.unlock();\r\n            if (that._optionsQueue) {\r\n                that._applyQueuedOptions()\r\n            }\r\n            that.resolveItemsDeferred(that._legend ? [that._legend] : []);\r\n            that._optionChangedLocker++;\r\n            that._notify();\r\n            that._optionChangedLocker--\r\n        }\r\n    },\r\n    resolveItemsDeferred: function(items) {\r\n        this._resolveDeferred(this._getTemplatesItems(items))\r\n    },\r\n    _collectTemplatesFromItems: function(items) {\r\n        return items.reduce(function(prev, i) {\r\n            return {\r\n                items: prev.items.concat(i.getTemplatesDef()),\r\n                groups: prev.groups.concat(i.getTemplatesGroups())\r\n            }\r\n        }, {\r\n            items: [],\r\n            groups: []\r\n        })\r\n    },\r\n    _getTemplatesItems: function(items) {\r\n        var elements = this._collectTemplatesFromItems(items);\r\n        var extraItems = this._getExtraTemplatesItems();\r\n        return {\r\n            items: extraItems.items.concat(elements.items),\r\n            groups: extraItems.groups.concat(elements.groups),\r\n            launchRequest: [extraItems.launchRequest],\r\n            doneRequest: [extraItems.doneRequest]\r\n        }\r\n    },\r\n    _getExtraTemplatesItems: function() {\r\n        return {\r\n            items: [],\r\n            groups: [],\r\n            launchRequest: function() {},\r\n            doneRequest: function() {}\r\n        }\r\n    },\r\n    _resolveDeferred: function(_ref) {\r\n        var items = _ref.items,\r\n            launchRequest = _ref.launchRequest,\r\n            doneRequest = _ref.doneRequest,\r\n            groups = _ref.groups;\r\n        var that = this;\r\n        that._setGroupsVisibility(groups, \"hidden\");\r\n        if (that._changesApplying) {\r\n            that._changesApplying = false;\r\n            callForEach(doneRequest);\r\n            return\r\n        }\r\n        var syncRendering = true;\r\n        _deferred.when.apply(that, items).done(function() {\r\n            if (syncRendering) {\r\n                that._setGroupsVisibility(groups, \"visible\");\r\n                return\r\n            }\r\n            callForEach(launchRequest);\r\n            that._changesApplying = true;\r\n            var changes = [\"LAYOUT\", \"FULL_RENDER\"];\r\n            if (that._asyncFirstDrawing) {\r\n                changes.push(\"FORCE_FIRST_DRAWING\");\r\n                that._asyncFirstDrawing = false\r\n            } else {\r\n                changes.push(\"FORCE_DRAWING\")\r\n            }\r\n            that._requestChange(changes);\r\n            that._setGroupsVisibility(groups, \"visible\")\r\n        });\r\n        syncRendering = false\r\n    },\r\n    _setGroupsVisibility: function(groups, visibility) {\r\n        groups.forEach(function(g) {\r\n            return g.attr({\r\n                visibility: visibility\r\n            })\r\n        })\r\n    },\r\n    _applyQueuedOptions: function() {\r\n        var that = this;\r\n        var queue = that._optionsQueue;\r\n        that._optionsQueue = null;\r\n        that.beginUpdate();\r\n        (0, _iterator.each)(queue, function(_, action) {\r\n            action()\r\n        });\r\n        that.endUpdate()\r\n    },\r\n    _requestChange: function(codes) {\r\n        this._suspendChanges();\r\n        this._change(codes);\r\n        this._resumeChanges()\r\n    },\r\n    _applyChanges: function() {\r\n        var that = this;\r\n        var changes = that._changes;\r\n        var order = that._totalChangesOrder;\r\n        var i;\r\n        var ii = order.length;\r\n        for (i = 0; i < ii; ++i) {\r\n            if (changes.has(order[i])) {\r\n                that[\"_change_\" + order[i]]()\r\n            }\r\n        }\r\n    },\r\n    _optionChangesOrder: [\"EVENTS\", \"THEME\", \"RENDERER\", \"RESIZE_HANDLER\"],\r\n    _layoutChangesOrder: [\"ELEMENT_ATTR\", \"CONTAINER_SIZE\", \"LAYOUT\"],\r\n    _customChangesOrder: [\"DISABLED\"],\r\n    _change_EVENTS: function() {\r\n        this._eventTrigger.applyChanges()\r\n    },\r\n    _change_THEME: function() {\r\n        this._setThemeAndRtl()\r\n    },\r\n    _change_RENDERER: function() {\r\n        this._setRendererOptions()\r\n    },\r\n    _change_RESIZE_HANDLER: function() {\r\n        this._setupResizeHandler()\r\n    },\r\n    _change_ELEMENT_ATTR: function() {\r\n        this._renderElementAttributes();\r\n        this._change([\"CONTAINER_SIZE\"])\r\n    },\r\n    _change_CONTAINER_SIZE: function() {\r\n        this._updateSize()\r\n    },\r\n    _change_LAYOUT: function() {\r\n        this._setContentSize()\r\n    },\r\n    _change_DISABLED: function() {\r\n        var renderer = this._renderer;\r\n        var root = renderer.root;\r\n        if (this.option(\"disabled\")) {\r\n            this._initDisabledState = root.attr(\"pointer-events\");\r\n            root.attr({\r\n                \"pointer-events\": \"none\",\r\n                filter: renderer.getGrayScaleFilter().id\r\n            })\r\n        } else {\r\n            if (\"none\" === root.attr(\"pointer-events\")) {\r\n                root.attr({\r\n                    \"pointer-events\": (0, _type.isDefined)(this._initDisabledState) ? this._initDisabledState : null,\r\n                    filter: null\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _themeDependentChanges: [\"RENDERER\"],\r\n    _initRenderer: function() {\r\n        var that = this;\r\n        that._canvas = that._calculateCanvas();\r\n        that._renderer = new _renderer2.Renderer({\r\n            cssClass: that._rootClassPrefix + \" \" + that._rootClass,\r\n            pathModified: that.option(\"pathModified\"),\r\n            container: that._$element[0]\r\n        });\r\n        that._renderer.resize(that._canvas.width, that._canvas.height)\r\n    },\r\n    _disposeRenderer: function() {\r\n        this._renderer.dispose()\r\n    },\r\n    _getAnimationOptions: _common.noop,\r\n    render: function() {\r\n        this._requestChange([\"CONTAINER_SIZE\"]);\r\n        var visible = this._isVisible();\r\n        this._toggleParentsScrollSubscription(visible);\r\n        !visible && this._stopCurrentHandling()\r\n    },\r\n    _toggleParentsScrollSubscription: function(subscribe) {\r\n        var $parents = (0, _renderer.default)(this._renderer.root.element).parents();\r\n        var scrollEvents = \"scroll.viz_widgets\";\r\n        if (\"generic\" === _devices.default.real().platform) {\r\n            $parents = $parents.add((0, _window.getWindow)())\r\n        }\r\n        this._proxiedTargetParentsScrollHandler = this._proxiedTargetParentsScrollHandler || function() {\r\n            this._stopCurrentHandling()\r\n        }.bind(this);\r\n        _events_engine.default.off((0, _renderer.default)().add(this._$prevRootParents), scrollEvents, this._proxiedTargetParentsScrollHandler);\r\n        if (subscribe) {\r\n            _events_engine.default.on($parents, scrollEvents, this._proxiedTargetParentsScrollHandler);\r\n            this._$prevRootParents = $parents\r\n        }\r\n    },\r\n    _stopCurrentHandling: _common.noop,\r\n    _dispose: function() {\r\n        var that = this;\r\n        that.callBase.apply(that, arguments);\r\n        that._toggleParentsScrollSubscription(false);\r\n        that._removeResizeHandler();\r\n        that._layout.dispose();\r\n        that._eventTrigger.dispose();\r\n        that._disposeCore();\r\n        that._disposePlugins();\r\n        that._disposeRenderer();\r\n        that._themeManager.dispose();\r\n        that._themeManager = that._renderer = that._eventTrigger = null\r\n    },\r\n    _initEventTrigger: function() {\r\n        var that = this;\r\n        that._eventTrigger = (0, _base_widget.createEventTrigger)(that._eventsMap, function(name) {\r\n            return that._createActionByOption(name)\r\n        })\r\n    },\r\n    _calculateCanvas: function() {\r\n        var that = this;\r\n        var size = that.option(\"size\") || {};\r\n        var margin = that.option(\"margin\") || {};\r\n        var defaultCanvas = that._getDefaultSize() || {};\r\n        var getSizeOfSide = function(size, side) {\r\n            if (sizeIsValid(size[side]) || !(0, _window.hasWindow)()) {\r\n                return 0\r\n            }\r\n            var elementSize = that._$element[side]();\r\n            return elementSize <= 1 ? 0 : elementSize\r\n        };\r\n        var elementWidth = getSizeOfSide(size, \"width\");\r\n        var elementHeight = getSizeOfSide(size, \"height\");\r\n        var canvas = {\r\n            width: size.width <= 0 ? 0 : _floor(pickPositiveValue([size.width, elementWidth, defaultCanvas.width])),\r\n            height: size.height <= 0 ? 0 : _floor(pickPositiveValue([size.height, elementHeight, defaultCanvas.height])),\r\n            left: pickPositiveValue([margin.left, defaultCanvas.left]),\r\n            top: pickPositiveValue([margin.top, defaultCanvas.top]),\r\n            right: pickPositiveValue([margin.right, defaultCanvas.right]),\r\n            bottom: pickPositiveValue([margin.bottom, defaultCanvas.bottom])\r\n        };\r\n        if (canvas.width - canvas.left - canvas.right <= 0 || canvas.height - canvas.top - canvas.bottom <= 0) {\r\n            canvas = {\r\n                width: 0,\r\n                height: 0\r\n            }\r\n        }\r\n        return canvas\r\n    },\r\n    _updateSize: function() {\r\n        var that = this;\r\n        var canvas = that._calculateCanvas();\r\n        that._renderer.fixPlacement();\r\n        if (areCanvasesDifferent(that._canvas, canvas) || that.__forceRender) {\r\n            that._canvas = canvas;\r\n            that._recreateSizeDependentObjects(true);\r\n            that._renderer.resize(canvas.width, canvas.height);\r\n            that._change([\"LAYOUT\"])\r\n        }\r\n    },\r\n    _recreateSizeDependentObjects: _common.noop,\r\n    _getMinSize: function() {\r\n        return [0, 0]\r\n    },\r\n    _getAlignmentRect: _common.noop,\r\n    _setContentSize: function() {\r\n        var canvas = this._canvas;\r\n        var layout = this._layout;\r\n        var rect = canvas.width > 0 && canvas.height > 0 ? [canvas.left, canvas.top, canvas.width - canvas.right, canvas.height - canvas.bottom] : [0, 0, 0, 0];\r\n        rect = layout.forward(rect, this._getMinSize());\r\n        var nextRect = this._applySize(rect) || rect;\r\n        layout.backward(nextRect, this._getAlignmentRect() || nextRect)\r\n    },\r\n    _getOption: function(name, isScalar) {\r\n        var theme = this._themeManager.theme(name);\r\n        var option = this.option(name);\r\n        return isScalar ? void 0 !== option ? option : theme : (0, _extend.extend)(true, {}, theme, option)\r\n    },\r\n    _setupResizeHandler: function() {\r\n        var that = this;\r\n        var redrawOnResize = (0, _utils.parseScalar)(this._getOption(\"redrawOnResize\", true), true);\r\n        if (that._resizeHandler) {\r\n            that._removeResizeHandler()\r\n        }\r\n        that._resizeHandler = (0, _base_widget.createResizeHandler)(function() {\r\n            if (redrawOnResize) {\r\n                that._requestChange([\"CONTAINER_SIZE\"])\r\n            } else {\r\n                that._renderer.fixPlacement()\r\n            }\r\n        });\r\n        _resize_callbacks.default.add(that._resizeHandler)\r\n    },\r\n    _removeResizeHandler: function() {\r\n        if (this._resizeHandler) {\r\n            _resize_callbacks.default.remove(this._resizeHandler);\r\n            this._resizeHandler.dispose();\r\n            this._resizeHandler = null\r\n        }\r\n    },\r\n    _onBeginUpdate: _common.noop,\r\n    beginUpdate: function() {\r\n        var that = this;\r\n        if (that._initialized && that._isUpdateAllowed()) {\r\n            that._onBeginUpdate();\r\n            that._suspendChanges()\r\n        }\r\n        that.callBase.apply(that, arguments);\r\n        return that\r\n    },\r\n    endUpdate: function() {\r\n        this.callBase();\r\n        this._isUpdateAllowed() && this._resumeChanges();\r\n        return this\r\n    },\r\n    option: function(name) {\r\n        var that = this;\r\n        if (that._initialized && that._applyingChanges && (arguments.length > 1 || (0, _type.isObject)(name))) {\r\n            that._optionsQueue = that._optionsQueue || [];\r\n            that._optionsQueue.push(that._getActionForUpdating(arguments))\r\n        } else {\r\n            return _option.apply(that, arguments)\r\n        }\r\n    },\r\n    _getActionForUpdating: function(args) {\r\n        var that = this;\r\n        return function() {\r\n            _option.apply(that, args)\r\n        }\r\n    },\r\n    _clean: _common.noop,\r\n    _render: _common.noop,\r\n    _optionChanged: function(arg) {\r\n        var that = this;\r\n        if (that._optionChangedLocker) {\r\n            return\r\n        }\r\n        var partialChanges = that.getPartialChangeOptionsName(arg);\r\n        var changes = [];\r\n        if (partialChanges.length > 0) {\r\n            partialChanges.forEach(function(pc) {\r\n                return changes.push(that._partialOptionChangesMap[pc])\r\n            })\r\n        } else {\r\n            changes.push(that._optionChangesMap[arg.name])\r\n        }\r\n        changes = changes.filter(function(c) {\r\n            return !!c\r\n        });\r\n        if (that._eventTrigger.change(arg.name)) {\r\n            that._change([\"EVENTS\"])\r\n        } else {\r\n            if (changes.length > 0) {\r\n                that._change(changes)\r\n            } else {\r\n                that.callBase.apply(that, arguments)\r\n            }\r\n        }\r\n    },\r\n    _notify: _common.noop,\r\n    _optionChangesMap: {\r\n        size: \"CONTAINER_SIZE\",\r\n        margin: \"CONTAINER_SIZE\",\r\n        redrawOnResize: \"RESIZE_HANDLER\",\r\n        theme: \"THEME\",\r\n        rtlEnabled: \"THEME\",\r\n        encodeHtml: \"THEME\",\r\n        elementAttr: \"ELEMENT_ATTR\",\r\n        disabled: \"DISABLED\"\r\n    },\r\n    _partialOptionChangesMap: {},\r\n    _partialOptionChangesPath: {},\r\n    getPartialChangeOptionsName: function(changedOption) {\r\n        var that = this;\r\n        var fullName = changedOption.fullName;\r\n        var sections = fullName.split(/[.]/);\r\n        var name = changedOption.name;\r\n        var value = changedOption.value;\r\n        var options = this._partialOptionChangesPath[name];\r\n        var partialChangeOptionsName = [];\r\n        if (options) {\r\n            if (true === options) {\r\n                partialChangeOptionsName.push(name)\r\n            } else {\r\n                options.forEach(function(op) {\r\n                    fullName.indexOf(op) >= 0 && partialChangeOptionsName.push(op)\r\n                });\r\n                if (1 === sections.length) {\r\n                    if (\"object\" === (0, _type.type)(value)) {\r\n                        that._addOptionsNameForPartialUpdate(value, options, partialChangeOptionsName)\r\n                    } else {\r\n                        if (\"array\" === (0, _type.type)(value)) {\r\n                            if (value.length > 0 && value.every(function(item) {\r\n                                    return that._checkOptionsForPartialUpdate(item, options)\r\n                                })) {\r\n                                value.forEach(function(item) {\r\n                                    return that._addOptionsNameForPartialUpdate(item, options, partialChangeOptionsName)\r\n                                })\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return partialChangeOptionsName.filter(function(value, index, self) {\r\n            return self.indexOf(value) === index\r\n        })\r\n    },\r\n    _checkOptionsForPartialUpdate: function(optionObject, options) {\r\n        return !Object.keys(optionObject).some(function(key) {\r\n            return options.indexOf(key) === -1\r\n        })\r\n    },\r\n    _addOptionsNameForPartialUpdate: function(optionObject, options, partialChangeOptionsName) {\r\n        var optionKeys = Object.keys(optionObject);\r\n        if (this._checkOptionsForPartialUpdate(optionObject, options)) {\r\n            optionKeys.forEach(function(key) {\r\n                return options.indexOf(key) > -1 && partialChangeOptionsName.push(key)\r\n            })\r\n        }\r\n    },\r\n    _visibilityChanged: function() {\r\n        this.render()\r\n    },\r\n    _setThemeAndRtl: function() {\r\n        this._themeManager.setTheme(this.option(\"theme\"), this.option(OPTION_RTL_ENABLED))\r\n    },\r\n    _getRendererOptions: function() {\r\n        return {\r\n            rtl: this.option(OPTION_RTL_ENABLED),\r\n            encodeHtml: this.option(\"encodeHtml\"),\r\n            animation: this._getAnimationOptions()\r\n        }\r\n    },\r\n    _setRendererOptions: function() {\r\n        this._renderer.setOptions(this._getRendererOptions())\r\n    },\r\n    svg: function() {\r\n        return this._renderer.svg()\r\n    },\r\n    getSize: function() {\r\n        var canvas = this._canvas || {};\r\n        return {\r\n            width: canvas.width,\r\n            height: canvas.height\r\n        }\r\n    },\r\n    isReady: getFalse,\r\n    _dataIsReady: getTrue,\r\n    _resetIsReady: function() {\r\n        this.isReady = getFalse\r\n    },\r\n    _drawn: function() {\r\n        var that = this;\r\n        that.isReady = getFalse;\r\n        if (that._dataIsReady()) {\r\n            that._renderer.onEndAnimation(function() {\r\n                that.isReady = getTrue\r\n            })\r\n        }\r\n        that._eventTrigger(\"drawn\", {})\r\n    }\r\n});\r\nvar _default = baseWidget;\r\nexports.default = _default;\r\n(0, _helpers.replaceInherit)(baseWidget);\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}