{"ast":null,"code":"/**\r\n * DevExtreme (core/template_manager.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.TemplateManager = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"./renderer\"));\n\nvar _type = require(\"./utils/type\");\n\nvar _common = require(\"./utils/common\");\n\nvar _extend = require(\"./utils/extend\");\n\nvar _function_template = require(\"./templates/function_template\");\n\nvar _empty_template = require(\"./templates/empty_template\");\n\nvar _template_manager = require(\"./utils/template_manager\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n\n    if (\"value\" in descriptor) {\n      descriptor.writable = true;\n    }\n\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) {\n    _defineProperties(Constructor.prototype, protoProps);\n  }\n\n  if (staticProps) {\n    _defineProperties(Constructor, staticProps);\n  }\n\n  return Constructor;\n}\n\nvar TEXT_NODE = 3;\nvar ANONYMOUS_TEMPLATE_NAME = \"template\";\nvar TEMPLATE_OPTIONS_NAME = \"dxTemplate\";\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar DX_POLYMORPH_WIDGET_TEMPLATE = new _function_template.FunctionTemplate(function (_ref) {\n  var model = _ref.model,\n      parent = _ref.parent;\n  var widgetName = model.widget;\n\n  if (!widgetName) {\n    return (0, _renderer.default)();\n  }\n\n  var widgetElement = (0, _renderer.default)(\"<div>\");\n  var widgetOptions = model.options || {};\n\n  if (parent) {\n    parent._createComponent(widgetElement, widgetName, widgetOptions);\n  } else {\n    widgetElement[widgetName](widgetOptions);\n  }\n\n  return widgetElement;\n});\n\nvar TemplateManager = function () {\n  function TemplateManager(createElement, anonymousTemplateName) {\n    _classCallCheck(this, TemplateManager);\n\n    this._tempTemplates = [];\n    this._defaultTemplates = {};\n    this._anonymousTemplateName = anonymousTemplateName || ANONYMOUS_TEMPLATE_NAME;\n    this._createElement = createElement || _template_manager.defaultCreateElement;\n    this._createTemplateIfNeeded = this._createTemplateIfNeeded.bind(this);\n  }\n\n  _createClass(TemplateManager, [{\n    key: \"addDefaultTemplates\",\n    value: function (templates) {\n      this._defaultTemplates = (0, _extend.extend)({}, this._defaultTemplates, templates);\n    }\n  }, {\n    key: \"dispose\",\n    value: function () {\n      this._tempTemplates.forEach(function (tempTemplate) {\n        tempTemplate.template.dispose && tempTemplate.template.dispose();\n      });\n\n      this._tempTemplates = [];\n    }\n  }, {\n    key: \"extractTemplates\",\n    value: function ($el) {\n      var templates = this._extractTemplates($el);\n\n      var anonymousTemplateMeta = this._extractAnonymousTemplate($el);\n\n      return {\n        templates: templates,\n        anonymousTemplateMeta: anonymousTemplateMeta\n      };\n    }\n  }, {\n    key: \"_extractTemplates\",\n    value: function ($el) {\n      var _this = this;\n\n      var templates = (0, _template_manager.findTemplates)($el, TEMPLATE_OPTIONS_NAME);\n      var suitableTemplates = (0, _template_manager.suitableTemplatesByName)(templates);\n      templates.forEach(function (_ref2) {\n        var element = _ref2.element,\n            name = _ref2.options.name;\n\n        if (element === suitableTemplates[name]) {\n          (0, _renderer.default)(element).addClass(TEMPLATE_WRAPPER_CLASS).detach();\n        } else {\n          (0, _renderer.default)(element).remove();\n        }\n      });\n      return Object.keys(suitableTemplates).map(function (name) {\n        return {\n          name: name,\n          template: _this._createTemplate(suitableTemplates[name])\n        };\n      });\n    }\n  }, {\n    key: \"_extractAnonymousTemplate\",\n    value: function ($el) {\n      var $anonymousTemplate = $el.contents().detach();\n      var $notJunkTemplateContent = $anonymousTemplate.filter(function (_, element) {\n        var isTextNode = element.nodeType === TEXT_NODE;\n        var isEmptyText = (0, _renderer.default)(element).text().trim().length < 1;\n        return !(isTextNode && isEmptyText);\n      });\n      return $notJunkTemplateContent.length > 0 ? {\n        template: this._createTemplate($anonymousTemplate),\n        name: this._anonymousTemplateName\n      } : {};\n    }\n  }, {\n    key: \"_createTemplateIfNeeded\",\n    value: function (templateSource) {\n      var cachedTemplate = this._tempTemplates.filter(function (tempTemplate) {\n        return tempTemplate.source === (0, _template_manager.templateKey)(templateSource);\n      })[0];\n\n      if (cachedTemplate) {\n        return cachedTemplate.template;\n      }\n\n      var template = this._createTemplate(templateSource);\n\n      this._tempTemplates.push({\n        template: template,\n        source: (0, _template_manager.templateKey)(templateSource)\n      });\n\n      return template;\n    }\n  }, {\n    key: \"_createTemplate\",\n    value: function (templateSource) {\n      return this._createElement((0, _template_manager.validateTemplateSource)(templateSource));\n    }\n  }, {\n    key: \"getTemplate\",\n    value: function (templateSource, templates, _ref3, context) {\n      var _this2 = this;\n\n      var isAsyncTemplate = _ref3.isAsyncTemplate,\n          skipTemplates = _ref3.skipTemplates;\n\n      if (!(0, _type.isFunction)(templateSource)) {\n        return (0, _template_manager.acquireTemplate)(templateSource, this._createTemplateIfNeeded, templates, isAsyncTemplate, skipTemplates, this._defaultTemplates);\n      }\n\n      return new _function_template.FunctionTemplate(function (options) {\n        var templateSourceResult = templateSource.apply(context, (0, _template_manager.getNormalizedTemplateArgs)(options));\n\n        if (!(0, _type.isDefined)(templateSourceResult)) {\n          return new _empty_template.EmptyTemplate();\n        }\n\n        var dispose = false;\n        var template = (0, _template_manager.acquireTemplate)(templateSourceResult, function (templateSource) {\n          if (templateSource.nodeType || (0, _type.isRenderer)(templateSource) && !(0, _renderer.default)(templateSource).is(\"script\")) {\n            return new _function_template.FunctionTemplate(function () {\n              return templateSource;\n            });\n          }\n\n          dispose = true;\n          return _this2._createTemplate(templateSource);\n        }, templates, isAsyncTemplate, skipTemplates, _this2._defaultTemplates);\n        var result = template.render(options);\n        dispose && template.dispose && template.dispose();\n        return result;\n      });\n    }\n  }, {\n    key: \"anonymousTemplateName\",\n    get: function () {\n      return this._anonymousTemplateName;\n    }\n  }], [{\n    key: \"createDefaultOptions\",\n    value: function () {\n      return {\n        integrationOptions: {\n          watchMethod: function (fn, callback) {\n            var options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n\n            if (!options.skipImmediate) {\n              callback(fn());\n            }\n\n            return _common.noop;\n          },\n          templates: {\n            \"dx-polymorph-widget\": DX_POLYMORPH_WIDGET_TEMPLATE\n          },\n          useDeferUpdateForTemplates: false\n        }\n      };\n    }\n  }]);\n\n  return TemplateManager;\n}();\n\nexports.TemplateManager = TemplateManager;","map":{"version":3,"sources":["E:/Monday.com/quickstart-react/node_modules/devextreme/core/template_manager.js"],"names":["exports","TemplateManager","_renderer","_interopRequireDefault","require","_type","_common","_extend","_function_template","_empty_template","_template_manager","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","TEXT_NODE","ANONYMOUS_TEMPLATE_NAME","TEMPLATE_OPTIONS_NAME","TEMPLATE_WRAPPER_CLASS","DX_POLYMORPH_WIDGET_TEMPLATE","FunctionTemplate","_ref","model","parent","widgetName","widget","default","widgetElement","widgetOptions","options","_createComponent","createElement","anonymousTemplateName","_tempTemplates","_defaultTemplates","_anonymousTemplateName","_createElement","defaultCreateElement","_createTemplateIfNeeded","bind","value","templates","extend","forEach","tempTemplate","template","dispose","$el","_extractTemplates","anonymousTemplateMeta","_extractAnonymousTemplate","_this","findTemplates","suitableTemplates","suitableTemplatesByName","_ref2","element","name","addClass","detach","remove","keys","map","_createTemplate","$anonymousTemplate","contents","$notJunkTemplateContent","filter","_","isTextNode","nodeType","isEmptyText","text","trim","templateSource","cachedTemplate","source","templateKey","push","validateTemplateSource","_ref3","context","_this2","isAsyncTemplate","skipTemplates","isFunction","acquireTemplate","templateSourceResult","apply","getNormalizedTemplateArgs","isDefined","EmptyTemplate","isRenderer","is","result","render","get","integrationOptions","watchMethod","fn","callback","arguments","skipImmediate","noop","useDeferUpdateForTemplates"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (core/template_manager.js)\r\n * Version: 20.2.3\r\n * Build date: Tue Oct 20 2020\r\n *\r\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.TemplateManager = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"./renderer\"));\r\nvar _type = require(\"./utils/type\");\r\nvar _common = require(\"./utils/common\");\r\nvar _extend = require(\"./utils/extend\");\r\nvar _function_template = require(\"./templates/function_template\");\r\nvar _empty_template = require(\"./templates/empty_template\");\r\nvar _template_manager = require(\"./utils/template_manager\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n        throw new TypeError(\"Cannot call a class as a function\")\r\n    }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n        var descriptor = props[i];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor) {\r\n            descriptor.writable = true\r\n        }\r\n        Object.defineProperty(target, descriptor.key, descriptor)\r\n    }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) {\r\n        _defineProperties(Constructor.prototype, protoProps)\r\n    }\r\n    if (staticProps) {\r\n        _defineProperties(Constructor, staticProps)\r\n    }\r\n    return Constructor\r\n}\r\nvar TEXT_NODE = 3;\r\nvar ANONYMOUS_TEMPLATE_NAME = \"template\";\r\nvar TEMPLATE_OPTIONS_NAME = \"dxTemplate\";\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar DX_POLYMORPH_WIDGET_TEMPLATE = new _function_template.FunctionTemplate(function(_ref) {\r\n    var model = _ref.model,\r\n        parent = _ref.parent;\r\n    var widgetName = model.widget;\r\n    if (!widgetName) {\r\n        return (0, _renderer.default)()\r\n    }\r\n    var widgetElement = (0, _renderer.default)(\"<div>\");\r\n    var widgetOptions = model.options || {};\r\n    if (parent) {\r\n        parent._createComponent(widgetElement, widgetName, widgetOptions)\r\n    } else {\r\n        widgetElement[widgetName](widgetOptions)\r\n    }\r\n    return widgetElement\r\n});\r\nvar TemplateManager = function() {\r\n    function TemplateManager(createElement, anonymousTemplateName) {\r\n        _classCallCheck(this, TemplateManager);\r\n        this._tempTemplates = [];\r\n        this._defaultTemplates = {};\r\n        this._anonymousTemplateName = anonymousTemplateName || ANONYMOUS_TEMPLATE_NAME;\r\n        this._createElement = createElement || _template_manager.defaultCreateElement;\r\n        this._createTemplateIfNeeded = this._createTemplateIfNeeded.bind(this)\r\n    }\r\n    _createClass(TemplateManager, [{\r\n        key: \"addDefaultTemplates\",\r\n        value: function(templates) {\r\n            this._defaultTemplates = (0, _extend.extend)({}, this._defaultTemplates, templates)\r\n        }\r\n    }, {\r\n        key: \"dispose\",\r\n        value: function() {\r\n            this._tempTemplates.forEach(function(tempTemplate) {\r\n                tempTemplate.template.dispose && tempTemplate.template.dispose()\r\n            });\r\n            this._tempTemplates = []\r\n        }\r\n    }, {\r\n        key: \"extractTemplates\",\r\n        value: function($el) {\r\n            var templates = this._extractTemplates($el);\r\n            var anonymousTemplateMeta = this._extractAnonymousTemplate($el);\r\n            return {\r\n                templates: templates,\r\n                anonymousTemplateMeta: anonymousTemplateMeta\r\n            }\r\n        }\r\n    }, {\r\n        key: \"_extractTemplates\",\r\n        value: function($el) {\r\n            var _this = this;\r\n            var templates = (0, _template_manager.findTemplates)($el, TEMPLATE_OPTIONS_NAME);\r\n            var suitableTemplates = (0, _template_manager.suitableTemplatesByName)(templates);\r\n            templates.forEach(function(_ref2) {\r\n                var element = _ref2.element,\r\n                    name = _ref2.options.name;\r\n                if (element === suitableTemplates[name]) {\r\n                    (0, _renderer.default)(element).addClass(TEMPLATE_WRAPPER_CLASS).detach()\r\n                } else {\r\n                    (0, _renderer.default)(element).remove()\r\n                }\r\n            });\r\n            return Object.keys(suitableTemplates).map(function(name) {\r\n                return {\r\n                    name: name,\r\n                    template: _this._createTemplate(suitableTemplates[name])\r\n                }\r\n            })\r\n        }\r\n    }, {\r\n        key: \"_extractAnonymousTemplate\",\r\n        value: function($el) {\r\n            var $anonymousTemplate = $el.contents().detach();\r\n            var $notJunkTemplateContent = $anonymousTemplate.filter(function(_, element) {\r\n                var isTextNode = element.nodeType === TEXT_NODE;\r\n                var isEmptyText = (0, _renderer.default)(element).text().trim().length < 1;\r\n                return !(isTextNode && isEmptyText)\r\n            });\r\n            return $notJunkTemplateContent.length > 0 ? {\r\n                template: this._createTemplate($anonymousTemplate),\r\n                name: this._anonymousTemplateName\r\n            } : {}\r\n        }\r\n    }, {\r\n        key: \"_createTemplateIfNeeded\",\r\n        value: function(templateSource) {\r\n            var cachedTemplate = this._tempTemplates.filter(function(tempTemplate) {\r\n                return tempTemplate.source === (0, _template_manager.templateKey)(templateSource)\r\n            })[0];\r\n            if (cachedTemplate) {\r\n                return cachedTemplate.template\r\n            }\r\n            var template = this._createTemplate(templateSource);\r\n            this._tempTemplates.push({\r\n                template: template,\r\n                source: (0, _template_manager.templateKey)(templateSource)\r\n            });\r\n            return template\r\n        }\r\n    }, {\r\n        key: \"_createTemplate\",\r\n        value: function(templateSource) {\r\n            return this._createElement((0, _template_manager.validateTemplateSource)(templateSource))\r\n        }\r\n    }, {\r\n        key: \"getTemplate\",\r\n        value: function(templateSource, templates, _ref3, context) {\r\n            var _this2 = this;\r\n            var isAsyncTemplate = _ref3.isAsyncTemplate,\r\n                skipTemplates = _ref3.skipTemplates;\r\n            if (!(0, _type.isFunction)(templateSource)) {\r\n                return (0, _template_manager.acquireTemplate)(templateSource, this._createTemplateIfNeeded, templates, isAsyncTemplate, skipTemplates, this._defaultTemplates)\r\n            }\r\n            return new _function_template.FunctionTemplate(function(options) {\r\n                var templateSourceResult = templateSource.apply(context, (0, _template_manager.getNormalizedTemplateArgs)(options));\r\n                if (!(0, _type.isDefined)(templateSourceResult)) {\r\n                    return new _empty_template.EmptyTemplate\r\n                }\r\n                var dispose = false;\r\n                var template = (0, _template_manager.acquireTemplate)(templateSourceResult, function(templateSource) {\r\n                    if (templateSource.nodeType || (0, _type.isRenderer)(templateSource) && !(0, _renderer.default)(templateSource).is(\"script\")) {\r\n                        return new _function_template.FunctionTemplate(function() {\r\n                            return templateSource\r\n                        })\r\n                    }\r\n                    dispose = true;\r\n                    return _this2._createTemplate(templateSource)\r\n                }, templates, isAsyncTemplate, skipTemplates, _this2._defaultTemplates);\r\n                var result = template.render(options);\r\n                dispose && template.dispose && template.dispose();\r\n                return result\r\n            })\r\n        }\r\n    }, {\r\n        key: \"anonymousTemplateName\",\r\n        get: function() {\r\n            return this._anonymousTemplateName\r\n        }\r\n    }], [{\r\n        key: \"createDefaultOptions\",\r\n        value: function() {\r\n            return {\r\n                integrationOptions: {\r\n                    watchMethod: function(fn, callback) {\r\n                        var options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\r\n                        if (!options.skipImmediate) {\r\n                            callback(fn())\r\n                        }\r\n                        return _common.noop\r\n                    },\r\n                    templates: {\r\n                        \"dx-polymorph-widget\": DX_POLYMORPH_WIDGET_TEMPLATE\r\n                    },\r\n                    useDeferUpdateForTemplates: false\r\n                }\r\n            }\r\n        }\r\n    }]);\r\n    return TemplateManager\r\n}();\r\nexports.TemplateManager = TemplateManager;\r\n"]},"metadata":{},"sourceType":"script"}